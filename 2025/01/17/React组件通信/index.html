

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/about.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Shanyujia">
  <meta name="keywords" content="">
  
    <meta name="description" content="å†çœ‹è¿˜æ˜¯æœ‰å¾ˆå¤šæ”¶è·çš„">
<meta property="og:type" content="article">
<meta property="og:title" content="Reactç»„ä»¶é€šä¿¡">
<meta property="og:url" content="http://example.com/2025/01/17/React%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/index.html">
<meta property="og:site_name" content="Shanyujia&#39;s Blog">
<meta property="og:description" content="å†çœ‹è¿˜æ˜¯æœ‰å¾ˆå¤šæ”¶è·çš„">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd435d248bfe4407b4199abd9c7e2bea~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?">
<meta property="og:image" content="https://camo.githubusercontent.com/e58c76397f171c4d8b42c4f1ab30ccc8ff24f5a0116df2ee86d84473d9e00368/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f39623061653466366232626434663730383131373032313631363338323166357e74706c762d6b3375316662706663702d7a6f6f6d2d696e2d63726f702d6d61726b3a313531323a303a303a302e6177656270">
<meta property="og:image" content="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016011503.png">
<meta property="og:image" content="https://camo.githubusercontent.com/259b5a04bd2ce117a36babaabfda622ac60e8a81a2f7e286965e73980d882b89/68747470733a2f2f70312d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f38366262633438393732623634353034386463643938623134663434373732377e74706c762d6b3375316662706663702d77617465726d61726b2e696d6167653f">
<meta property="article:published_time" content="2025-01-17T03:09:16.000Z">
<meta property="article:modified_time" content="2025-01-17T08:08:12.465Z">
<meta property="article:author" content="Shanyujia">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd435d248bfe4407b4199abd9c7e2bea~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?">
  
  
  
  <title>Reactç»„ä»¶é€šä¿¡ - Shanyujia&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Shanyujia&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>ä¸»é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å†å²</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner_img.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Reactç»„ä»¶é€šä¿¡"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-01-17 11:09" pubdate>
          January 17, 2025 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.3k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          28 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Reactç»„ä»¶é€šä¿¡</h1>
            
            
              <div class="markdown-body">
                
                <h1>Reactç»„ä»¶é€šä¿¡</h1>
<blockquote>
<p>éšç€ 2019 å¹´ 2 æœˆ React ç¨³å®šç‰ˆ hooks åœ¨ 16.8 ç‰ˆæœ¬å‘å¸ƒï¼Œæ¶Œç°äº†è¶Šæ¥è¶Šå¤šçš„ â€œhooks æ—¶ä»£â€ çš„çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ zustandï¼‰ï¼Œâ€œclass æ—¶ä»£â€ çš„çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ reduxï¼‰ä¹Ÿå…¨é¢æ‹¥æŠ±äº† hooksã€‚æ— ä¸€ä¾‹å¤–ï¼Œå®ƒä»¬éƒ½èšç„¦äºè§£å†³ ç»„ä»¶é€šä¿¡ çš„é—®é¢˜ ğŸ¤”</p>
</blockquote>
<ul>
<li>ç»„ä»¶é€šä¿¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</li>
<li>è¿™ä¹ˆå¤šçš„çŠ¶æ€ç®¡ç†åº“è¦æ€ä¹ˆé€‰ï¼Ÿ</li>
<li>å¯å˜çŠ¶æ€ or ä¸å¯å˜çŠ¶æ€ï¼Ÿ</li>
</ul>
<p>æˆªè‡³ç›®å‰ï¼ŒReact ä¸­ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼ä¸€å…±æœ‰ 5 ç§ï¼Œ</p>
<ul>
<li>props å’Œ callback</li>
<li>Contextï¼ˆå®˜æ–¹ï¼‰</li>
<li>Event Busï¼ˆäº‹ä»¶æ€»çº¿ï¼‰</li>
<li>ref ä¼ é€’</li>
<li>çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ï¼šreduxã€mobxã€zustandã€recoilã€valtioã€jotaiã€hox ç­‰ï¼‰</li>
</ul>
<p>æ¥ä¸‹æ¥ä¸€ä¸ªä¸€ä¸ªä»‹ç»ä¸€ä¸‹</p>
<h2 id="propså’Œ-callback">propså’Œ callback</h2>
<p>props å’Œ callback æ˜¯ React ä¸­ç»„ä»¶é€šä¿¡æœ€åŸºæœ¬çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚</p>
<p>React ç»„ä»¶æœ€åŸºç¡€çš„é€šä¿¡æ–¹å¼æ˜¯ä½¿ç”¨ props æ¥ä¼ é€’ä¿¡æ¯ï¼Œprops æ˜¯åªè¯»çš„ï¼Œæ¯ä¸ªçˆ¶ç»„ä»¶éƒ½å¯ä»¥æä¾› props ç»™å®ƒçš„å­ç»„ä»¶ï¼Œä»è€Œå°†ä¸€äº›ä¿¡æ¯ä¼ é€’ç»™å®ƒï¼Œè¿™é‡Œçš„ä¿¡æ¯å¯ä»¥æ˜¯ï¼Œ</p>
<ul>
<li>JSX æ ‡ç­¾ä¿¡æ¯ï¼Œå¦‚ classNameã€srcã€altã€width å’Œ height ç­‰</li>
<li>å¯¹è±¡æˆ–å…¶ä»–ä»»æ„ç±»å‹çš„å€¼</li>
<li>çˆ¶ç»„ä»¶ä¸­çš„ state</li>
<li>children</li>
<li>balabalaâ€¦</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µåœ¨â€œçˆ¶ä¼ å­â€ çš„é€šä¿¡åœºæ™¯ä¸‹ä½¿ç”¨ propsï¼Œä¸‹é¢æ˜¯ä¸€ä¸ª props é€šä¿¡çš„ä¾‹å­</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = useState&lt;number&gt;(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">count</span>=<span class="hljs-string">&#123;count&#125;</span>&gt;</span>Children<span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-comment">// è§£æ„ props</span><br>  <span class="hljs-keyword">const</span> &#123; count, children &#125; = props;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> parent: &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Received children from parent: &#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>callback å›è°ƒå‡½æ•°ä¹Ÿå¯ä»¥æ˜¯props<br>
åˆ©ç”¨ callback å›è°ƒå‡½æ•°ï¼Œå­ç»„ä»¶å¯ä»¥å‘çˆ¶ç»„ä»¶ä¼ é€’ä¿¡æ¯ï¼Œæ¥ä¸€ä¸ª callback é€šä¿¡çš„ğŸŒ°</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = useState&lt;number&gt;(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">updateCount</span>=<span class="hljs-string">&#123;(value)</span> =&gt;</span> setCount(value)&#125;&gt;Children<span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; updateCount &#125; = props;<br>  <br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> updateCount(count + 1)&#125;&gt;Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œå¦‚æœå¤šä¸ªç»„ä»¶éœ€è¦å…±äº« stateï¼Œä¸”å±‚çº§ä¸æ˜¯å¤ªå¤æ‚æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè€ƒè™‘ çŠ¶æ€æå‡<br>
å®ç°çš„æ€è·¯æ˜¯ï¼š<br>
å°†å…¬å…± state å‘ä¸Šç§»åŠ¨åˆ°å®ƒä»¬çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­<br>
å†ä½¿ç”¨ props ä¼ é€’ç»™å­ç»„ä»¶<br>
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd435d248bfe4407b4199abd9c7e2bea~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" srcset="/img/loading.gif" lazyload alt=""><br>
è¿™æ—¶å€™ä¸€èˆ¬ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜<br>
åœ¨å¤šçº§åµŒå¥—ç»„ä»¶çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ props è¿›è¡Œé€šä¿¡æ˜¯ä¸€ä»¶æˆæœ¬æé«˜çš„äº‹æƒ…<br>
ä½ è¦ä¸€ç›´ç©¿ç©¿ç©¿<br>
æ‰€ä»¥contextå°±åº”è¿è€Œç”Ÿäº† ğŸ˜</p>
<h2 id="Context">Context</h2>
<p>reactå®˜æ–¹å¯¹äºcontextçš„ä½¿ç”¨åœºæ™¯æ˜¯</p>
<blockquote>
<p>ä½¿ç”¨ Context çœ‹èµ·æ¥éå¸¸è¯±äººï¼<br>
ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒä¹Ÿå¤ªå®¹æ˜“è¢«è¿‡åº¦ä½¿ç”¨äº†ã€‚<em>å¦‚æœä½ åªæƒ³æŠŠä¸€äº› props ä¼ é€’åˆ°å¤šä¸ªå±‚çº§ä¸­ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ éœ€è¦æŠŠè¿™äº›ä¿¡æ¯æ”¾åˆ° context é‡Œã€‚</em><br>
åœ¨ä½¿ç”¨ context ä¹‹å‰ï¼Œä½ å¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä» ä¼ é€’ props å¼€å§‹ã€‚ å¦‚æœä½ çš„ç»„ä»¶çœ‹èµ·æ¥ä¸èµ·çœ¼ï¼Œé‚£ä¹ˆé€šè¿‡åå‡ ä¸ªç»„ä»¶å‘ä¸‹ä¼ é€’ä¸€å † props å¹¶ä¸ç½•è§ã€‚è¿™æœ‰ç‚¹åƒæ˜¯åœ¨åŸ‹å¤´è‹¦å¹²ï¼Œä½†æ˜¯è¿™æ ·åšå¯ä»¥è®©å“ªäº›ç»„ä»¶ç”¨äº†å“ªäº›æ•°æ®å˜å¾—ååˆ†æ¸…æ™°ï¼ç»´æŠ¤ä½ ä»£ç çš„äººä¼šå¾ˆé«˜å…´ä½ ç”¨ props è®©æ•°æ®æµå˜å¾—æ›´åŠ æ¸…æ™°ã€‚</li>
<li>æŠ½è±¡ç»„ä»¶å¹¶ å°† JSX ä½œä¸º children ä¼ é€’ ç»™å®ƒä»¬ã€‚ å¦‚æœä½ é€šè¿‡å¾ˆå¤šå±‚ä¸ä½¿ç”¨è¯¥æ•°æ®çš„ä¸­é—´ç»„ä»¶ï¼ˆå¹¶ä¸”åªä¼šå‘ä¸‹ä¼ é€’ï¼‰æ¥ä¼ é€’æ•°æ®ï¼Œè¿™é€šå¸¸æ„å‘³ç€ä½ åœ¨æ­¤è¿‡ç¨‹ä¸­å¿˜è®°äº†æŠ½è±¡ç»„ä»¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯èƒ½æƒ³ä¼ é€’ä¸€äº›åƒ posts çš„æ•°æ® props åˆ°ä¸ä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªå‚æ•°çš„ç»„ä»¶ï¼Œç±»ä¼¼ <code>&lt;Layout posts=&#123;posts&#125; /&gt;</code>ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œè®© Layout æŠŠ children å½“åšä¸€ä¸ªå‚æ•°ï¼Œç„¶åæ¸²æŸ“ <code>&lt;Layout&gt;&lt;Posts posts=&#123;posts&#125; /&gt;&lt;/Layout&gt;</code>ã€‚è¿™æ ·å°±å‡å°‘äº†å®šä¹‰æ•°æ®çš„ç»„ä»¶å’Œä½¿ç”¨æ•°æ®çš„ç»„ä»¶ä¹‹é—´çš„å±‚çº§ã€‚<br>
å¦‚æœè¿™ä¸¤ç§æ–¹æ³•éƒ½ä¸é€‚åˆä½ ï¼Œå†è€ƒè™‘ä½¿ç”¨ contextã€‚</li>
</ol>
</blockquote>
<p><img src="https://camo.githubusercontent.com/e58c76397f171c4d8b42c4f1ab30ccc8ff24f5a0116df2ee86d84473d9e00368/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f39623061653466366232626434663730383131373032313631363338323166357e74706c762d6b3375316662706663702d7a6f6f6d2d696e2d63726f702d6d61726b3a313531323a303a303a302e6177656270" srcset="/img/loading.gif" lazyload alt="context"><br>
Context è®©çˆ¶ç»„ä»¶å¯ä»¥ä¸ºå®ƒä¸‹é¢çš„æ•´ä¸ªç»„ä»¶æ ‘æä¾›æ•°æ®ï¼Œè¿™åœ¨ä¸€äº›ç‰¹å®šçš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ï¼Œ</p>
<ul>
<li>ä¸»é¢˜ï¼šå¯ä»¥åœ¨åº”ç”¨é¡¶å±‚æ”¾ä¸€ä¸ª context providerï¼Œå¹¶åœ¨éœ€è¦è°ƒæ•´å…¶å¤–è§‚çš„ç»„ä»¶ä¸­ä½¿ç”¨è¯¥ context</li>
<li>å…¨å±€çš„å…±äº«ä¿¡æ¯ï¼šå¦‚å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå°†å®ƒæ”¾åˆ° context ä¸­å¯ä»¥æ–¹ä¾¿åœ°åœ¨æ ‘ä¸­ä»»ä½•ä½ç½®è¯»å–</li>
<li>è·¯ç”±ï¼šå¤§å¤šæ•°è·¯ç”±è§£å†³æ–¹æ¡ˆåœ¨å†…éƒ¨ä½¿ç”¨ context ä¿å­˜å½“å‰è·¯ç”±ï¼Œç”¨äºåˆ¤æ–­é“¾æ¥æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ Context æˆ‘ä»¬éœ€è¦è€ƒé‡å…·ä½“çš„åœºæ™¯ï¼Œå› ä¸º Context æœ¬èº«å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼Œ</p>
<ul>
<li>context çš„å€¼ä¸€æ—¦å˜åŒ–ï¼Œæ‰€æœ‰ä¾èµ–è¯¥ context çš„ç»„ä»¶å…¨éƒ¨éƒ½ä¼šÂ forceÂ update</li>
<li>context ä¼šç©¿é€Â React.memoÂ å’ŒÂ shouldComponentUpdateÂ çš„å¯¹æ¯”</li>
</ul>
<p>æ­¤å¤–ï¼Œå¯¹äºå¼‚æ­¥è¯·æ±‚å’Œæ•°æ®é—´çš„è”åŠ¨ï¼ŒContext ä¹Ÿæ²¡æœ‰æä¾›ä»»ä½• API æ”¯æŒï¼Œå¦‚æœä½¿ç”¨ Contextï¼Œéœ€è¦è‡ªå·±åšä¸€äº›å°è£…ã€‚</p>
<h2 id="ref">ref</h2>
<p>ä½¿ç”¨Â refÂ å¯ä»¥è®¿é—®åˆ°ç”± React ç®¡ç†çš„ DOM èŠ‚ç‚¹ï¼Œref ä¸€èˆ¬é€‚ç”¨ä»¥ä¸‹çš„åœºæ™¯ï¼Œ</p>
<p>ç®¡ç†ç„¦ç‚¹ï¼Œè·å–å­ç»„ä»¶çš„å€¼ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾<br>
è§¦å‘å¼ºåˆ¶åŠ¨ç”»<br>
é›†æˆç¬¬ä¸‰æ–¹ DOM åº“</p>
<p>ref ä¹Ÿæ˜¯ç»„ä»¶é€šä¿¡çš„ä¸€ç§æ–¹æ¡ˆï¼Œé€šè¿‡ ref å¯ä»¥è·å–å­ç»„ä»¶çš„å®ä¾‹ï¼Œä»¥ input å…ƒç´ çš„è¾“å…¥å€¼ä¸ºä¾‹ï¼Œ</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useRef, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChildProps</span> &#123;<br>  <span class="hljs-attr">inputRef</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">RefObject</span>&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">ChildProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">&#123; inputRef &#125;</span>) =&gt;</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span> /&gt;</span></span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Parent</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> [text, setText] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">const</span> inputRef = useRef&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (inputRef.<span class="hljs-property">current</span>) &#123;<br>      <span class="hljs-title function_">setText</span>(inputRef.<span class="hljs-property">current</span>.<span class="hljs-property">value</span>);<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">inputRef</span>=<span class="hljs-string">&#123;inputRef&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span>Get Input Value<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Input Value: &#123;text&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br></code></pre></td></tr></table></figure>
<h2 id="çŠ¶æ€ç®¡ç†åº“">çŠ¶æ€ç®¡ç†åº“</h2>
<p>å¥½å•¦ ä¸Šè¿°çš„ç»„ä»¶é€šä¿¡æ–¹æ¡ˆéƒ½æœ‰è‡ªå·±çš„ä½¿ç”¨åœºæ™¯ ä½†æ˜¯ å¦‚æœé¡¹ç›®å¤æ‚åº¦å¾ˆé«˜ ç»„ä»¶å¾ˆå¤š ç»„ä»¶é€šä¿¡å°±ä¼šå˜å¾—å¾ˆå¤æ‚ è¿™æ—¶å€™å°±éœ€è¦çŠ¶æ€ç®¡ç†åº“äº†<br>
React çš„çŠ¶æ€ç®¡ç†åº“ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ React ç”Ÿæ€ä¸­éå¸¸å†…å·çš„ä¸€ä¸ªé¢†åŸŸ<br>
ä»‹ç»ä¸€ä¸‹æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ª</p>
<h3 id="redux">redux</h3>
<p>Redux æ˜¯ä¸€ä¸ªåŸºäº Flux æ¶æ„çš„ä¸€ç§å®ç°ï¼Œéµå¾ªâ€œå•å‘æ•°æ®æµâ€å’Œâ€œä¸å¯å˜çŠ¶æ€æ¨¡å‹â€çš„è®¾è®¡æ€æƒ³</p>
<p>è¿™ä¸ªç®€å•ä»‹ç»ä¸€ä¸‹ fluxæ¶æ„<br>
Fluxå°†ä¸€ä¸ªåº”ç”¨åˆ†æˆå››ä¸ªéƒ¨åˆ†ã€‚</p>
<ul>
<li>Viewï¼š è§†å›¾å±‚</li>
<li>Actionï¼ˆåŠ¨ä½œï¼‰ï¼šè§†å›¾å±‚å‘å‡ºçš„æ¶ˆæ¯ï¼ˆæ¯”å¦‚mouseClickï¼‰</li>
<li>Dispatcherï¼ˆæ´¾å‘å™¨ï¼‰ï¼šç”¨æ¥æ¥æ”¶Actionsã€æ‰§è¡Œå›è°ƒå‡½æ•°</li>
<li>Storeï¼ˆæ•°æ®å±‚ï¼‰ï¼šç”¨æ¥å­˜æ”¾åº”ç”¨çš„çŠ¶æ€ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŠ¨ï¼Œå°±æé†’Viewsè¦æ›´æ–°é¡µé¢</li>
</ul>
<p><img src="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016011503.png" srcset="/img/loading.gif" lazyload alt="flux"></p>
<blockquote>
<p>Flux çš„æœ€å¤§ç‰¹ç‚¹ï¼Œå°±æ˜¯æ•°æ®çš„&quot;å•å‘æµåŠ¨&quot;ã€‚</p>
</blockquote>
<ol>
<li>ç”¨æˆ·è®¿é—® View</li>
<li>View å‘å‡ºç”¨æˆ·çš„ Action</li>
<li>Dispatcher æ”¶åˆ° Actionï¼Œè¦æ±‚ Store è¿›è¡Œç›¸åº”çš„æ›´æ–°</li>
<li>Store æ›´æ–°åï¼Œå‘å‡ºä¸€ä¸ª&quot;change&quot;äº‹ä»¶</li>
<li>View æ”¶åˆ°&quot;change&quot;äº‹ä»¶åï¼Œæ›´æ–°é¡µé¢</li>
</ol>
<p>ä¸Šé¢è¿‡ç¨‹ä¸­ï¼Œæ•°æ®æ€»æ˜¯&quot;å•å‘æµåŠ¨&quot;ï¼Œä»»ä½•ç›¸é‚»çš„éƒ¨åˆ†éƒ½ä¸ä¼šå‘ç”Ÿæ•°æ®çš„&quot;åŒå‘æµåŠ¨&quot;ã€‚è¿™ä¿è¯äº†æµç¨‹çš„æ¸…æ™°</p>
<h4 id="é€šè¿‡-Action-Reducer-Store-çš„å·¥ä½œæµç¨‹å®ç°çŠ¶æ€çš„ç®¡ç†ï¼Œå…·æœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼Œ">é€šè¿‡ Action-Reducer-Store çš„å·¥ä½œæµç¨‹å®ç°çŠ¶æ€çš„ç®¡ç†ï¼Œå…·æœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼Œ</h4>
<ul>
<li>å¯é¢„æµ‹å’Œä¸å¯å˜çŠ¶æ€ï¼Œè¡Œä¸ºç¨³å®šå¯é¢„æµ‹ã€å¯è¿è¡Œåœ¨ä¸åŒç¯å¢ƒ</li>
<li>å•ä¸€ store ï¼Œå•é¡¹æ•°æ®æµé›†ä¸­ç®¡ç†çŠ¶æ€ï¼Œåœ¨åš æ’¤é”€/é‡åšã€Â çŠ¶æ€æŒä¹…åŒ–Â ç­‰åœºæ™¯æœ‰å¤©ç„¶ä¼˜åŠ¿</li>
<li>æˆç†Ÿçš„å¼€å‘è°ƒè¯•å·¥å…·ï¼ŒRedux DevTools å¯ä»¥è¿½è¸ªåˆ°åº”ç”¨çš„çŠ¶æ€çš„æ”¹å˜</li>
</ul>
<p>ä½¿ç”¨ Redux å°±å¾—éµå¾ªä»–çš„è®¾è®¡æ€æƒ³ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„ â€œä¸‰å¤§åŸåˆ™â€ï¼Œ</p>
<ul>
<li>ä½¿ç”¨å•ä¸€ store ä½œä¸ºæ•°æ®æº</li>
<li>state æ˜¯åªè¯»çš„ï¼Œå”¯ä¸€æ”¹å˜ state çš„æ–¹å¼å°±æ˜¯è§¦å‘ action</li>
<li>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹ï¼Œæ¥æ”¶ä¹‹å‰çš„ state å’Œ actionï¼Œå¹¶è¿”å›æ–°çš„ state</li>
</ul>
<p>ä¸‹é¢æœ‰ä¸€ä¸ªç®€å•çš„demo</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; createStore, combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Provider</span>, useSelector, useDispatch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><br><span class="hljs-comment">// å®šä¹‰ action ç±»å‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">INCREMENT</span> = <span class="hljs-string">&quot;INCREMENT&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DECREMENT</span> = <span class="hljs-string">&quot;DECREMENT&quot;</span>;<br><br><span class="hljs-comment">// å®šä¹‰ action åˆ›å»ºå‡½æ•°</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; (&#123; <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">INCREMENT</span> &#125;);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"></span>) =&gt; (&#123; <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">DECREMENT</span> &#125;);<br><br><span class="hljs-comment">// å®šä¹‰ reducer</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">counter</span> = (<span class="hljs-params">state = <span class="hljs-number">0</span>, action: &#123; <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> &#125;</span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">INCREMENT</span>:<br>      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">DECREMENT</span>:<br>      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state;<br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// åˆ›å»º store</span><br><span class="hljs-keyword">const</span> rootReducer = <span class="hljs-title function_">combineReducers</span>(&#123; counter &#125;);<br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(rootReducer);<br><br><span class="hljs-comment">// å®šä¹‰ Counter ç»„ä»¶</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Counter</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">state: &#123; counter: <span class="hljs-built_in">number</span> &#125;</span>) =&gt;</span> state.<span class="hljs-property">counter</span>);<br>  <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Counter: &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(increment())&#125;&gt;add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(decrement())&#125;&gt;dec<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨ Provider åŒ…è£¹æ ¹ç»„ä»¶</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">&#123;store&#125;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæ²¡æœ‰è§„å®šå¦‚ä½•å¤„ç†å¼‚æ­¥åŠ ä¸Šç›¸å¯¹çº¦å®šå¼çš„è®¾è®¡ï¼Œå¯¼è‡´ Redux å­˜åœ¨ä»¥ä¸‹çš„ä¸€äº›é—®é¢˜ï¼Œ</p>
<p>é™¡å³­çš„å­¦ä¹ æ›²çº¿ï¼Œå‰¯ä½œç”¨æ‰”ç»™ä¸­é—´ä»¶æ¥å¤„ç†ï¼Œå¯¼è‡´ç¤¾åŒºä¸€å †ä¸­é—´ä»¶ï¼Œå­¦ä¹ æˆæœ¬é™¡ç„¶å¢åŠ <br>
å¤§é‡çš„æ¨¡ç‰ˆä»£ç ï¼ŒåŒ…æ‹¬ actionã€action creator ç­‰å¤§é‡å’Œä¸šåŠ¡é€»è¾‘æ— å…³çš„æ¨¡æ¿ä»£ç <br>
æ€§èƒ½é—®é¢˜ï¼ŒçŠ¶æ€é‡å¤§çš„æƒ…å†µä¸‹ï¼ŒstateÂ æ›´æ–°ä¼šå½±å“æ‰€æœ‰ç»„ä»¶ï¼Œæ¯ä¸ªÂ actionÂ éƒ½ä¼šè°ƒç”¨æ‰€æœ‰Â reducer</p>
<p>è™½ç„¶ Redux ä¸€è‡´å°è¯•è‡´åŠ›è§£å†³ä¸Šè¿°éƒ¨åˆ†é—®é¢˜ï¼Œæ¯”å¦‚åé¢æ¨å‡ºçš„ reduxÂ toolkitï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œå¯¹äºå¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯åˆå­¦è€…ï¼‰è€Œè¨€ï¼Œä»ç„¶æœ‰æ¯”è¾ƒé«˜çš„å­¦ä¹ æˆæœ¬å’Œå¿ƒæ™ºè´Ÿæ‹…ã€‚<br>
ç›¸æ¯”ä¹‹ä¸‹æˆ‘è¿˜æ˜¯æ›´æ¨èzustand</p>
<h2 id="zustand">zustand</h2>
<p>zustand æ˜¯ä¸€ä¸ªè½»é‡çº§çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç»è¿‡ Gzip å‹ç¼©åä»… 954B å¤§å°ï¼Œ<br>
zustand å‡­å€Ÿå…¶å‡½æ•°å¼çš„ç†å¿µï¼Œä¼˜é›…çš„ API è®¾è®¡ï¼Œæˆä¸º 2021 å¹´ Star æ•°å¢é•¿æœ€å¿«çš„ React çŠ¶æ€ç®¡ç†åº“ï¼Œ</p>
<p>ä¸ redux çš„ç†å¿µç±»ä¼¼ï¼Œzustand ä¹Ÿæ˜¯åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹å’Œå•å‘æ•°æ®æµï¼ŒåŒºåˆ«åœ¨äºï¼Œ</p>
<ul>
<li>redux éœ€è¦åŒ…è£…ä¸€ä¸ªå…¨å±€ / å±€éƒ¨çš„ Context Providerï¼Œè€Œ zustand ä¸ç”¨</li>
<li>reduxÂ åŸºäºÂ reducers çº¯å‡½æ•°æ›´æ–°çŠ¶æ€ï¼Œzustand é€šè¿‡ç±»åŸç”Ÿ useState çš„ hooks è¯­æ³•ï¼Œæ›´ç®€å•çµæ´»</li>
<li>zustand ä¸­çš„çŠ¶æ€æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œä¸éœ€è¦å¼‚æ­¥æ“ä½œæˆ–ä¸­é—´ä»¶</li>
</ul>
<p>zustand çš„å¿ƒæ™ºæ¨¡å‹éå¸¸ç®€å•ï¼ŒåŒ…å«ä¸€ä¸ªå‘å¸ƒè®¢é˜…å™¨å’Œæ¸²æŸ“å±‚ï¼Œå·¥ä½œåŸç†å¦‚ä¸‹</p>
<p><img src="https://camo.githubusercontent.com/259b5a04bd2ce117a36babaabfda622ac60e8a81a2f7e286965e73980d882b89/68747470733a2f2f70312d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f38366262633438393732623634353034386463643938623134663434373732377e74706c762d6b3375316662706663702d77617465726d61726b2e696d6167653f" srcset="/img/loading.gif" lazyload alt="zustand"><br>
å…¶ä¸­ Vanilla å±‚æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°ï¼Œæä¾›äº†<code>setState</code>ã€<code>subscribe</code> å’Œ <code>getState</code> æ–¹æ³•ï¼ŒReact å±‚æ˜¯ Zustand çš„æ ¸å¿ƒï¼Œå®ç°äº† reselect ç¼“å­˜å’Œæ³¨å†Œäº‹ä»¶çš„ listener çš„åŠŸèƒ½ï¼Œå¹¶ä¸”é€šè¿‡ <code>forceUpdate</code> å¯¹ç»„ä»¶è¿›è¡Œé‡æ¸²æŸ“ï¼Œå‘å¸ƒè®¢é˜…ç›¸ä¿¡å¤§å®¶éƒ½æ¯”è¾ƒäº†è§£äº†ï¼Œæˆ‘ä»¬é‡ç‚¹ä»‹ç»ä¸‹æ¸²æŸ“å±‚ã€‚<br>
é¦–å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼ŒReact hooks è¯­æ³•ä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•è®©å½“å‰ç»„ä»¶åˆ·æ–°ï¼Ÿ<br>
æ˜¯ä¸æ˜¯åªéœ€è¦åˆ©ç”¨ useState æˆ– useReducer è¿™ç±» hook çš„åŸç”Ÿèƒ½åŠ›å³å¯ï¼Œè°ƒç”¨ç¬¬äºŒä¸ªè¿”å›å€¼çš„ dispatch å‡½æ•°ï¼Œå°±å¯ä»¥è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿™é‡Œ zustand é€‰æ‹©çš„æ˜¯ useReducerï¼Œ</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> [, forceUpdate] = <span class="hljs-title function_">useReducer</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> c + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> [<span class="hljs-built_in">never</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>]<br></code></pre></td></tr></table></figure>
<p>æœ‰äº† forceUpdate å‡½æ•°ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ä»€ä¹ˆæ—¶å€™è°ƒç”¨ forceUpdate<br>
å‚è€ƒä¸€ä¸‹zustandæºç </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// create å‡½æ•°å®ç°</span><br><span class="hljs-comment">// api æœ¬è´¨å°±æ˜¯å°±æ˜¯ createStore çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯ Vanilla å±‚çš„å‘å¸ƒè®¢é˜…å™¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">api</span>: <span class="hljs-title class_">CustomStoreApi</span> = <span class="hljs-keyword">typeof</span> createState === <span class="hljs-string">&#x27;function&#x27;</span> ? <span class="hljs-title function_">createStore</span>(createState) : createState<br><br><span class="hljs-comment">// è¿™é‡Œçš„ useIsomorphicLayoutEffectÂ æ˜¯åŒæ„æ¡†æ¶å¸¸ç”¨ API å¥—è·¯ï¼Œåœ¨å‰ç«¯ç¯å¢ƒæ˜¯Â useLayoutEffectï¼Œåœ¨ node ç¯å¢ƒæ˜¯Â useEffect</span><br><span class="hljs-title function_">useIsomorphicLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">listener</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">// æ‹¿åˆ°æœ€æ–°çš„ state ä¸ä¸Šä¸€æ¬¡çš„ compare å‡½æ•°</span><br>      <span class="hljs-keyword">const</span> nextState = api.<span class="hljs-title function_">getState</span>()<br>      <span class="hljs-keyword">const</span> nextStateSlice = selectorRef.<span class="hljs-title function_">current</span>(nextState)<br>      <span class="hljs-comment">// åˆ¤æ–­å‰å state å€¼æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœå˜åŒ–è°ƒç”¨ forceUpdate è¿›è¡Œä¸€æ¬¡å¼ºåˆ¶åˆ·æ–°</span><br>      <span class="hljs-keyword">if</span> (!equalityFnRef.<span class="hljs-title function_">current</span>(currentSliceRef.<span class="hljs-property">current</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">StateSlice</span>, nextStateSlice)) &#123;<br>        stateRef.<span class="hljs-property">current</span> = nextState<br>        currentSliceRef.<span class="hljs-property">current</span> = nextStateSlice<br>        <span class="hljs-title function_">forceUpdate</span>()<br>      &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>      erroredRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span><br>      <span class="hljs-title function_">forceUpdate</span>()<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// è®¢é˜… state æ›´æ–°</span><br>  <span class="hljs-keyword">const</span> unsubscribe = api.<span class="hljs-title function_">subscribe</span>(listener)<br>  <span class="hljs-keyword">if</span> (api.<span class="hljs-title function_">getState</span>() !== stateBeforeSubscriptionRef.<span class="hljs-property">current</span>) &#123;<br>    <span class="hljs-title function_">listener</span>()<br>  &#125;<br>  <span class="hljs-keyword">return</span> unsubscribe<br>&#125;, [])<br><br></code></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é¦–å…ˆä»ç¬¬ 24 è¡Œ <code>api.subscribe(listener)</code> å¼€å§‹ï¼Œè¿™é‡Œå…ˆåˆ›å»ºäº† <code>listener</code> çš„è®¢é˜…ï¼Œè¿™å°±ä½¿å¾—ä»»ä½•çš„Â <code>setState</code>Â è°ƒç”¨éƒ½ä¼šè§¦å‘Â <code>listener</code>Â çš„æ‰§è¡Œï¼Œæ¥ç€å›åˆ° <code>listener</code>Â å‡½æ•°çš„å†…éƒ¨ï¼Œåˆ©ç”¨Â <code>api.getState()</code>Â æ‹¿åˆ°äº†æœ€æ–°Â stateï¼Œä»¥åŠä¸Šä¸€æ¬¡çš„ compare å‡½æ•°Â equalityFnRefï¼Œç„¶åæ‰§è¡Œæ¯”è¾ƒå‡½æ•°ååˆ¤æ–­å€¼å‰åæ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚æœæ”¹å˜åˆ™è°ƒç”¨ <code>forceUpdate</code> è¿›è¡Œä¸€æ¬¡å¼ºåˆ¶åˆ·æ–°ã€‚<br>
è¿™å°±æ˜¯ zustand æ¸²æŸ“å±‚çš„åŸç†ï¼Œç®€å•è€Œç²¾å·§ï¼Œzustand å®ç°çŠ¶æ€å…±äº«çš„æ–¹å¼æœ¬è´¨æ˜¯å°†çŠ¶æ€ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œ</p>
<p>tips:</p>
<ul>
<li>useEffect æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè€Œ useLayoutEffect æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</li>
<li>useEffect çš„æ‰§è¡Œæ—¶æœºæ˜¯æµè§ˆå™¨å®Œæˆæ¸²æŸ“ä¹‹åï¼Œè€Œ useLayoutEffect çš„æ‰§è¡Œæ—¶æœºæ˜¯æµè§ˆå™¨æŠŠå†…å®¹çœŸæ­£æ¸²æŸ“åˆ°ç•Œé¢ä¹‹å‰</li>
</ul>
<h2 id="å°ç»“">å°ç»“</h2>
<p>éƒ½ 2025 å¹´äº†ï¼Œå¯¹äº React ç»„ä»¶çš„é€šä¿¡ï¼Œæˆ‘ä»¬æœ‰å¤ªå¤šå¯é€‰çš„æ–¹å¼<br>
å¯¹äºé€‰å‹å¯ä»¥å‚è€ƒä¸‹é¢çš„å¤§è‡´çš„æ€è·¯ï¼Œ</p>
<p>å¦‚æœç»„ä»¶é—´éœ€è¦å…±äº« stateï¼Œä¸”å±‚çº§ä¸æ˜¯å¤ªå¤æ‚æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè€ƒè™‘çŠ¶æ€æå‡<br>
Context æ›´é€‚åˆå­˜å‚¨ä¸€äº›å…¨å±€çš„å…±äº«ä¿¡æ¯ï¼Œå¦‚ä¸»é¢˜ï¼Œç”¨æˆ·ç™»é™†ä¿¡æ¯ç­‰<br>
ref æ›´é€‚ç”¨äºç®¡ç†ç„¦ç‚¹ï¼Œè·å–å­ç»„ä»¶çš„å€¼ï¼Œè§¦å‘å¼ºåˆ¶åŠ¨ç”»ï¼Œç¬¬ä¸‰æ–¹ DOM åº“é›†æˆç­‰åœºæ™¯<br>
å¦‚æœä½ ä¹ æƒ¯äº†ä¸å¯å˜æ›´æ–°ï¼Œå¯ä»¥è€ƒè™‘ç”Ÿæ€ä¸°å¯Œçš„ redux å’Œè½»é‡çš„ zustand<br>
å¦‚æœä½ ä¹ æƒ¯äº†ç±» Vue çš„å“åº”å¼å¯å˜æ¨¡å‹ï¼Œmobx å’Œ valtio å¯èƒ½æ›´é€‚åˆ<br>
å¦‚æœä½ æƒ³å°è¯•åŸå­çŠ¶æ€çš„æ–¹æ¡ˆï¼Œrecoil å’Œ jotai æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©(recoilå·²ç»è¢«gankäº† æ®è¯´æœ‰å†…å­˜æ³„æ¼é—®é¢˜ğŸ¤£)<br>
å¦‚æœä½ æƒ³åŸºäº custom hook å®ç°çŠ¶æ€æŒä¹…åŒ–å’Œå…±äº«ï¼Œhox å¯èƒ½æ›´é€‚åˆ</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/React/" class="print-no-link">#React</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Reactç»„ä»¶é€šä¿¡</div>
      <div>http://example.com/2025/01/17/Reactç»„ä»¶é€šä¿¡/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Shanyujia</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>January 17, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/01/14/%E5%A4%A7%E4%BA%8C%E4%B8%8A%E6%80%BB%E7%BB%93/" title="å¤§äºŒä¸Šæ€»ç»“">
                        <span class="hidden-mobile">å¤§äºŒä¸Šæ€»ç»“</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
