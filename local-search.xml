<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>jsç±»å‹è½¬æ¢</title>
    <link href="/2024/08/17/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
    <url>/2024/08/17/js%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h1><code>Javascript</code>éšå¼ç±»å‹è½¬æ¢</h1><h2 id="ç±»å‹éƒ½æœ‰ä»€ä¹ˆ">ç±»å‹éƒ½æœ‰ä»€ä¹ˆ</h2><ul><li>Number</li><li>String</li><li>Boolean</li><li>Null</li><li>Undefined</li><li>Object</li><li>Symbol (ES2015)</li><li>BigInt (ESNext stage 4)</li></ul><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰è¿˜æœ‰Functionï¼Œæ¯•ç«Ÿèƒ½ç”¨<strong>typeof</strong>è·å–åˆ°ï¼Ÿä¸ï¼Œå‡½æ•°ã€æ•°ç»„éƒ½æ˜¯Objectçš„å­ç±»å‹ã€‚</p><p>ç±»å‹åˆ†ä¸º<code>åŸºæœ¬ç±»å‹</code>å’Œ<code>å¤åˆç±»å‹</code>ä¸¤ç§ï¼Œé™¤äº†å¯¹è±¡ï¼Œå…¶å®ƒéƒ½æ˜¯åŸºæœ¬ç±»å‹</p><h3 id="æ¥ä¸‹æ¥æœ‰è¯·é‡é‡çº§å˜‰å®¾">æ¥ä¸‹æ¥æœ‰è¯·é‡é‡çº§å˜‰å®¾</h3><h2 id="To-Primitive">To Primitive</h2><p>ç»“æ„ï¼štoPrimitive(input: <strong>any</strong>, preferedType?: <strong>â€˜stringâ€™ |â€˜numberâ€™</strong>)<br>ä½œç”¨ï¼šå†…éƒ¨æ–¹æ³•ï¼Œå°†ä»»æ„å€¼è½¬æ¢æˆåŸå§‹å€¼</p><p>è½¬æ¢è§„åˆ™ï¼š</p><ol><li>å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ä¸å¤„ç†ã€‚</li><li>è°ƒç”¨<code>valueOf()</code>ï¼Œå¹¶ç¡®ä¿è¿”å›å€¼æ˜¯åŸºæœ¬ç±»å‹ã€‚</li><li>å¦‚æœæ²¡æœ‰valueOfè¿™ä¸ªæ–¹æ³•æˆ–è€…valueOfè¿”å›çš„ç±»å‹ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆå¯¹è±¡ä¼šç»§ç»­è°ƒç”¨<code>toString()</code>æ–¹æ³•ã€‚</li><li>å¦‚æœåŒæ—¶æ²¡æœ‰valueOfå’ŒtoStringæ–¹æ³•ï¼Œæˆ–è€…è¿”å›çš„éƒ½ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆç›´æ¥æŠ›å‡º<code>TypeError</code>å¼‚å¸¸ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šå¦‚æœ<strong>preferedType=string</strong>ï¼Œé‚£ä¹ˆ2ã€3é¡ºåºè°ƒæ¢</p></blockquote><p>æ¥ç€ï¼Œæˆ‘ä»¬çœ‹ä¸‹å„ä¸ªå¯¹è±¡çš„è½¬æ¢å®ç°</p><table><thead><tr><th>å¯¹è±¡</th><th>valueOf()</th><th>toString()</th><th>é»˜è®¤ preferedType</th></tr></thead><tbody><tr><td>Object</td><td>åŸå€¼</td><td>â€œ[object Object]â€</td><td>Number</td></tr><tr><td>Function</td><td>åŸå€¼</td><td>â€œfunction xyz() {â€¦}â€</td><td>Number</td></tr><tr><td>Array</td><td>åŸå€¼</td><td>â€œx,y,zâ€</td><td>Number</td></tr><tr><td>Date</td><td>æ•°å­—</td><td>â€œSat May 22 2021â€¦â€</td><td>String</td></tr></tbody></table><ol><li>æ•°ç»„çš„toString()å¯ä»¥ç­‰æ•ˆä¸º<code>join(&quot;,&quot;)</code>ï¼Œé‡åˆ°null, undefinedéƒ½è¢«å¿½ç•¥ï¼Œé‡åˆ°symbolç›´æ¥æŠ¥é”™ï¼Œé‡åˆ°æ— æ³•ToPrimitiveçš„å¯¹è±¡ä¹ŸæŠ¥é”™ã€‚</li><li>ä½¿ç”¨<code>æ¨¡æ¿å­—ç¬¦ä¸²</code>æˆ–è€…ä½¿ç”¨<code>String(...)</code>åŒ…è£…æ—¶ï¼ŒpreferedType=stringï¼Œå³ä¼˜å…ˆè°ƒç”¨ .toString()ã€‚</li><li>ä½¿ç”¨<code>å‡æ³•</code>æˆ–è€…<code>Number(...)</code>åŒ…è£…æ—¶ï¼ŒpreferedType=numberï¼Œå³ä¼˜å…ˆè°ƒç”¨<code>.valueOf()</code></li></ol><p>æ¥ä¸‹æ¥çœ‹å‡ ä¸ªğŸŒ°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-number">2</span>].<span class="hljs-title function_">toString</span>() === <span class="hljs-string">&#x27;1,,,2&#x27;</span>;<br><br><span class="hljs-comment">// Uncaught TypeError: Cannot convert a Symbol value to a string</span><br>[<span class="hljs-number">1</span>, <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;x&#x27;</span>)].<span class="hljs-title function_">toString</span>()<br><br><span class="hljs-comment">// Uncaught TypeError: Cannot convert object to primitive value</span><br>[<span class="hljs-number">1</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>)].<span class="hljs-title function_">toString</span>()<br></code></pre></td></tr></table></figure><h2 id="ToNumber">ToNumber</h2><p>ä¸€äº›ç‰¹æ®Šå€¼è½¬ä¸ºæ•°å­—çš„ä¾‹å­ï¼Œç­‰ä¸‹è¦ç”¨åˆ°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;0&quot;</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;&quot;</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;   &quot;</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;\n&quot;</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;\t&quot;</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-literal">null</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-literal">false</span>) === <span class="hljs-number">0</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-literal">true</span>) === <span class="hljs-number">1</span>;<br><span class="hljs-title class_">Number</span>(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// NaN</span><br><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;x&quot;</span>); <span class="hljs-comment">// NaN</span><br></code></pre></td></tr></table></figure><h2 id="åŠ å‡æ³•-Â±">åŠ å‡æ³• Â±</h2><p>åŠ å‡æ³•è¿ç®—ä¸­éµå¾ªäº†ä¸€äº›éšå¼è½¬æ¢è§„åˆ™ï¼š</p><h5 id="é‡åˆ°å¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹">é‡åˆ°å¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</h5><ul><li><strong>åŠ æ³•</strong>ï¼ˆ+ï¼‰è¿ç®—ï¼ŒpreferedTypeæ˜¯é»˜è®¤å€¼</li><li><strong>å‡æ³•</strong>ï¼ˆ-ï¼‰è¿ç®—ï¼ŒpreferedTypeæ˜¯Number</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// &#123;&#125;.toString() === &quot;[object Object]&quot;</span><br><span class="hljs-number">1</span> + &#123;&#125; === <span class="hljs-string">&quot;1[object Object]&quot;</span><br><br><span class="hljs-comment">// [2, 3].toString() === &quot;2,3&quot;</span><br><span class="hljs-number">1</span> + [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>] === <span class="hljs-string">&quot;12,3&quot;</span><br>[<span class="hljs-number">1</span>] + [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>] === <span class="hljs-string">&quot;1,2,3&quot;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;&#125;<br><span class="hljs-comment">// test.toString() === &quot;function test() &#123;&#125;&quot;</span><br><span class="hljs-number">10</span> + test === <span class="hljs-string">&quot;10function test() &#123;&#125;&quot;</span><br></code></pre></td></tr></table></figure><h5 id="éå­—ç¬¦ä¸²-éå­—ç¬¦ä¸²ï¼Œä¸¤è¾¹éƒ½ä¼šå…ˆToNumber">éå­—ç¬¦ä¸² + éå­—ç¬¦ä¸²ï¼Œä¸¤è¾¹éƒ½ä¼šå…ˆToNumber</h5><p>è¿™é‡Œçš„éå­—ç¬¦ä¸²éƒ½æ˜¯æŒ‡åŸºæœ¬ç±»å‹ï¼Œå› ä¸ºå¯¹è±¡ä¼šå…ˆæ‰§è¡ŒToPrimitiveå˜æˆåŸºç¡€ç±»å‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1</span> + <span class="hljs-literal">true</span> === <span class="hljs-number">2</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">false</span> === <span class="hljs-number">1</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">null</span> === <span class="hljs-number">1</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">null</span> + <span class="hljs-literal">false</span> + <span class="hljs-number">1</span> === <span class="hljs-number">2</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span> <span class="hljs-comment">// NaN</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span> + <span class="hljs-literal">false</span> <span class="hljs-comment">// NaN</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span> + [<span class="hljs-number">1</span>] === <span class="hljs-string">&quot;NaN1&quot;</span><br><span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span> + <span class="hljs-string">&quot;1&quot;</span> === <span class="hljs-string">&quot;NaN1&quot;</span><br><span class="hljs-literal">null</span> + <span class="hljs-literal">null</span> === <span class="hljs-number">0</span><br><br><span class="hljs-comment">// 1 + false</span><br><span class="hljs-number">1</span> + ![] === <span class="hljs-number">1</span><br><span class="hljs-number">1</span> + !&#123;&#125; === <span class="hljs-number">1</span><br>!&#123;&#125; + !&#123;&#125; === <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p><strong>1 + undefined + [1] === â€œNaN1â€</strong></p><p>â€‹â€¢<strong>1 + undefined</strong> <strong>éƒ¨åˆ†</strong>ï¼š</p><p>â€‹â€¢å¦‚å‰æ‰€è¿°ï¼Œ1 + undefined çš„ç»“æœæ˜¯ NaNã€‚</p><p>â€‹â€¢<strong>NaN + [1]</strong>ï¼š</p><p>â€‹â€¢[1] æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œå½“æ•°ç»„å¯¹è±¡ä¸éå­—ç¬¦ä¸²ç±»å‹ç›¸åŠ æ—¶ï¼ŒJavaScriptä¼šè°ƒç”¨å®ƒçš„ toString() æ–¹æ³•ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>â€‹â€¢[1].toString() è¿”å› â€œ1â€ã€‚</p><p>â€‹â€¢å› æ­¤ï¼ŒNaN + [1] ç­‰åŒäº NaN + â€œ1â€ã€‚</p><p>â€‹â€¢NaN è¢«éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸² â€œNaNâ€ï¼Œç„¶åä¸ â€œ1â€ è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥ã€‚</p><h5 id="ä»»æ„å€¼-ä»»æ„å€¼ï¼Œä¸€å¾‹æ‰§è¡ŒToNumberï¼Œè¿›è¡Œæ•°å­—è¿ç®—ã€‚">ä»»æ„å€¼ - ä»»æ„å€¼ï¼Œä¸€å¾‹æ‰§è¡ŒToNumberï¼Œè¿›è¡Œæ•°å­—è¿ç®—ã€‚</h5><p>æ­¤æ—¶çš„ preferedType === number</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">3</span> - <span class="hljs-number">1</span> === <span class="hljs-number">2</span><br><span class="hljs-number">3</span> - <span class="hljs-string">&#x27;1&#x27;</span> === <span class="hljs-number">2</span><br><span class="hljs-string">&#x27;3&#x27;</span> - <span class="hljs-number">1</span> === <span class="hljs-number">2</span><br><span class="hljs-string">&#x27;3&#x27;</span> - <span class="hljs-string">&#x27;1&#x27;</span> - <span class="hljs-string">&#x27;2&#x27;</span> === <span class="hljs-number">0</span><br><br><span class="hljs-comment">// [].toString() =&gt; &quot;&quot; =&gt; Number(...) =&gt; 0</span><br><span class="hljs-number">3</span> - [] === <span class="hljs-number">3</span><br><br><span class="hljs-comment">// &#123;&#125;.toString() =&gt; &quot;[object Object]&quot; =&gt; Number(...) =&gt; NaN</span><br><span class="hljs-number">3</span> - &#123;&#125; <span class="hljs-comment">// NaN</span><br><br><span class="hljs-comment">// Dateçš„é»˜è®¤preferedType === string</span><br><span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>date.<span class="hljs-property">toString</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&#x27;str&#x27;</span>;<br>date.<span class="hljs-property">valueOf</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-number">123</span>;<br><br>date + <span class="hljs-number">1</span> === <span class="hljs-string">&#x27;str1&#x27;</span>;<br>date - <span class="hljs-number">1</span> = <span class="hljs-number">122</span>;<br></code></pre></td></tr></table></figure><p>å†çœ‹<code>[] + &#123;&#125;</code>ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±easy</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[].<span class="hljs-title function_">toString</span>() === <span class="hljs-string">&quot;&quot;</span>;<br>&#123;&#125;.<span class="hljs-title function_">toString</span>() === <span class="hljs-string">&quot;[object Object]&quot;</span>;<br><br>[] + &#123;&#125; === <span class="hljs-string">&quot;[object Object]&quot;</span>;<br></code></pre></td></tr></table></figure><h5 id="åœ¨æœ€å‰é¢æ—¶å¯èƒ½ä¸å†æ˜¯å¯¹è±¡">{} åœ¨æœ€å‰é¢æ—¶å¯èƒ½ä¸å†æ˜¯å¯¹è±¡</h5><p>ä¸æ˜¯å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œçœ‹çœ‹ç»å…¸çš„ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;&#125; + [] === <span class="hljs-number">0</span>;<br>&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">2</span> &#125; + [] === <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p>è¿™å•¥ç©æ„ï¼Ÿè¯´å¥½çš„&quot;[object Object]&quot;å‘¢ï¼Ÿ</p><p>å¥½å§ï¼Œè¿™æ˜¯<code>&#123;&#125;</code>å…¶å®ä»£è¡¨çš„æ˜¯<strong>ä»£ç å—</strong>ï¼Œæœ€åå°±å˜æˆäº†<code>+ []</code>ï¼Œæ ¹æ®å‰é¢çš„åŸåˆ™ï¼Œæ•°ç»„å…ˆè¢«è½¬æ¢æˆå­—ç¬¦ä¸²<code>&quot;&quot;</code>ï¼Œæ¥ç€å› ä¸º+xçš„è¿ç®—ï¼Œå­—ç¬¦ä¸²è¢«è½¬æˆæ•°å­—<code>0</code>ã€‚</p><p>é‚£ { a: 2 } æ€»è¯¥æ˜¯å¯¹è±¡äº†å§ï¼Ÿå…¶å®è¿™æ—¶å€™<code>a</code>ä¸æ˜¯ä»£è¡¨å¯¹è±¡å±æ€§ï¼Œè€Œæ˜¯è¢«å½“æˆäº†æ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œæ ‡ç­¾è¿™ä¸œè¥¿IE6å°±å·²ç»æœ‰äº†ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬å†™æˆå¯¹è±¡æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé€—å·è¦æ”¹æˆåˆ†å·æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Uncaught SyntaxError: Unexpected token &#x27;:&#x27;</span><br>&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">3</span> &#125; + []<br><br><span class="hljs-comment">// åˆ†å·OK</span><br>&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>; <span class="hljs-attr">b</span>: <span class="hljs-number">3</span> &#125; + [] === <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><h5 id="symbolä¸èƒ½åŠ å‡">symbolä¸èƒ½åŠ å‡</h5><p>å¦‚æœåœ¨è¡¨è¾¾å¼ä¸­æœ‰symbolç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ¯”å¦‚<code>1 + Symbol(&quot;x&quot;)</code>æŠ¥é”™å¦‚ä¸‹ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Uncaught TypeError: Cannot <span class="hljs-built_in">convert</span> <span class="hljs-keyword">a</span> Symbol <span class="hljs-built_in">value</span> <span class="hljs-built_in">to</span> <span class="hljs-keyword">a</span> <span class="hljs-built_in">number</span><br></code></pre></td></tr></table></figure><h2 id="å®½æ¾ç›¸ç­‰">å®½æ¾ç›¸ç­‰ ==</h2><p>ç›¸ç­‰äºå…¨ç­‰éƒ½éœ€è¦å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå½“ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œå®½æ¾ç›¸ç­‰ä¼šè§¦å‘éšå¼è½¬æ¢ã€‚ä¸‹é¢ä»‹ç»è§„åˆ™ï¼š</p><h5 id="å¯¹è±¡-å¯¹è±¡ï¼Œç±»å‹ä¸€è‡´åˆ™ä¸åšè½¬æ¢">å¯¹è±¡ == å¯¹è±¡ï¼Œç±»å‹ä¸€è‡´åˆ™ä¸åšè½¬æ¢</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;&#125; != &#123;&#125;<br>[] != &#123;&#125;<br>[] != []<br></code></pre></td></tr></table></figure><h5 id="å¯¹è±¡-åŸºæœ¬å€¼ï¼Œå¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹">å¯¹è±¡ == åŸºæœ¬å€¼ï¼Œå¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å°å¿ƒä»£ç å—</span><br><span class="hljs-string">&quot;[object Object]&quot;</span> == &#123;&#125;<br>[] == <span class="hljs-string">&quot;&quot;</span><br>[<span class="hljs-number">1</span>] == <span class="hljs-string">&quot;1&quot;</span><br>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>] == <span class="hljs-string">&quot;1,2&quot;</span><br></code></pre></td></tr></table></figure><h5 id="å¸ƒå°”å€¼-éå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼å…ˆè½¬æ¢æˆæ•°å­—ï¼Œå†æŒ‰æ•°å­—è§„åˆ™æ“ä½œ">å¸ƒå°”å€¼ == éå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼å…ˆè½¬æ¢æˆæ•°å­—ï¼Œå†æŒ‰æ•°å­—è§„åˆ™æ“ä½œ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// [] =&gt; &quot;&quot; =&gt; Number(...) =&gt; 0</span><br><span class="hljs-comment">// false =&gt; 0</span><br>[] == <span class="hljs-literal">false</span><br><br><span class="hljs-comment">// [1] =&gt; &quot;1&quot; =&gt; 1</span><br><span class="hljs-comment">// true =&gt; 1</span><br>[<span class="hljs-number">1</span>] == <span class="hljs-literal">true</span><br><br><span class="hljs-comment">// [1,2] =&gt; &quot;1,2&quot; =&gt; NaN</span><br><span class="hljs-comment">// true =&gt; 1</span><br>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>] != <span class="hljs-literal">true</span><br><br><span class="hljs-string">&quot;0&quot;</span> == <span class="hljs-literal">false</span><br><span class="hljs-string">&quot;&quot;</span> == <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h5 id="æ•°å­—-å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ToNumberè½¬æ¢æˆæ•°å­—">æ•°å­— == å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ToNumberè½¬æ¢æˆæ•°å­—</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;2&quot;</span> == <span class="hljs-number">2</span><br>[] == <span class="hljs-number">0</span><br>[<span class="hljs-number">1</span>] == <span class="hljs-number">1</span><br><span class="hljs-comment">// [1,2].toString() =&gt; &quot;1,2&quot; =&gt; Number(...) =&gt; NaN</span><br>[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>] != <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h5 id="nullã€undefinedã€symbol">nullã€undefinedã€symbol</h5><p>nullã€undefinedä¸ä»»ä½•éè‡ªèº«çš„å€¼å¯¹æ¯”ç»“æœéƒ½æ˜¯falseï¼Œä½†æ˜¯<code>null == undefined</code> æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-literal">null</span> == <span class="hljs-literal">null</span><br><span class="hljs-literal">undefined</span> == <span class="hljs-literal">undefined</span><br><span class="hljs-literal">null</span> == <span class="hljs-literal">undefined</span><br><br><span class="hljs-literal">null</span> != <span class="hljs-number">0</span><br><span class="hljs-literal">null</span> != <span class="hljs-literal">false</span><br><br><span class="hljs-literal">undefined</span> != <span class="hljs-number">0</span><br><span class="hljs-literal">undefined</span> != <span class="hljs-literal">false</span><br><br><span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;x&#x27;</span>) != <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;x&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="å¯¹æ¯”">å¯¹æ¯” &lt; &gt;</h2><p>å¯¹æ¯”ä¸åƒç›¸ç­‰ï¼Œå¯ä»¥ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰é˜²æ­¢ç±»å‹è½¬æ¢ï¼Œå¯¹æ¯”ä¸€å®šä¼šå­˜åœ¨éšå¼ç±»å‹è½¬æ¢ã€‚</p><h5 id="å¯¹è±¡æ€»æ˜¯å…ˆæ‰§è¡ŒToPrimitiveä¸ºåŸºæœ¬ç±»å‹">å¯¹è±¡æ€»æ˜¯å…ˆæ‰§è¡ŒToPrimitiveä¸ºåŸºæœ¬ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[] &lt; [] <span class="hljs-comment">// false</span><br><span class="hljs-comment">// =&gt; &quot;&quot; &lt; &quot;&quot; </span><br>[] &lt;= &#123;&#125; <span class="hljs-comment">// true</span><br><span class="hljs-string">&quot;&quot;</span> &lt;= <span class="hljs-string">&quot;[object Object]&quot;</span> <br>(&#123;&#125; &lt; &#123;&#125;) <span class="hljs-comment">// false</span><br>(&#123;&#125; &lt;= &#123;&#125;) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><p>åé¢è¿™ä¸¤ä¸ªè¿˜æŒºæœ‰è¯´æ³•çš„</p><p><strong>{} &lt; {}</strong></p><p>â€‹â€¢<strong>ä»£ç å— vs è¡¨è¾¾å¼</strong>ï¼š</p><p>â€‹â€¢åœ¨æ²¡æœ‰æ‹¬å·çš„æƒ…å†µä¸‹ï¼Œ{} è¢«è§£é‡Šä¸ºä¸€ä¸ªä»£ç å—è€Œä¸æ˜¯å¯¹è±¡å­—é¢é‡ã€‚</p><p>â€‹â€¢å› æ­¤ï¼Œ{} &lt; {} è¢«è§£é‡Šä¸ºä¸€ä¸ªç©ºä»£ç å— &lt; ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ¯”è¾ƒã€‚</p><p>â€‹â€¢ç”±äºç¬¬ä¸€ä¸ª {} è¢«å½“ä½œä»£ç å—ï¼Œ&lt; è¿ç®—ç¬¦ä¹‹åçš„ {} å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„å®šä¹‰ï¼Œä½†æ²¡æœ‰æœ‰æ•ˆçš„ä¸Šä¸‹æ–‡ã€‚</p><p><strong>å®é™…ä¸Š</strong>ï¼Œ{} &lt; {} åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œå¯èƒ½è§£é‡Šä¸º falseï¼Œå› ä¸º JavaScript ä¸èƒ½æ¯”è¾ƒä¸¤ä¸ªä»£ç å—ã€‚</p><p>åŠ ä¸Šæ‹¬å·å°±æ˜¯</p><p>({} &lt; {})ï¼š{} è¢«è§£é‡Šä¸ºå¯¹è±¡å­—é¢é‡ï¼Œå¹¶ä¸” () æ‹¬èµ·æ¥ç¡®ä¿ {} &lt; {} ä½œä¸ºå¯¹è±¡å­—é¢é‡è¢«æ­£ç¡®è§£æã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ{} è½¬æ¢ä¸º â€œ[object Object]â€ï¼Œè€Œ â€œ[object Object]â€ &lt; â€œ[object Object]â€ ä¸º falseï¼Œå› ä¸ºä»»ä½•ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²æ¯”è¾ƒéƒ½æ˜¯ falseã€‚</p><p><strong>{} &lt;= {}</strong></p><p>â€‹â€¢<strong>ä»£ç å— vs è¡¨è¾¾å¼</strong>ï¼š</p><p>â€‹â€¢å’Œä¸Šé¢ä¸€æ ·ï¼Œ{} &lt;= {} è¢«è§£é‡Šä¸ºä¸€ä¸ªä»£ç å— &lt; ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ¯”è¾ƒã€‚</p><p>â€‹â€¢ç”±äº &lt;= è¿ç®—ç¬¦å’Œ &lt; è¿ç®—ç¬¦ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´è¯­æ³•é”™è¯¯æˆ–æ— æ•ˆçš„æ¯”è¾ƒã€‚</p><p><strong>å®é™…ä¸Š</strong>ï¼Œ{} &lt;= {} ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–è¢«è§£é‡Šä¸º true åœ¨æŸäº›ç‰¹å®šçš„è§£æç¯å¢ƒä¸­ï¼Œè™½ç„¶ç†è®ºä¸Šå®ƒæ˜¯ä¸è¢«å…è®¸çš„ã€‚</p><h5 id="ä»»ä½•ä¸€è¾¹å‡ºç°éå­—ç¬¦ä¸²çš„å€¼ï¼Œåˆ™ä¸€å¾‹è½¬æ¢æˆæ•°å­—åšå¯¹æ¯”">ä»»ä½•ä¸€è¾¹å‡ºç°éå­—ç¬¦ä¸²çš„å€¼ï¼Œåˆ™ä¸€å¾‹è½¬æ¢æˆæ•°å­—åšå¯¹æ¯”</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// [&quot;06&quot;] =&gt; &quot;06&quot; =&gt; 6</span><br>[<span class="hljs-string">&quot;06&quot;</span>] &lt; <span class="hljs-number">2</span>   <span class="hljs-comment">// false </span><br><br>[<span class="hljs-string">&quot;06&quot;</span>] &lt; <span class="hljs-string">&quot;2&quot;</span> <span class="hljs-comment">// true</span><br>[<span class="hljs-string">&quot;06&quot;</span>] &gt; <span class="hljs-number">2</span>   <span class="hljs-comment">// true</span><br><br><span class="hljs-number">5</span> &gt; <span class="hljs-literal">null</span>     <span class="hljs-comment">// true</span><br>-<span class="hljs-number">1</span> &lt; <span class="hljs-literal">null</span>    <span class="hljs-comment">// true</span><br><span class="hljs-number">0</span> &lt;= <span class="hljs-literal">null</span>    <span class="hljs-comment">// true</span><br><br><span class="hljs-number">0</span> &lt;= <span class="hljs-literal">false</span>   <span class="hljs-comment">// true</span><br><span class="hljs-number">0</span> &lt; <span class="hljs-literal">false</span>    <span class="hljs-comment">// false</span><br><br><span class="hljs-comment">// undefined =&gt; Number(...) =&gt; NaN</span><br><span class="hljs-number">5</span> &gt; <span class="hljs-literal">undefined</span> <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><h2 id="To-Boolean">To Boolean</h2><p>æ—¢ç„¶æ˜¯æ€»ç»“ï¼Œé‚£ä¹ˆå¯èƒ½è¿˜è¦è®²ä¸€ä¸‹å¸ƒå°”å€¼çš„éšå¼è½¬æ¢ã€‚è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æœ‰å“ªäº›åœ°æ–¹ä¼šä½¿ç”¨åˆ°ï¼š</p><ul><li>if(â€¦)</li><li>for(;â€¦ğŸ˜‰</li><li>while(â€¦)</li><li>do while(â€¦)</li><li>â€¦ ? :</li><li>||</li><li>&amp;&amp;</li></ul><p>æ—¢ç„¶çŸ¥é“ä¼šè½¬æ¢ï¼Œé‚£ä¹ˆä»€ä¹ˆå€¼æ˜¯çœŸå€¼ï¼Œä»€ä¹ˆå€¼æ˜¯å‡å€¼å‘¢ï¼Ÿæ¢ä¸ªæ€è·¯ï¼Œå‡å€¼ä»¥å¤–éƒ½æ˜¯çœŸå€¼ã€‚çœ‹çœ‹å“ªäº›æ˜¯<strong>å‡å€¼</strong>ï¼š</p><ul><li>undefined</li><li>null</li><li>false</li><li>+0</li><li>-0</li><li>NaN</li><li>â€œâ€</li></ul><h2 id="æ€»ç»“">æ€»ç»“</h2><p>å¯¹è±¡éƒ½éœ€è¦å…ˆToPrimitiveè½¬æˆåŸºæœ¬ç±»å‹ï¼Œé™¤éæ˜¯å®½æ¾ç›¸ç­‰ï¼ˆ==ï¼‰æ—¶ä¸¤ä¸ªå¯¹è±¡åšå¯¹æ¯”ã€‚</p><ul><li>+   æ²¡æœ‰å­—ç¬¦ä¸²å°±å…¨è½¬æ•°å­—</li><li>-   å…¨è½¬æ•°å­—ï¼ŒpreferedType===Number</li><li>==  åŒç±»å‹ä¸è½¬ï¼Œæ•°å­—ä¼˜å…ˆï¼Œå¸ƒå°”å…¨è½¬æ•°å­—ï¼Œnullã€undefinedã€symbolä¸è½¬</li><li>&lt;&gt;  æ•°å­—ä¼˜å…ˆï¼Œé™¤éä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>eslint</title>
    <link href="/2024/08/04/eslint/"/>
    <url>/2024/08/04/eslint/</url>
    
    <content type="html"><![CDATA[<h1>eslintå°å¦™æ‹›ğŸ¶</h1><h1>1. åŸºæœ¬ä½¿ç”¨</h1><ol><li>é¡¹ç›®å®‰è£…eslintï¼š<code>yarn add eslint -D</code>ï¼›</li><li>åˆå§‹åŒ–eslinté…ç½®ï¼šeslint --initï¼›</li><li>æ£€æµ‹eslintï¼šè¿è¡Œeslintï¼›</li></ol><h2 id="1-1-åŸºæœ¬å‚æ•°">1.1 åŸºæœ¬å‚æ•°</h2><p>eslinté…ç½®å‚æ•°çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œä¸€ç§æ˜¯é€šè¿‡å‘½ä»¤è¡Œï¼›é…ç½®æ–‡ä»¶çš„å‚æ•°ä¸ä¸€å®šåŒ…å«å‘½ä»¤è¡Œçš„ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹å’Œä½¿ç”¨ï¼Œ<strong>æ¨èä¼˜å…ˆåœ¨é…ç½®ä¸­é…ç½®</strong>ï¼›</p><h3 id="1-1-1-eslintrcå‚æ•°">1.1.1 .eslintrcå‚æ•°</h3><p>è¯¦æƒ…è¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2Fdocs%2Fuser-guide%2Fconfiguring%2Fconfiguration-files%23configuration-file-formats">eslint.org/docs/user-gâ€¦</a>ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br><span class="hljs-comment">// è‹¥é¡¹ç›®ä¸­æœ‰å¤šä¸ªå­é¡¹ç›®ï¼Œä¸”æ¯ä¸ªé¡¹ç›®éƒ½ä¼šæœ‰.eslintrcï¼Œå­é¡¹ç›®ä¼šä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾æ‰€æœ‰çš„.eslintrcï¼Œç›´åˆ°æ‰¾åˆ°root:trueçš„eslintrcï¼Œå†å°†æ‰€æœ‰çš„.eslintrcåˆå¹¶</span><br><span class="hljs-string">&#x27;root&#x27;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// å¯¹ç¯å¢ƒå®šä¹‰çš„ä¸€ç»„å…¨å±€å˜é‡çš„é¢„è®¾ è¯¦ç»†çœ‹ï¼šhttps://eslint.org/docs/user-guide/configuring/language-options#specifying-environments</span><br><span class="hljs-string">&#x27;env&#x27;</span>: &#123;<br><span class="hljs-comment">// æµè§ˆå™¨å…¨å±€å˜é‡</span><br><span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// Node.js å…¨å±€å˜é‡å’Œä½œç”¨åŸŸ</span><br><span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// CommonJSå…¨å±€å˜é‡å’ŒCommonJSä½œç”¨åŸŸ</span><br><span class="hljs-attr">commonjs</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// å¯ç”¨é™¤æ¨¡å—ä¹‹å¤–çš„æ‰€æœ‰ECMAScript 6åŠŸèƒ½</span><br><span class="hljs-attr">es6</span>: <span class="hljs-literal">true</span><br>&#125;,<br><span class="hljs-comment">// å°†æ•°æ®æä¾›ç»™æ¯ä¸€ä¸ªå°†è¢«æ‰§è¡Œçš„è§„åˆ™</span><br><span class="hljs-string">&quot;settings&quot;</span>: &#123;<br><span class="hljs-string">&quot;sharedData&quot;</span>: <span class="hljs-string">&quot;Hello&quot;</span><br>&#125;,<br><span class="hljs-comment">// ç»§æ‰¿å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„æ‰€æœ‰ç‰¹æ€§</span><br><span class="hljs-string">&#x27;extends&#x27;</span>: [<br><span class="hljs-string">&#x27;eslint:recommended&#x27;</span>,<br><span class="hljs-string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span><br>],<br><span class="hljs-comment">// æ’ä»¶ï¼Œå‘ESLintæ·»åŠ å„ç§æ‰©å±•ï¼Œå¯ä»¥å®šä¹‰è§„åˆ™ï¼Œç¯å¢ƒæˆ–é…ç½®çš„ç¬¬ä¸‰æ–¹æ¨¡å—</span><br><span class="hljs-string">&#x27;plugins&#x27;</span>: [<br><span class="hljs-string">&#x27;@typescript-eslint&#x27;</span><br>],<br><span class="hljs-comment">// å…¨å±€å˜é‡</span><br><span class="hljs-string">&#x27;globals&#x27;</span>: &#123;<br><span class="hljs-comment">// falseã€readableã€readonly è¿™ 3 ä¸ªæ˜¯ç­‰ä»·çš„ï¼Œè¡¨ç¤ºå˜é‡åªå¯è¯»ä¸å¯å†™ï¼›</span><br><span class="hljs-comment">// trueã€writeableã€writable è¿™ 3 ä¸ªæ˜¯ç­‰ä»·çš„ï¼Œè¡¨ç¤ºå˜é‡å¯è¯»å¯å†™ï¼›</span><br><span class="hljs-string">&#x27;$&#x27;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-string">&#x27;console&#x27;</span>: <span class="hljs-literal">false</span><br>&#125;,<br><span class="hljs-comment">// è§£é‡Šå™¨</span><br><span class="hljs-string">&#x27;parser&#x27;</span>: <span class="hljs-string">&#x27;@typescript-eslint/parser&#x27;</span>,<br><span class="hljs-comment">// è§£é‡Šå™¨çš„é…ç½®</span><br><span class="hljs-string">&#x27;parserOptions&#x27;</span>: &#123;<br><span class="hljs-comment">// ä»£ç æ¨¡å—ç±»å‹ï¼Œå¯é€‰script(é»˜è®¤)ï¼Œmodule</span><br><span class="hljs-string">&#x27;sourceType&#x27;</span>: <span class="hljs-string">&#x27;module&#x27;</span>,<br><span class="hljs-comment">// æŒ‡å®šECMAScriptç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º5</span><br><span class="hljs-string">&#x27;ecamVersion&#x27;</span>: <span class="hljs-number">6</span>,<br><span class="hljs-comment">// é¢å¤–çš„è¯­è¨€ç‰¹æ€§ï¼Œæ‰€æœ‰é€‰é¡¹é»˜è®¤éƒ½æ˜¯ false</span><br><span class="hljs-string">&#x27;ecmaFeatures&#x27;</span>: &#123;<br><span class="hljs-comment">// æ˜¯å¦å…è®¸ return è¯­å¥å‡ºç°åœ¨ global ç¯å¢ƒä¸‹</span><br><span class="hljs-string">&#x27;globalReturn&#x27;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// æ˜¯å¦å¼€å¯å…¨å±€ script æ¨¡å¼</span><br><span class="hljs-string">&#x27;impliedStrict&#x27;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// æ˜¯å¦å¯ç”¨ JSX</span><br><span class="hljs-string">&#x27;jsx&#x27;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-comment">// æ˜¯å¦å¯ç”¨å¯¹å®éªŒæ€§çš„objectRest/spreadPropertiesçš„æ”¯æŒ</span><br><span class="hljs-string">&#x27;experimentalObjectRestSpread&#x27;</span>: <span class="hljs-literal">false</span><br>&#125;<br>&#125;,<br><span class="hljs-comment">// è§„åˆ™</span><br><span class="hljs-string">&#x27;rules&#x27;</span>: &#123;<br><span class="hljs-comment">// ç¦æ­¢ä½¿ç”¨ alert</span><br><span class="hljs-string">&#x27;no-alert&#x27;</span>: <span class="hljs-string">&#x27;off&#x27;</span>,<br><span class="hljs-comment">// é€—å·å‰é¢æ²¡æœ‰ç©ºæ ¼ åé¢æœ‰ç©ºæ ¼</span><br><span class="hljs-string">&#x27;comma-spacing&#x27;</span>: [<span class="hljs-number">2</span>, &#123;<br><span class="hljs-string">&#x27;before&#x27;</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">&#x27;after&#x27;</span>: <span class="hljs-literal">true</span><br>&#125;],<br>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="1-1-2-å‘½ä»¤è¡Œå‚æ•°">1.1.2 å‘½ä»¤è¡Œå‚æ•°</h3><p>è¯¦æƒ…è¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fuser-guide%2Fcommand-line-interface">eslint.cn/docs/user-gâ€¦</a>ï¼›</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs lua">lua<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç eslint [options] file.js [file.js] [dir]<br><br>Basic configuration:<br>  <span class="hljs-comment">--no-eslintrc                  ç¦æ­¢ä½¿ç”¨é…ç½®æ–‡ä»¶.eslintrc.*</span><br>  -c, <span class="hljs-comment">--config path::String      æŒ‡å®šä½¿ç”¨.eslintrc.*é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ˆå¯ä»¥ä¸æ˜¯è¿™ä¸ªåå­—ï¼‰</span><br>  <span class="hljs-comment">--env [String]                 æŒ‡å®šç¯å¢ƒ</span><br>  <span class="hljs-comment">--ext [String]                 æŒ‡å®šJavaScriptæ–‡ä»¶æ‰©å±•åï¼Œé»˜è®¤å€¼ï¼š.js</span><br>  <span class="hljs-comment">--global [String]              å®šä¹‰å…¨å±€å˜é‡</span><br>  <span class="hljs-comment">--parser String                æŒ‡å®šè§£æå™¨</span><br>  <span class="hljs-comment">--parser-options Object        æŒ‡å®šè§£æå™¨é…ç½®</span><br>  <span class="hljs-comment">--resolve-plugins-relative-to path::String  åº”è¯¥ä»ä¸­è§£ææ’ä»¶çš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸ºCWD</span><br><br>Specifying rules <span class="hljs-keyword">and</span> plugins:<br>  <span class="hljs-comment">--rulesdir [path::String]      ä½¿ç”¨å…¶ä»–è§„åˆ™çš„ç›®å½•</span><br>  <span class="hljs-comment">--plugin [String]              æŒ‡å®šæ’ä»¶</span><br>  <span class="hljs-comment">--rule Object                  æŒ‡å®šè§„åˆ™</span><br><br>Fixing problems:<br>  <span class="hljs-comment">--fix                          è‡ªå®šä¿®å¤eslinté—®é¢˜</span><br>  <span class="hljs-comment">--fix-dry-run                  è‡ªåŠ¨ä¿®å¤é—®é¢˜ä½†ä¸ä¿å­˜å¯¹æ–‡ä»¶çš„æ›´æ”¹</span><br>  <span class="hljs-comment">--fix-type Array               æŒ‡å®šè¦åº”ç”¨çš„ä¿®å¤ç±»å‹ï¼ˆé—®é¢˜ã€å»ºè®®ã€å¸ƒå±€ï¼‰</span><br><br>Ignoring files:<br>  <span class="hljs-comment">--ignore-path path::String     æŒ‡å®šå¿½ç•¥çš„è·¯å¾„ å³æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ä½œä¸º.eslintignore</span><br>  <span class="hljs-comment">--no-ignore                    ç¦ç”¨å¿½ç•¥æ–‡ä»¶å’Œæ¨¡å¼çš„ä½¿ç”¨</span><br>  <span class="hljs-comment">--ignore-pattern [String]      è¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ï¼ˆé™¤äº†.eslintignoreä¸­çš„æ–‡ä»¶ï¼‰</span><br><br>Using <span class="hljs-built_in">stdin</span>:<br>  <span class="hljs-comment">--stdin                        &lt;STDIN&gt;ä¸Šæä¾›çš„Lintä»£ç -é»˜è®¤å€¼ï¼šfalse</span><br>  <span class="hljs-comment">--stdin-filename String        æŒ‡å®šSTDINçš„æ–‡ä»¶å</span><br><br>Handling warnings:<br>  <span class="hljs-comment">--quiet                        ä»…æŠ¥å‘Šé”™è¯¯-é»˜è®¤å€¼ï¼šfalse</span><br>  <span class="hljs-comment">--max-warnings Int             è§¦å‘é€€å‡ºä»£ç çš„è­¦å‘Šæ¬¡æ•°-é»˜è®¤å€¼ï¼š-1</span><br><br>Output:<br>  -o, <span class="hljs-comment">--output-file path::String  æŒ‡å®šè¦å°†æŠ¥å‘Šå†™å…¥çš„æ–‡ä»¶</span><br>  -f, <span class="hljs-comment">--format String            ä½¿ç”¨ç‰¹å®šçš„è¾“å‡ºæ ¼å¼-é»˜è®¤å€¼ï¼šstylish</span><br>  <span class="hljs-comment">--color, --no-color            å¼ºåˆ¶å¯ç”¨/ç¦ç”¨é¢œè‰²</span><br><br>Inline configuration comments:<br>  <span class="hljs-comment">--no-inline-config             é˜²æ­¢æ³¨é‡Šæ›´æ”¹é…ç½®æˆ–è§„åˆ™</span><br>  <span class="hljs-comment">--report-unused-disable-directives  æ·»åŠ é”™è¯¯ä¿¡æ¯ç»™æœªè¢«ä½¿ç”¨çš„eslint-disableæŒ‡ä»¤</span><br><br>Caching:<br>  <span class="hljs-comment">--cache                        ä»…æ£€æŸ¥å·²æ›´æ”¹çš„æ–‡ä»¶-é»˜è®¤å€¼ï¼šfalse</span><br>  <span class="hljs-comment">--cache-file path::String      ç¼“å­˜æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸æ¨èä½¿ç”¨ï¼šä½¿ç”¨--cache-location - é»˜è®¤å€¼ï¼š.eslintcache</span><br>  <span class="hljs-comment">--cache-location path::String  ç¼“å­˜æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„</span><br><br>Miscellaneous:<br>  <span class="hljs-comment">--init                         è¿è¡Œé…ç½®åˆå§‹åŒ–å‘å¯¼-é»˜è®¤å€¼ï¼šfalse</span><br>  <span class="hljs-comment">--debug                        è¾“å‡ºè°ƒè¯•ä¿¡æ¯</span><br>  -h, <span class="hljs-comment">--help                     æ˜¾ç¤ºhelpæ–‡æ¡£</span><br>  -v, <span class="hljs-comment">--version                  è¾“å‡ºç‰ˆæœ¬å·</span><br>  <span class="hljs-comment">--print-config path::String    æ‰“å°ç»™å®šæ–‡ä»¶çš„é…ç½®</span><br></code></pre></td></tr></table></figure><h2 id="2-2-å¸¸ç”¨å‚æ•°æ¦‚å¿µè¡¥å……">2.2 å¸¸ç”¨å‚æ•°æ¦‚å¿µè¡¥å……</h2><h3 id="2-2-1-è§£æå™¨">2.2.1 è§£æå™¨</h3><ol><li>esprimaï¼šeslintæ—©æœŸä½¿ç”¨çš„è§£æå™¨ï¼›</li><li>espreeï¼šåŸºäºesprema v1.2.2å¼€å‘ï¼Œç°åœ¨é»˜è®¤çš„è§£æå™¨ï¼›</li><li>@babel/eslint-parserï¼šjsé«˜çº§è¯­æ³•çš„è§£æå™¨ï¼›</li><li>@typescript-eslint/parserï¼štsçš„è§£æå™¨ï¼›</li></ol><h3 id="2-2-2-è§„åˆ™é…ç½®">2.2.2 è§„åˆ™é…ç½®</h3><ol><li>â€œoffâ€ æˆ– 0ï¼š å…³é—­è§„åˆ™ï¼›</li><li>â€œwarnâ€ æˆ– 1ï¼š å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)ï¼›</li><li>â€œerrorâ€ æˆ– 2ï¼š å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)ï¼›</li></ol><h3 id="2-2-3-extendsæ”¯æŒçš„é…ç½®ç±»å‹">2.2.3 extendsæ”¯æŒçš„é…ç½®ç±»å‹</h3><ol><li>eslintå¼€å¤´ï¼šESLintå®˜æ–¹æ‰©å±•ï¼›</li><li>pluginå¼€å¤´ï¼šæ’ä»¶ç±»å‹æ‰©å±•ï¼›å’Œconfigsé‡Œé¢é…ç½®çš„ä¸€ä¸€å¯¹åº”ï¼›</li><li>eslint-configå¼€å¤´ï¼šnpmåŒ…ï¼Œä½¿ç”¨æ—¶å¯çœç•¥å‰ç¼€eslint-config-ï¼›</li><li>æ–‡ä»¶è·¯å¾„ï¼›</li></ol><p><strong>å¸¸ç”¨æ‰©å±•ï¼š</strong></p><ol><li>eslint:recommendedï¼šESLintå†…ç½®çš„æ¨èè§„åˆ™ï¼Œå³ ESLint Rules åˆ—è¡¨ä¸­æ‰“äº†é’©çš„é‚£äº›è§„åˆ™ï¼›</li><li>eslint:allï¼šESLint å†…ç½®çš„æ‰€æœ‰è§„åˆ™ï¼›</li><li>eslint-config-standardï¼šstandard çš„ JS è§„èŒƒï¼›</li><li>eslint-config-prettierï¼šå…³é—­å’Œ ESLint ä¸­ä»¥åŠå…¶ä»–æ‰©å±•ä¸­æœ‰å†²çªçš„è§„åˆ™ï¼›</li><li>eslint-plugin-vueï¼švueå®˜æ–¹eslinté…ç½®æ’ä»¶ï¼Œé…ç½®å…±äº«æœ‰ï¼š<ol><li>plugin:vue/baseï¼šåŸºç¡€ï¼›</li><li>plugin:vue/essentialï¼šå¿…ä¸å¯å°‘çš„ï¼›</li><li>plugin:vue/recommendedï¼šæ¨èçš„ï¼›</li><li>plugin:vue/strongly-recommendedï¼šå¼ºçƒˆæ¨èï¼›</li></ol></li></ol><h2 id="2-3-é…ç½®ä¸éœ€è¦lintçš„æ–‡ä»¶æˆ–ç›®å½•">2.3 é…ç½®ä¸éœ€è¦lintçš„æ–‡ä»¶æˆ–ç›®å½•</h2><p>å¯ä»¥åœ¨.eslintignoreä¸­æŒ‡å®šå¯¹åº”çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä»¥è¾¾åˆ°eslintæ‰§è¡Œæ—¶ä¸æ£€æµ‹ï¼ˆeslintæœ¬èº«æ˜¯å¿½ç•¥node_moduleså’Œbower_componentsçš„ï¼‰ï¼›å¦‚ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua">lua<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç mock<br>build/*.js<br><span class="hljs-built_in">config</span>/*.js<br></code></pre></td></tr></table></figure><h2 id="ESLinté…ç½®å…±äº«">ESLinté…ç½®å…±äº«</h2><p>æ¯ä¸ªå›¢é˜Ÿçš„è§„èŒƒæ˜¯ä¸ä¸€æ ·çš„ï¼Œå…¬å¸å†…éƒ¨å¸Œæœ›æ¯ä¸ªäº§å“çº¿çš„è§„èŒƒä¸€è‡´ï¼Œé‚£ä¹ˆå¯ä»¥å°†é…ç½®åˆ†äº«å‡ºæ¥æ‰“æˆnpmåŒ…ï¼Œä»¥ä¾›ä¸åŒå›¢é˜Ÿç›´æ¥é…ç½®ä½¿ç”¨ï¼›</p><p><strong>å¦‚ä½•å†™ä¸€ä¸ªé…ç½®å…±äº«ï¼Ÿ</strong></p><ol><li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåç§°ä¸ºeslint-config-myconfigï¼›</li><li>æ‰§è¡Œ<code>yarn init -y</code>ï¼›ï¼ˆæ¨¡å—åå¿…é¡»ä»¥eslint-config-å¼€å¤´ï¼Œé¡¹ç›®æ–‡ä»¶åç§°éšæ„ï¼‰ï¼›</li><li>åˆ›å»ºindex.jsï¼Œé‡Œé¢å†™å…¥éœ€è¦åˆ†äº«çš„.eslintrc.jsçš„é…ç½®ï¼›</li><li>ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Ffiles%2Fpackage.json%23peerdependencies">peerDependencies</a> å­—æ®µå£°æ˜ä¾èµ–çš„ ESLintï¼ˆæ˜ç¡®æ’ä»¶éœ€è¦ ESLint æ‰èƒ½æ­£å¸¸è¿è¡Œï¼‰ï¼›</li><li>å‘åŒ…å³å¯ï¼›</li></ol><p><strong>PS</strong>ï¼šå‘åŒ…å½¢å¼å†™æ’ä»¶éƒ½æ”¯æŒ@scope/eslint-xxx-xxxå½¢å¼ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Fcli%2Fv7%2Fusing-npm%2Fscope%2F">è¯¦æƒ…</a>ï¼›</p><p><strong>å¦‚ä½•ä½¿ç”¨ä¸Šé¢çš„åŒ…ï¼Ÿ</strong></p><ol><li>å®‰è£…åŒ…ï¼Œå¦‚ï¼š <code>yarn add eslint-config-myconfig -D</code>ï¼›</li><li>åœ¨é¡¹ç›®ä¸­çš„.eslintrcä¸­é…ç½®extendsé…ç½®ï¼Œå…·ä½“æŸ¥çœ‹åŸºæœ¬ä½¿ç”¨ï¼›</li></ol><h1>2 <a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fdeveloper-guide%2Fworking-with-plugins">ESLintæ’ä»¶</a></h1><h2 id="2-1-ESLintæ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ">2.1 ESLintæ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ’ä»¶å¯å‘ESLintæ·»åŠ å„ç§æ‰©å±•ï¼Œæ˜¯å¯å®šä¹‰è§„åˆ™ï¼Œç¯å¢ƒã€å¤„ç†å™¨æˆ–é…ç½®çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼›</p><p><strong>å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªESLintæ’ä»¶ï¼Ÿ</strong></p><p>ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fgenerator-eslint">generator-eslint</a>åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®çš„æ¨¡å—åéœ€ä»¥eslint-plugin-å¼€å¤´ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œåˆ™æ˜¯å»æ‰eslint-plugin-ï¼›</p><p>å¦‚npmåŒ…åï¼šeslint-plugin-mypluginï¼›</p><h3 id="2-1-1-å®šä¹‰è§„åˆ™">2.1.1 å®šä¹‰è§„åˆ™</h3><p>è§„åˆ™ï¼šeslintæ£€æµ‹çš„è§„åˆ™æ–¹å¼ï¼›<br>å®šä¹‰æ–¹å¼ï¼šè§„å®šå¿…é¡»æš´éœ²ä¸€ä¸ªruleså¯¹è±¡ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-comment">// è¿™æ˜¯æ’ä»¶çš„index.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br><span class="hljs-attr">rules</span>: &#123;<br><span class="hljs-string">&#x27;my-rule&#x27;</span>: &#123;<br><span class="hljs-comment">// è§„åˆ™çš„ä¸€äº›æ•°æ®é…ç½®</span><br><span class="hljs-attr">meta</span>: &#123;<br><span class="hljs-comment">// è§„åˆ™çš„ç±»å‹ &quot;problem&quot;ã€&quot;suggestion&quot; æˆ– &quot;layout&quot;</span><br><span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;suggestion&#x27;</span>,<br><span class="hljs-comment">// æ–‡æ¡£ä¿¡æ¯ è‡ªå®šä¹‰è§„åˆ™æˆ–æ’ä»¶ä¸­å¯çœç•¥ï¼Œå¯¹eslintæ ¸å¿ƒè§„åˆ™æ˜¯å¿…é¡»çš„</span><br><span class="hljs-attr">docs</span>: &#123;<br><span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;è§„åˆ™çš„ç®€çŸ­æè¿°ï¼Œåœ¨eslintè§„åˆ™é¦–é¡µå±•ç¤º&#x27;</span>,<br><span class="hljs-attr">category</span>: <span class="hljs-string">&#x27;è§„åˆ™åœ¨è§„åˆ™é¦–é¡µå¤„äºçš„åˆ†ç±»&#x27;</span>,<br><span class="hljs-attr">recommended</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// &quot;extends&quot;: &quot;eslint:recommended&quot;å±æ€§æ˜¯å¦å¯ç”¨è¯¥è§„åˆ™</span><br><span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;https://eslint.org/docs/rules/no-extra-semi&#x27;</span> <span class="hljs-comment">// è®¿é—®å®Œæ•´æ–‡æ¡£çš„ url</span><br>&#125;,<br><span class="hljs-comment">// æ‰“å¼€ä¿®å¤åŠŸèƒ½ï¼Œå¦‚æœæ²¡æœ‰ fixable å±æ€§ï¼Œå³ä½¿è§„åˆ™å®ç°äº† fix åŠŸèƒ½ï¼ŒESLint ä¹Ÿä¸ä¼šè¿›è¡Œä¿®å¤ã€‚å¦‚æœè§„åˆ™ä¸æ˜¯å¯ä¿®å¤çš„ï¼Œå°±çœç•¥ fixable å±æ€§</span><br><span class="hljs-attr">fixable</span>: <span class="hljs-string">&#x27;code&#x27;</span>,<br><span class="hljs-comment">// æŒ‡å®šè¯¥è§„åˆ™å¯¹åº”çš„é…ç½®ï¼Œç”¨äºéªŒè¯é…ç½®çš„é€‰é¡¹æ˜¯å¦æœ‰æ•ˆ</span><br><span class="hljs-attr">schema</span>: [<br>            &#123;<br>                <span class="hljs-string">&quot;enum&quot;</span>: [<span class="hljs-string">&quot;always&quot;</span>, <span class="hljs-string">&quot;never&quot;</span>]<br>            &#125;,<br>            &#123;<br>                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;object&quot;</span>,<br>                <span class="hljs-string">&quot;properties&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;exceptRange&quot;</span>: &#123;<br>                        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;boolean&quot;</span><br>                    &#125;<br>                &#125;,<br>                <span class="hljs-string">&quot;additionalProperties&quot;</span>: <span class="hljs-literal">false</span><br>            &#125;<br>        ]<br>&#125;,<br><span class="hljs-comment">// create è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„æ ¼å¼æ˜¯keyå¯¹åº”ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼›è¿™ä¸ªå¯¹è±¡åŒ…å«äº†ESLintåœ¨éå†JavaScriptä»£ç çš„ASTæ ‘(ESTreeå®šä¹‰çš„AST)æ—¶ï¼Œç”¨æ¥è®¿é—®èŠ‚ç‚¹çš„æ–¹æ³•ã€‚</span><br><span class="hljs-comment">// context å½“å‰æ‰§è¡Œeslintæ—¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†å„ç§ç›¸å…³æ•°æ®ï¼Œå¦‚eslintçš„é…ç½®ä¿¡æ¯ã€å½“å‰éå†èŠ‚ç‚¹çš„ä¿¡æ¯ã€æŠ¥å‘Šé—®é¢˜çš„æ–¹æ³•ç­‰ï¼›</span><br><span class="hljs-attr">create</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) &#123;<br><span class="hljs-keyword">return</span> &#123;<br><span class="hljs-comment">// callback functions</span><br><span class="hljs-title class_">ReturnStatement</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">node</span>) &#123;<br><span class="hljs-comment">// at a ReturnStatement node while going down</span><br>&#125;,<br><span class="hljs-comment">// at a function expression node while going up:</span><br><span class="hljs-string">&#x27;FunctionExpression:exit&#x27;</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkLastSegment</span> (node) &#123;<br><span class="hljs-comment">// report problem for function if last code path segment is reachable</span><br>&#125;,<br><span class="hljs-string">&#x27;ArrowFunctionExpression:exit&#x27;</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkLastSegment</span> (node) &#123;<br><span class="hljs-comment">// report problem for function if last code path segment is reachable</span><br>&#125;,<br><span class="hljs-attr">onCodePathStart</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">codePath, node</span>) &#123;<br><span class="hljs-comment">// at the start of analyzing a code path</span><br>&#125;,<br><span class="hljs-attr">onCodePathEnd</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">codePath, node</span>) &#123;<br><span class="hljs-comment">// at the end of analyzing a code path</span><br>&#125;<br>&#125;;<br>&#125;<br>&#125;<br>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-string">&quot;plugins&quot;</span>: [<span class="hljs-string">&quot;myplugin&quot;</span>],<br>  <span class="hljs-string">&quot;rules&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;myplugin/my-rule&quot;</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">&quot;never&quot;</span>, &#123; <span class="hljs-string">&quot;exceptRange&quot;</span>: <span class="hljs-literal">true</span> &#125;],<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-1-1-1-rulesçš„å‚æ•°">2.1.1.1 rulesçš„å‚æ•°</h4><p>rulesçš„metaå‚æ•°æ˜¯å¡«å†™ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œcreateå‚æ•°ä¸­çš„valueæ˜¯ç”¨äºæ‰§è¡Œæ£€æµ‹ASTè§„åˆ™çš„å›è°ƒæ–¹æ³•ï¼›</p><p><strong>createçš„contextå‚æ•°ï¼š</strong></p><ol><li>idï¼šåœ¨.eslintrcçš„rulesä¸­é…ç½®çš„è§„åˆ™åç§°ï¼Œå¦‚ä¸Šé¢ä½¿ç”¨æ–¹å¼ä¸­çš„<code>myplugin/my-rule</code>ï¼›</li><li>optionsï¼šåœ¨.eslintrcçš„rulesä¸­é…ç½®çš„è§„åˆ™å‚æ•°ï¼Œå¦‚ä¸Šé¢ä¾‹å­çš„ç»“æœæ˜¯ï¼š[â€œneverâ€, {exceptRange: true}]</li><li>reportï¼šç”¨äºå‘å¸ƒè­¦å‘Šæˆ–é”™è¯¯çš„ï¼Œåœ¨å›è°ƒä¸­åˆ¤æ–­è°ƒç”¨ï¼›<a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fdeveloper-guide%2Fworking-with-rules%23contextreport">å…·ä½“å‚æ•°</a>ï¼›</li></ol><p><strong>createçš„returnå¯¹è±¡ï¼š</strong></p><ul><li>å¦‚æœä¸€ä¸ª key æ˜¯ä¸ªèŠ‚ç‚¹ç±»å‹æˆ– selectorï¼Œåœ¨ <strong>å‘ä¸‹</strong> éå†æ ‘æ—¶ï¼ŒESLint è°ƒç”¨ <strong>visitor</strong> å‡½æ•°ï¼›</li><li>å¦‚æœä¸€ä¸ª key æ˜¯ä¸ªèŠ‚ç‚¹ç±»å‹æˆ– selectorï¼Œå¹¶å¸¦æœ‰ <strong>:exit</strong>ï¼Œåœ¨ <strong>å‘ä¸Š</strong> éå†æ ‘æ—¶ï¼ŒESLint è°ƒç”¨ <strong>visitor</strong> å‡½æ•°ï¼›</li><li>å¦‚æœä¸€ä¸ª key æ˜¯ä¸ªäº‹ä»¶åå­—ï¼ŒESLint ä¸º<a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fdeveloper-guide%2Fcode-path-analysis">ä»£ç è·¯å¾„åˆ†æ</a>è°ƒç”¨ <strong>handler</strong> å‡½æ•°ï¼›</li></ul><p><strong>èŠ‚ç‚¹ç±»å‹ï¼š</strong> ASTçš„èŠ‚ç‚¹ç±»å‹ï¼›</p><p>å…·ä½“å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åºå·</th><th>ç±»å‹åŸåç§°</th><th>ä¸­æ–‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>1</td><td>Program</td><td>ç¨‹åºä¸»ä½“</td><td>æ•´æ®µä»£ç çš„ä¸»ä½“</td></tr><tr><td>2</td><td>VariableDeclaration</td><td>å˜é‡å£°æ˜</td><td>å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œä¾‹å¦‚ var let const</td></tr><tr><td>3</td><td>FunctionDeclaration</td><td>å‡½æ•°å£°æ˜</td><td>å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ function</td></tr><tr><td>4</td><td>ExpressionStatement</td><td>è¡¨è¾¾å¼è¯­å¥</td><td>é€šå¸¸æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ console.log()</td></tr><tr><td>5</td><td>BlockStatement</td><td>å—è¯­å¥</td><td>åŒ…è£¹åœ¨ {} å—å†…çš„ä»£ç ï¼Œä¾‹å¦‚ if (condition){var a = 1;}</td></tr><tr><td>6</td><td>BreakStatement</td><td>ä¸­æ–­è¯­å¥</td><td>é€šå¸¸æŒ‡ break</td></tr><tr><td>7</td><td>ContinueStatement</td><td>æŒç»­è¯­å¥</td><td>é€šå¸¸æŒ‡ continue</td></tr><tr><td>8</td><td>ReturnStatement</td><td>è¿”å›è¯­å¥</td><td>é€šå¸¸æŒ‡ return</td></tr><tr><td>9</td><td>SwitchStatement</td><td>Switch è¯­å¥</td><td>é€šå¸¸æŒ‡ Switch Case è¯­å¥ä¸­çš„ Switch</td></tr><tr><td>10</td><td>IfStatement</td><td>If æ§åˆ¶æµè¯­å¥</td><td>æ§åˆ¶æµè¯­å¥ï¼Œé€šå¸¸æŒ‡ if(condition){}else{}</td></tr><tr><td>11</td><td>Identifier</td><td>æ ‡è¯†ç¬¦</td><td>æ ‡è¯†ï¼Œä¾‹å¦‚å£°æ˜å˜é‡æ—¶ var identi = 5 ä¸­çš„ identi</td></tr><tr><td>12</td><td>CallExpression</td><td>è°ƒç”¨è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ console.log()</td></tr><tr><td>13</td><td>BinaryExpression</td><td>äºŒè¿›åˆ¶è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡è¿ç®—ï¼Œä¾‹å¦‚ 1+2</td></tr><tr><td>14</td><td>MemberExpression</td><td>æˆå‘˜è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡è°ƒç”¨å¯¹è±¡çš„æˆå‘˜ï¼Œä¾‹å¦‚ console å¯¹è±¡çš„ log æˆå‘˜</td></tr><tr><td>15</td><td>ArrayExpression</td><td>æ•°ç»„è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡ä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚ [1, 3, 5]</td></tr><tr><td>16</td><td>NewExpression</td><td>New è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡ä½¿ç”¨ New å…³é”®è¯</td></tr><tr><td>17</td><td>AssignmentExpression</td><td>èµ‹å€¼è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡å°†å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ç»™å˜é‡</td></tr><tr><td>18</td><td>UpdateExpression</td><td>æ›´æ–°è¡¨è¾¾å¼</td><td>é€šå¸¸æŒ‡æ›´æ–°æˆå‘˜å€¼ï¼Œä¾‹å¦‚ i++</td></tr><tr><td>19</td><td>Literal</td><td>å­—é¢é‡</td><td>å­—é¢é‡</td></tr><tr><td>20</td><td>BooleanLiteral</td><td>å¸ƒå°”å‹å­—é¢é‡</td><td>å¸ƒå°”å€¼ï¼Œä¾‹å¦‚ true false</td></tr><tr><td>21</td><td>NumericLiteral</td><td>æ•°å­—å‹å­—é¢é‡</td><td>æ•°å­—ï¼Œä¾‹å¦‚ 100</td></tr><tr><td>22</td><td>StringLiteral</td><td>å­—ç¬¦å‹å­—é¢é‡</td><td>å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ vansenb</td></tr><tr><td>23</td><td>SwitchCase</td><td>Case è¯­å¥</td><td>é€šå¸¸æŒ‡ Switch è¯­å¥ä¸­çš„ Case</td></tr></tbody></table><p>å¯ä»¥é¡ºä¾¿çœ‹ä¸‹vueçš„èŠ‚ç‚¹ç±»å‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue-eslint-parser%2Fblob%2Fmaster%2Fsrc%2Fast%2Fnodes.ts">github.com/vuejs/vue-eâ€¦</a></p><p><strong>é€‰æ‹©å™¨ï¼ˆselectorï¼‰</strong> ï¼šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨äºåŒ¹é…æŠ½è±¡è¯­æ³•æ ‘(AST)ä¸­çš„èŠ‚ç‚¹ã€‚è¿™å¯¹äºæè¿°ä»£ç ä¸­çš„ç‰¹å®šè¯­æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚é€‰æ‹©å™¨ä¸é™äºå¯¹å•ä¸ªèŠ‚ç‚¹ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©å™¨&quot;VariableDeclarator &gt; Identifier&quot;å°†åŒ¹é…æ‰€æœ‰å…·æœ‰VariableDeclaratorçš„Identifierã€‚<a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fdeveloper-guide%2Fselectors">è¯¦æƒ…</a>ï¼›</p><p><strong>äº‹ä»¶</strong>ï¼šåˆ†æä»£ç è·¯å¾„æ‰€è§¦å‘çš„äº‹ä»¶ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) &#123;<br><span class="hljs-keyword">return</span> &#123;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™åœ¨åˆ†æä»£ç è·¯å¾„çš„å¼€å§‹æ—¶è¢«è°ƒç”¨ï¼Œæ­¤æ—¶ï¼Œä»£ç è·¯å¾„å¯¹è±¡åªæœ‰åˆå§‹æ®µã€‚</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePath</span>&#125; <span class="hljs-variable">codePath</span> - The new code path.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">ASTNode</span>&#125; <span class="hljs-variable">node</span> - The current node.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-string">&quot;onCodePathStart&quot;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">codePath, node</span>) &#123;<br><span class="hljs-comment">// do something with codePath</span><br>&#125;,<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™åœ¨åˆ†æä»£ç è·¯å¾„çš„æœ«å°¾è¢«è°ƒç”¨ã€‚æ­¤æ—¶ï¼Œä»£ç è·¯å¾„å¯¹è±¡å·²ç»å®Œæˆã€‚</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePath</span>&#125; <span class="hljs-variable">codePath</span> - The completed code path.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">ASTNode</span>&#125; <span class="hljs-variable">node</span> - The current node.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-string">&quot;onCodePathEnd&quot;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">codePath, node</span>) &#123;<br><span class="hljs-comment">// do something with codePath</span><br>&#125;,<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™åœ¨åˆ›å»ºä»£ç è·¯å¾„æ®µæ—¶è°ƒç”¨ã€‚</span><br><span class="hljs-comment"> * è¿™æ„å‘³ç€ä»£ç è·¯å¾„æ˜¯åˆ†å‰æˆ–åˆå¹¶çš„ã€‚</span><br><span class="hljs-comment"> * åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œè¯¥æ®µå…·æœ‰å…ˆå‰çš„æ®µï¼Œå¹¶ä¸”å·²è¢«åˆ¤æ–­ä¸ºå¯åˆ°è¾¾æˆ–ä¸å¯åˆ°è¾¾ã€‚</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePathSegment</span>&#125; <span class="hljs-variable">segment</span> - The new code path segment.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">ASTNode</span>&#125; <span class="hljs-variable">node</span> - The current node.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-string">&quot;onCodePathSegmentStart&quot;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">segment, node</span>) &#123;<br><span class="hljs-comment">// do something with segment</span><br>&#125;,<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™æ˜¯åœ¨ä»£ç è·¯å¾„æ®µç¦»å¼€æ—¶è°ƒç”¨çš„ã€‚</span><br><span class="hljs-comment"> * æ­¤æ—¶è¿˜æ²¡è¿›å…¥ä¸‹ä¸ªé˜¶æ®µã€‚</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePathSegment</span>&#125; <span class="hljs-variable">segment</span> - The leaved code path segment.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">ASTNode</span>&#125; <span class="hljs-variable">node</span> - The current node.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-string">&quot;onCodePathSegmentEnd&quot;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">segment, node</span>) &#123;<br><span class="hljs-comment">// do something with segment</span><br>&#125;,<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åœ¨ä»£ç è·¯å¾„æ®µè¢«å¾ªç¯æ—¶è°ƒç”¨çš„ã€‚</span><br><span class="hljs-comment"> * é€šå¸¸æ¯æ®µåœ¨åˆ›å»ºæ—¶éƒ½æœ‰ä»¥å‰çš„æ®µï¼Œ</span><br><span class="hljs-comment"> * Usually segments have each previous segments when created,</span><br><span class="hljs-comment"> * but when looped, a segment is added as a new previous segment into a</span><br><span class="hljs-comment"> * existing segment.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * This is called when a code path segment was looped.Usually segments have each previous segments when created,but when looped, a segment is added as a new previous segment into aexisting segment.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * å½“å¾ªç¯ä»£ç è·¯å¾„æ®µæ—¶è°ƒç”¨æ­¤å‡½æ•°ã€‚é€šå¸¸åˆ›å»ºæ®µæ—¶ï¼Œæ®µå…·æœ‰æ¯ä¸ªå…ˆå‰æ®µï¼Œä½†å¾ªç¯æ—¶ï¼Œæ®µä½œä¸ºæ–°çš„å…ˆå‰æ®µæ·»åŠ åˆ°ç°æœ‰æ®µä¸­ã€‚</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePathSegment</span>&#125; <span class="hljs-variable">fromSegment</span> - A code path segment of source.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">CodePathSegment</span>&#125; <span class="hljs-variable">toSegment</span> - A code path segment of destination.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">ASTNode</span>&#125; <span class="hljs-variable">node</span> - The current node.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> &#123;<span class="hljs-type">void</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-string">&quot;onCodePathSegmentLoop&quot;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">fromSegment, toSegment, node</span>) &#123;<br><span class="hljs-comment">// do something with segment</span><br>&#125;<br>&#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p><a href="https://link.juejin.cn?target=http%3A%2F%2Feslint.cn%2Fdocs%2Fdeveloper-guide%2Fcode-path-analysis">eslint.cn/docs/develoâ€¦</a></p><h3 id="2-1-2-å®šä¹‰ç¯å¢ƒ">2.1.2 å®šä¹‰ç¯å¢ƒ</h3><p>ç¯å¢ƒï¼šå°±æ˜¯æŸä¸€ç»„é…ç½®ï¼Œæ¯”å¦‚jqueryé‡Œé¢æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼›</p><p>æ’ä»¶çš„ç¯å¢ƒå¯å®šä¹‰ä»¥ä¸‹å¯¹è±¡ï¼š<br><strong>globalsï¼š</strong> åŒé…ç½®æ–‡ä»¶ä¸­çš„globalsä¸€æ ·ã€‚<br><strong>parserOptionsï¼š</strong> åŒé…ç½®æ–‡ä»¶ä¸­çš„parserOptionsä¸€æ ·ã€‚</p><p>å®šä¹‰æ–¹å¼ï¼šå¿…é¡»æš´éœ²environmentså¯¹è±¡ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-comment">// è¿™æ˜¯æ’ä»¶çš„index.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">environments</span>: &#123;<br>        <span class="hljs-attr">jquery</span>: &#123;<br>            <span class="hljs-attr">globals</span>: &#123;<br>                <span class="hljs-attr">$</span>: <span class="hljs-literal">false</span><br>            &#125;,<br>            <span class="hljs-attr">parserOptions</span>: &#123;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-string">&quot;plugins&quot;</span>: [<span class="hljs-string">&quot;myplugin&quot;</span>],<br>  <span class="hljs-string">&quot;env&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;myplugin/jquery&quot;</span>: <span class="hljs-literal">true</span>,<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-3-å®šä¹‰å¤„ç†å™¨">2.1.3 å®šä¹‰å¤„ç†å™¨</h3><p>eslintåªèƒ½æ£€æµ‹jsï¼Œå¦‚æœæ˜¯å…¶ä»–æ–‡ä»¶åˆ™éœ€è¦é…ç½®è‡ªå®šä¹‰å¤„ç†å™¨ï¼›<br>å®šä¹‰æ–¹å¼ï¼šå¿…é¡»æš´éœ²processorsï¼Œä»¥æ–‡ä»¶åç¼€ä¸ºkeyï¼ŒåŒ…å«ä»¥æ–‡ä»¶å†…å®¹å’Œæ–‡ä»¶åä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¦æ£€æµ‹çš„å­—ç¬¦ä¸²æ•°ç»„ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-comment">// è¿™æ˜¯æ’ä»¶çš„index.js</span><br><span class="hljs-comment">// processor-name</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br><span class="hljs-attr">processors</span>: &#123;<br><br><span class="hljs-comment">// ä¸åŒåç¼€å (.js, .jsx, .html, etc.)</span><br><span class="hljs-string">&quot;.ext&quot;</span>: &#123;<br><span class="hljs-comment">// è·å–æ–‡ä»¶çš„æ–‡æœ¬å’Œæ–‡ä»¶å</span><br><span class="hljs-attr">preprocess</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text, filename</span>) &#123;<br><br><span class="hljs-comment">// åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥å»æ‰ä»»ä½•éJSå†…å®¹ï¼Œå¹¶å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªå­—ç¬¦ä¸²ä»¥è¿›è¡Œlint</span><br><span class="hljs-keyword">return</span> [string];  <span class="hljs-comment">// return an array of strings to lint</span><br>&#125;,<br><br><span class="hljs-comment">// è·å–Message[][]å’Œæ–‡ä»¶å</span><br><span class="hljs-attr">postprocess</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">messages, filename</span>) &#123;<br><span class="hljs-comment">// `messages`å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«æ¶ˆæ¯å¯¹è±¡çš„äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªæ•°ç»„é¡¹çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†preprocess()æ–¹æ³•è¿”å›çš„æ–‡æœ¬ç›¸å…³çš„lintæ¶ˆæ¯æ•°ç»„</span><br><span class="hljs-comment">// postprocess æ–¹æ³•æ¥å—ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ŒåŒ…å«æ£€æµ‹æ¶ˆæ¯å’Œæ–‡ä»¶åã€‚è¾“å…¥æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹éƒ½å¯¹åº”ä» preprocess æ–¹æ³•è¿”å›çš„éƒ¨åˆ†ã€‚preprocess æ–¹æ³•å¿…é¡»è°ƒæ•´æ‰€æœ‰é”™è¯¯çš„ä½ç½®ï¼Œä½¿å…¶ä¸åŸå§‹çš„æœªå¤„ç†çš„ä»£ç ä¸­çš„ä½ç½®ç›¸å¯¹åº”ï¼Œå¹¶å°†å®ƒä»¬èšåˆæˆä¸€ä¸ªæ‰“å¹³çš„æ•°ç»„å¹¶è¿”å›ã€‚</span><br><span class="hljs-comment">// è¿”å›ä½ æƒ³ä¿ç•™çš„ä¸€ç»´æ•°ç»„</span><br><span class="hljs-keyword">return</span> messages[<span class="hljs-number">0</span>];<br>&#125;,<br><br><span class="hljs-attr">supportsAutofix</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// (optional, defaults to false)</span><br>&#125;<br>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript<br><br> ä»£ç è§£è¯»<br>å¤åˆ¶ä»£ç <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šç»Ÿä¸€</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-string">&quot;plugins&quot;</span>: [<span class="hljs-string">&quot;myplugin&quot;</span>],<br>  <span class="hljs-string">&quot;processor&quot;</span>: <span class="hljs-string">&quot;myplugin/processor-name&quot;</span><br>&#125;<br><span class="hljs-comment">// æ–¹å¼äºŒï¼šä¸ºç‰¹å®šç±»å‹çš„æ–‡ä»¶æŒ‡å®šå¤„ç†å™¨</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-string">&quot;plugins&quot;</span>: [<span class="hljs-string">&quot;myplugin&quot;</span>],<br>  <span class="hljs-string">&quot;overrides&quot;</span>: [<br>        &#123;<br>            <span class="hljs-string">&quot;files&quot;</span>: [<span class="hljs-string">&quot;*.md&quot;</span>],<br>            <span class="hljs-string">&quot;processor&quot;</span>: <span class="hljs-string">&quot;a-plugin/markdown&quot;</span><br>        &#125;,<br>        &#123;<span class="hljs-comment">// åœ¨ config éƒ¨åˆ†ä¸ºå‘½åä»£ç å—æŒ‡å®šå…¶ä»–é…ç½®</span><br>            <span class="hljs-string">&quot;files&quot;</span>: [<span class="hljs-string">&quot;**/*.md/*.js&quot;</span>],<br>            <span class="hljs-string">&quot;rules&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;strict&quot;</span>: <span class="hljs-string">&quot;off&quot;</span><br>            &#125;<br>        &#125;<br>    ]<br><br></code></pre></td></tr></table></figure><h1>å·¥ç¨‹åŒ–æœ€ä½³ä½¿ç”¨æ–¹æ¡ˆ</h1><p>é¡¹ç›®çš„å·¥ç¨‹åŒ–å¯ä»¥æå‡å¼€å‘æ•ˆç‡ï¼Œå‡å°‘ä¸€äº›å®¹æ˜“é¿å…çš„é”™è¯¯ï¼›ä¸‹é¢æ¨èä¸€äº›å’Œeslintæ­é…çš„å¥½ç”¨çš„å·¥å…·ï¼š</p><p>æœ‰æ—¶é—´æ‰¾ä¸ªé¡¹ç›®è¯•è¯•æ°´ğŸ˜ƒ</p><ol><li><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fhusky">husky</a>ï¼šcommitä¹‹å‰æ‰§è¡Œeslintå‘½ä»¤ï¼Œå¦‚æœeslintæ²¡è¿‡ï¼Œåˆ™commitå¤±è´¥ï¼›</p></li><li><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Flint-staged">lint-staged</a>ï¼šè·‘huskyçš„hooksåªé’ˆå¯¹æ‹¿åˆ°çš„stagedæ–‡ä»¶ï¼›</p></li><li><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fprettier.io%2F">prettier</a>ï¼šä¿®æ”¹ä»£ç é£æ ¼ï¼Œåªç®¡ä»£ç é£æ ¼ï¼Œä¸ç®¡ä¸€äº›ä½çº§é—®é¢˜ï¼›å¦‚æœæœ‰ä¸€äº›é…ç½®å’Œeslintå†²çªäº†ï¼Œå¯ä»¥é…åˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Feslint-plugin-prettier">eslint-plugin-prettier</a>å’Œeslintä¸€èµ·ä½¿ç”¨ï¼›</p></li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Typescript namespace</title>
    <link href="/2024/07/12/Typescript%20namespace/"/>
    <url>/2024/07/12/Typescript%20namespace/</url>
    
    <content type="html"><![CDATA[<h1>Typescript namespace</h1><p>namespace æ˜¯ä¸€ç§å°†ç›¸å…³ä»£ç ç»„ç»‡åœ¨ä¸€èµ·çš„æ–¹å¼ï¼Œä¸­æ–‡è¯‘ä¸ºâ€œå‘½åç©ºé—´â€ã€‚</p><p>å®ƒå‡ºç°åœ¨ ES æ¨¡å—è¯ç”Ÿä¹‹å‰ï¼Œä½œä¸º TypeScript è‡ªå·±çš„æ¨¡å—æ ¼å¼è€Œå‘æ˜çš„ã€‚ä½†æ˜¯ï¼Œè‡ªä»æœ‰äº† ES æ¨¡å—ï¼Œå®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ namespace äº†ã€‚</p><h2 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³•</h2><p>namespace ç”¨æ¥å»ºç«‹ä¸€ä¸ªå®¹å™¨ï¼Œå†…éƒ¨çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ï¼Œéƒ½å¿…é¡»åœ¨è¿™ä¸ªå®¹å™¨é‡Œé¢ä½¿ç”¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Utils</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">isString</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&quot;string&quot;</span>;<br>  &#125;<br><br>  <span class="hljs-comment">// æ­£ç¡®</span><br>  <span class="hljs-title function_">isString</span>(<span class="hljs-string">&quot;yes&quot;</span>);<br>&#125;<br><br><span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">isString</span>(<span class="hljs-string">&quot;no&quot;</span>); <span class="hljs-comment">// æŠ¥é”™</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‘½åç©ºé—´<code>Utils</code>é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°<code>isString()</code>ï¼Œå®ƒåªèƒ½åœ¨<code>Utils</code>é‡Œé¢ä½¿ç”¨ï¼Œå¦‚æœç”¨äºå¤–éƒ¨å°±ä¼šæŠ¥é”™ã€‚</p><p>å¦‚æœè¦åœ¨å‘½åç©ºé—´ä»¥å¤–ä½¿ç”¨å†…éƒ¨æˆå‘˜ï¼Œå°±å¿…é¡»ä¸ºè¯¥æˆå‘˜åŠ ä¸Š<code>export</code>å‰ç¼€ï¼Œè¡¨ç¤ºå¯¹å¤–è¾“å‡ºè¯¥æˆå‘˜ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Utility</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);<br>  &#125;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">error</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(msg);<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">Utility</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Call me&quot;</span>);<br><span class="hljs-title class_">Utility</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;maybe!&quot;</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œåªè¦åŠ ä¸Š<code>export</code>å‰ç¼€ï¼Œå°±å¯ä»¥åœ¨å‘½åç©ºé—´å¤–éƒ¨ä½¿ç”¨å†…éƒ¨æˆå‘˜ã€‚</p><p>ç¼–è¯‘å‡ºæ¥çš„jsä»£ç é•¿è¿™ä¸ªæ ·ğŸ¤”</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">var</span> <span class="hljs-title class_">Utility</span>;<br><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params">Utility</span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);<br>  &#125;<br>  <span class="hljs-title class_">Utility</span>.<span class="hljs-property">log</span> = log;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">error</span>(<span class="hljs-params">msg</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(msg);<br>  &#125;<br>  <span class="hljs-title class_">Utility</span>.<span class="hljs-property">error</span> = error;<br>&#125;)(<span class="hljs-title class_">Utility</span> || (<span class="hljs-title class_">Utility</span> = &#123;&#125;));<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‘½åç©ºé—´<code>Utility</code>å˜æˆäº† JavaScript çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå‡¡æ˜¯<code>export</code>çš„å†…éƒ¨æˆå‘˜ï¼Œéƒ½æˆäº†è¯¥å¯¹è±¡çš„å±æ€§ã€‚</p><p>è¿™å°±æ˜¯è¯´ï¼Œnamespace ä¼šå˜æˆä¸€ä¸ªå€¼ï¼Œä¿ç•™åœ¨ç¼–è¯‘åçš„ä»£ç ä¸­ã€‚è¿™ä¸€ç‚¹è¦å°å¿ƒï¼Œå®ƒä¸æ˜¯çº¯çš„ç±»å‹ä»£ç ã€‚</p><p>namespace å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨<code>import</code>å‘½ä»¤è¾“å…¥å¤–éƒ¨æˆå‘˜ï¼Œç›¸å½“äºä¸ºå¤–éƒ¨æˆå‘˜èµ·åˆ«åã€‚å½“å¤–éƒ¨æˆå‘˜çš„åå­—æ¯”è¾ƒé•¿æ—¶ï¼Œåˆ«åèƒ½å¤Ÿç®€åŒ–ä»£ç </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Utils</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">isString</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&quot;string&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span> &#123;<br>  <span class="hljs-keyword">import</span> isString = <span class="hljs-title class_">Utils</span>.<span class="hljs-property">isString</span>;<br><br>  <span class="hljs-title function_">isString</span>(<span class="hljs-string">&quot;yes&quot;</span>);<br>  <span class="hljs-comment">// ç­‰åŒäº</span><br>  <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">isString</span>(<span class="hljs-string">&quot;yes&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>import</code>å‘½ä»¤æŒ‡å®šåœ¨å‘½åç©ºé—´<code>App</code>é‡Œé¢ï¼Œå¤–éƒ¨æˆå‘˜<code>Utils.isString</code>çš„åˆ«åä¸º<code>isString</code>ã€‚</p><p><code>import</code>å‘½ä»¤ä¹Ÿå¯ä»¥åœ¨ namespace å¤–éƒ¨ï¼ŒæŒ‡å®šåˆ«å</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Shapes</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Polygons</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span> &#123;&#125;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> &#123;&#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">import</span> polygons = <span class="hljs-title class_">Shapes</span>.<span class="hljs-property">Polygons</span>;<br><br><span class="hljs-comment">// ç­‰åŒäº new Shapes.Polygons.Square()</span><br><span class="hljs-keyword">let</span> sq = <span class="hljs-keyword">new</span> polygons.<span class="hljs-title class_">Square</span>();<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>import</code>å‘½ä»¤åœ¨å‘½åç©ºé—´<code>Shapes</code>çš„å¤–éƒ¨ï¼ŒæŒ‡å®š<code> Shapes.Polygons</code>çš„åˆ«åä¸º<code>polygons</code>ã€‚</p><p>namespace å¯ä»¥åµŒå¥— ğŸ’â€â™‚ï¸</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Utils</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Messaging</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">Utils</span>.<span class="hljs-property">Messaging</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">// &quot;hello&quot;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‘½åç©ºé—´<code>Utils</code>å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªå‘½åç©ºé—´<code>Messaging</code>ã€‚æ³¨æ„ï¼Œå¦‚æœè¦åœ¨å¤–éƒ¨ä½¿ç”¨<code>Messaging</code>ï¼Œå¿…é¡»åœ¨å®ƒå‰é¢åŠ ä¸Š<code>export</code>å‘½ä»¤ã€‚</p><p>ä½¿ç”¨åµŒå¥—çš„å‘½åç©ºé—´ï¼Œå¿…é¡»ä»æœ€å¤–å±‚å¼€å§‹å¼•ç”¨ï¼Œæ¯”å¦‚<code>Utils.Messaging.log()</code>ã€‚</p><p>namespace ä¸ä»…å¯ä»¥åŒ…å«å®ä¹‰ä»£ç ï¼Œè¿˜å¯ä»¥åŒ…æ‹¬ç±»å‹ä»£ç ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">namespace</span> N &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInterface</span> &#123;&#125;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‘½ä»¤ç©ºé—´<code>N</code>ä¸ä»…å¯¹å¤–è¾“å‡ºç±»ï¼Œè¿˜å¯¹å¤–è¾“å‡ºä¸€ä¸ªæ¥å£ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨ä½œç±»å‹ã€‚</p><p>namespace ä¸æ¨¡å—çš„ä½œç”¨æ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯æŠŠç›¸å…³ä»£ç ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¯¹å¤–è¾“å‡ºæ¥å£ã€‚åŒºåˆ«æ˜¯ä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ª namespaceã€‚ç”±äºæ¨¡å—å¯ä»¥å–ä»£ namespaceï¼Œè€Œä¸”æ˜¯ JavaScript çš„æ ‡å‡†è¯­æ³•ï¼Œè¿˜ä¸éœ€è¦ç¼–è¯‘è½¬æ¢ï¼Œæ‰€ä»¥å»ºè®®æ€»æ˜¯ä½¿ç”¨æ¨¡å—ï¼Œæ›¿ä»£ namespaceã€‚</p><p>å¦‚æœ namespace ä»£ç æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œï¼Œé‚£ä¹ˆå¼•å…¥è¿™ä¸ªæ–‡ä»¶éœ€è¦ä½¿ç”¨ä¸‰æ–œæ çš„è¯­æ³•ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">/// &lt;reference path = &quot;SomeFileName.ts&quot; /&gt;</span><br></code></pre></td></tr></table></figure><p>PS: ä¸‰æ–œæ æŒ‡ä»¤æ˜¯ç‰¹æ®Šæ³¨é‡Šï¼Œä¸ºç¼–è¯‘å™¨æä¾›æœ‰å…³å¦‚ä½•å¤„ç†æ–‡ä»¶çš„è¯´æ˜ã€‚è¿™äº›æŒ‡ä»¤ä»¥ä¸‰ä¸ªè¿ç»­æ–œæ  (<code>///</code>) å¼€å¤´ï¼Œé€šå¸¸æ”¾ç½®åœ¨ TypeScript æ–‡ä»¶çš„é¡¶éƒ¨ï¼Œå¯¹è¿è¡Œæ—¶è¡Œä¸ºæ²¡æœ‰å½±å“ã€‚</p><p>ä¸‰æ–œæ æŒ‡ä»¤ç”¨äºå¼•ç”¨å¤–éƒ¨ä¾èµ–é¡¹ã€æŒ‡å®šæ¨¡å—åŠ è½½è¡Œä¸ºã€å¯ç”¨/ç¦ç”¨æŸäº›ç¼–è¯‘å™¨åŠŸèƒ½ç­‰ç­‰ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æµè§ˆå™¨æ’ä»¶å…¥é—¨</title>
    <link href="/2024/06/02/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6%E5%85%A5%E9%97%A8/"/>
    <url>/2024/06/02/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1>æµè§ˆå™¨æ’ä»¶</h1><p>å¼€æºä¹‹å¤æœ‰ç‚¹è¢«å¯¼å¸ˆpuaåˆ°äº† æ‰€ä»¥å‡†å¤‡æ¢äº†ä¸ªé¡¹ç›® è¿˜æ˜¯ä¸€ä¸ªç¤¾åŒºçš„é¡¹ç›®</p><p>è¿™ä¸ªé¡¹ç›®ä¸»è¦æ˜¯å¯¹æµè§ˆå™¨æ’ä»¶ä¼˜åŒ–</p><h2 id="æµè§ˆå™¨æ’ä»¶åŸºæœ¬é¡¹ç›®ç»“æ„">æµè§ˆå™¨æ’ä»¶åŸºæœ¬é¡¹ç›®ç»“æ„</h2><p>å…ˆçœ‹çœ‹åŸºæœ¬ç»“æ„å§  åŸºæœ¬ä¸Šéƒ½ä¼šæœ‰ä¸€ä¸ª<code>mainfest.json</code> è·Ÿ<code>package.json</code>åŸºæœ¬ä¸Šæˆ‘æ„Ÿè§‰æ˜¯ä¸€æ ·çš„ä½œç”¨</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// æ’ä»¶åç§°</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Hello Extensions&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// æ’ä»¶çš„æè¿°</span><br>    <span class="hljs-attr">&quot;description&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Base Level Extension&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// æ’ä»¶çš„ç‰ˆæœ¬</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// é…ç½®æ’ä»¶ç¨‹åºçš„ç‰ˆæœ¬å·ï¼Œä¸»æµç‰ˆæœ¬æ˜¯2ï¼Œæœ€æ–°æ˜¯3</span><br>    <span class="hljs-attr">&quot;manifest_version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»å¸¸ä¼šç‚¹å‡»å³ä¸Šè§’æ’ä»¶å›¾æ ‡æ—¶å¼¹å‡ºä¸€ä¸ªå°çª—å£çš„é¡µé¢ï¼Œç„¦ç‚¹ç¦»å¼€æ—¶å°±å…³é—­äº†ï¼Œä¸€èˆ¬åšä¸€äº›ä¸´æ—¶æ€§çš„äº¤äº’æ“ä½œï¼›åœ¨é…ç½®æ–‡ä»¶ä¸­æ–°å¢<code>browser_action</code>å­—æ®µï¼Œé…ç½®popupå¼¹æ¡†ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Hello Extensions&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Base Level Extension&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;manifest_version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// æ–°å¢popupå¼¹æ¡†</span><br>    <span class="hljs-attr">&quot;browser_action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;default_popup&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;popup.html&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;default_icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;popup.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºæˆ‘ä»¬çš„å¼¹æ¡†é¡µé¢panel.htmlï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">htmlå¤åˆ¶ä»£ç <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Extensions<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç‚¹å‡»å›¾æ ‡åï¼Œæ’ä»¶æ˜¾ç¤ºpanel.html</p><h2 id="åå°background">åå°background</h2><p>ä»¬ä¹Ÿå‘ç°äº†ï¼Œpopupé¡µé¢åªèƒ½åšä¸´æ—¶æ€§çš„äº¤äº’æ“ä½œï¼Œç”¨å®Œå°±å…³äº†ï¼Œä¸èƒ½å­˜å‚¨ä¿¡æ¯æˆ–è€…å’Œå…¶ä»–æ ‡ç­¾é¡µè¿›è¡Œäº¤äº’ç­‰ç­‰ï¼›è¿™æ—¶å°±éœ€è¦ç”¨åˆ°backgroundï¼ˆåå°ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é©»çš„é¡µé¢ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ’ä»¶ä¸­æ‰€æœ‰ç±»å‹é¡µé¢ä¸­æœ€é•¿çš„ï¼›å®ƒéšç€æµè§ˆå™¨çš„æ‰“å¼€è€Œæ‰“å¼€ï¼Œéšç€æµè§ˆå™¨çš„å…³é—­è€Œå…³é—­ï¼Œæ‰€ä»¥é€šå¸¸æŠŠéœ€è¦ä¸€ç›´è¿è¡Œçš„ã€å¯åŠ¨å°±è¿è¡Œçš„ã€å…¨å±€çš„ä»£ç æ”¾åœ¨backgroundé‡Œé¢ã€‚</p><p>åœ¨<code>mainfest.json</code>æ·»åŠ è·¯å¾„</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;background&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;script&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;background.js&quot;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;persistent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·åŸºæœ¬ä¸Šç»“æ„å°±å·®ä¸å¤šäº†</p><h2 id="å®ç°æŸ¥çœ‹ç»„ä»¶å±æ€§å’ŒæŸ¥çœ‹çŠ¶æ€ç®¡ç†çŠ¶æ€çš„åŠŸèƒ½">å®ç°æŸ¥çœ‹ç»„ä»¶å±æ€§å’ŒæŸ¥çœ‹çŠ¶æ€ç®¡ç†çŠ¶æ€çš„åŠŸèƒ½</h2><p>è¿™ä¸ªå°±æ˜¯å¼€æºä¹‹å¤çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å–½</p><p>æ„Ÿè§‰å°±æ˜¯Reactçš„é‚£ä¸ªæ’ä»¶çš„åŠŸèƒ½</p><p>æˆ‘å»çœ‹äº†çœ‹reactçš„æºç </p><p>æ„Ÿè§‰æ“ä½œå°±æ˜¯éœ€è¦å…ˆè·å–åˆ°ç»„ä»¶çš„çŠ¶æ€ ç„¶åçœ‹çŠ¶æ€ç®¡ç†å™¨çš„çŠ¶æ€</p><p>ç„¶åç›‘å¬åå°ç®¡ç†å™¨çš„æ¶ˆæ¯ ç„¶ååœ¨æ˜¾ç¤ºçš„htmlä¸­åŠ ä¸Šæ˜¾ç¤ºçš„éƒ¨åˆ†</p><p>åœ¨content-Scriptä¸­æ–°å¢â¼€ä¸ªstateManager.tsâ½‚ä»¶ ä»¥ä¾¿æ•è·å’Œå‘é€ç»„ä»¶çŠ¶æ€å’ŒçŠ¶æ€ç®¡ç†å™¨ä¿¡æ¯</p><p>å“¦è¿™é‡Œè¡¥å……ä¸€ä¸‹ ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªcontent-scriptæ–‡ä»¶å¤¹</p><p>å®˜æ–¹å®šä¹‰æ˜¯</p><p>content-scriptsï¼ˆå†…å®¹è„šæœ¬ï¼‰æ˜¯åœ¨ç½‘é¡µä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚é€šè¿‡ä½¿ç”¨æ ‡å‡†çš„æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)ï¼Œå®ƒèƒ½å¤Ÿè¯»å–æµè§ˆå™¨è®¿é—®çš„ç½‘é¡µçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œå¹¶å°†ä¿¡æ¯ä¼ é€’ç»™å…¶çˆ¶çº§æ’ä»¶ã€‚å†…å®¹è„šæœ¬ç›¸å¯¹äºbackgroundè¿˜æ˜¯æœ‰ä¸€äº›è®¿é—®APIä¸Šçš„é™åˆ¶ï¼Œå®ƒå¯ä»¥ç›´æ¥è®¿é—®ä»¥ä¸‹chromeçš„APIï¼š</p><ul><li>i18n</li><li>storage</li><li>runtime:<ul><li>connect</li><li>getManifest</li><li>getURL</li><li>id</li><li>onConnect</li><li>onMessage</li><li>sendMessage</li></ul></li></ul><p>æˆ‘çš„ç†è§£å°±æ˜¯ç›‘å¬ç›‘å¬ç›‘å¬ ä¼ ä¿¡å·ä¿¡å·ä¿¡å· ğŸ’¬</p><p>åŸºæœ¬ä¸Šç”¨çš„éƒ½æ˜¯chromeçš„<code>api</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">let</span> mockComponentState = &#123; <span class="hljs-attr">exampleComponent</span>: &#123; <span class="hljs-attr">state</span>: <span class="hljs-string">&#x27;active&#x27;</span> &#125; &#125;;<br><span class="hljs-keyword">let</span> mockStateManagerInfo = &#123; <span class="hljs-attr">exampleStateManager</span>: &#123; <span class="hljs-attr">state</span>: <span class="hljs-string">&#x27;initialized&#x27;</span> &#125; &#125;;<br> chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;updateComponentState&#x27;</span>, <span class="hljs-attr">state</span>: <br>mockComponentState &#125;);<br> chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;updateStateManagerInfo&#x27;</span>, <span class="hljs-attr">stateManager</span>: <br>mockStateManagerInfo &#125;);<br><span class="hljs-comment">//é’©å­åˆ°æ¡†æ¶ç‰¹å®šçš„ API è·å–çœŸå®çš„ç»„ä»¶çŠ¶æ€å’ŒçŠ¶æ€ç®¡ç†å™¨ä¿¡æ¯</span><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-keyword">const</span> originalSetState = <span class="hljs-title class_">YourFramework</span>.<span class="hljs-property">Component</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setState</span>;<br> <span class="hljs-title class_">YourFramework</span>.<span class="hljs-property">Component</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setState</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">newState, callback</span>) &#123;<br> chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;updateComponentState&#x27;</span>, <span class="hljs-attr">state</span>: <br><span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> &#125;);<br> <span class="hljs-keyword">return</span> originalSetState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br> &#125;;<br> &#125;)();<br> (<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br> <span class="hljs-keyword">const</span> originalDispatch = <span class="hljs-title class_">YourFramework</span>.<span class="hljs-property">store</span>.<span class="hljs-property">dispatch</span>;<br> <span class="hljs-title class_">YourFramework</span>.<span class="hljs-property">store</span>.<span class="hljs-property">dispatch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) &#123;<br> chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;updateStateManagerInfo&#x27;</span>, <span class="hljs-attr">stateManager</span>: <br><span class="hljs-title class_">YourFramework</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">getState</span>() &#125;);<br> <span class="hljs-keyword">return</span> originalDispatch.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br> &#125;;<br> &#125;)();<br></code></pre></td></tr></table></figure><p><code>chrome.runtime.sendMessage</code> æ˜¯ Chrome æ‰©å±•ç¨‹åºä¸­çš„ä¸€ç§æ–¹æ³•ï¼Œç”¨äºä»æ‰©å±•ç¨‹åºä¸­çš„ä¸€ä¸ªéƒ¨åˆ†å‘å¦ä¸€ä¸ªéƒ¨åˆ†å‘é€æ¶ˆæ¯ï¼Œä¾‹å¦‚ä»å†…å®¹è„šæœ¬å‘åå°è„šæœ¬å‘é€æ¶ˆæ¯ã€‚</p><h3 id="ç”¨æ³•">ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>(extensionId, message, options, responseCallback);<br></code></pre></td></tr></table></figure><ul><li><code>extensionId</code>ï¼ˆå¯é€‰ï¼‰ï¼šå­—ç¬¦ä¸²ç±»å‹ã€‚æŒ‡å®šæ¥æ”¶æ¶ˆæ¯çš„æ‰©å±•ç¨‹åºçš„IDã€‚å¦‚æœæ¶ˆæ¯æ˜¯å‘é€åˆ°æœ¬æ‰©å±•ç¨‹åºï¼Œå¯ä»¥çœç•¥æ­¤å‚æ•°ã€‚</li><li><code>message</code>ï¼šä»»æ„ç±»å‹ã€‚å‘é€çš„æ¶ˆæ¯å†…å®¹ï¼Œå¯ä»¥æ˜¯ä»»ä½•JSONåºåˆ—åŒ–ç±»å‹çš„æ•°æ®ã€‚</li><li><code>options</code>ï¼ˆå¯é€‰ï¼‰ï¼šå¯¹è±¡ç±»å‹ã€‚åŒ…å«é¢å¤–çš„é€‰é¡¹ï¼Œæ¯”å¦‚ <code>includeTlsChannelId</code>ï¼ˆå¸ƒå°”å€¼ï¼‰ã€‚</li><li><code>responseCallback</code>ï¼ˆå¯é€‰ï¼‰ï¼šå‡½æ•°ç±»å‹ã€‚ä¸€ä¸ªå‡½æ•°ï¼Œå½“æ”¶åˆ°å“åº”æ¶ˆæ¯æ—¶è°ƒç”¨ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•° <code>response</code>ï¼Œè¯¥å‚æ•°æ˜¯å“åº”çš„æ¶ˆæ¯ã€‚</li></ul><p>ç„¶ååœ¨content-Scriptçš„<code>index.ts</code>ä¸­å¼•å…¥ä½¿ç”¨</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"> <span class="hljs-comment">//ç›‘å¬æ¥è‡ª background çš„æ¶ˆæ¯</span><br>chrome.<span class="hljs-property">runtime</span>.<span class="hljs-property">onMessage</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">message, sender, sendResponse</span>) &#123;<br>   <span class="hljs-comment">//è¯¥æ–¹æ³•å¯ä»¥ç›‘å¬é¡µé¢ contentScript å’Œæ’ä»¶çš„æ¶ˆæ¯</span><br>  <span class="hljs-comment">// æ²¡æœ‰ tab ä¿¡æ¯è¯´æ˜æ¶ˆæ¯æ¥è‡ªæ’ä»¶</span><br>  <span class="hljs-keyword">if</span> (!sender.<span class="hljs-property">tab</span>  <span class="hljs-title function_">checkMessage</span>(message, <span class="hljs-title class_">DevToolBackground</span>)) &#123;<br>    <span class="hljs-title function_">changeSource</span>(message, <span class="hljs-title class_">DevToolContentScript</span>);<br>    <span class="hljs-comment">// ä¼ é€’æ¶ˆæ¯ç»™é¡µé¢</span><br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">postMessage</span>(message, <span class="hljs-string">&#x27;*&#x27;</span>);<br>  &#125;<br>  <span class="hljs-title function_">sendResponse</span>(&#123; <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;ok&#x27;</span> &#125;);<br> &#125;);<br></code></pre></td></tr></table></figure><p>ä»–è‡ªå·±å†™çš„æºç ä¸­æœ‰ä¸ªä»€ä¹ˆwindowå¯¹è±¡ä¸èƒ½ç›´æ¥é€šè¿‡ contentScript ä»£ç ä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡æ·»åŠ  js ä»£ç å¾€é¡µé¢  window æ³¨å…¥ hook è¿™ç©æ„è¿˜æ²¡çœ‹æ‡‚ ç­‰è¦æ˜¯é€‰ä¸Šæ…¢æ…¢æ¥å§</p>]]></content>
    
    
    <categories>
      
      <category>æµè§ˆå™¨æ’ä»¶</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>blog</title>
    <link href="/2024/05/12/blog/"/>
    <url>/2024/05/12/blog/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Typescript-declare</title>
    <link href="/2024/05/12/Typescript-declare/"/>
    <url>/2024/05/12/Typescript-declare/</url>
    
    <content type="html"><![CDATA[<h1>declare å…³é”®å­—</h1><p>æœ€è¿‘åœ¨åšé‚£ä¸ªå¼€æºä¹‹å¤ ç„¶åè¦ç”¨åˆ°è¿™ä¸ªdeclare è¿›è¡Œç±»å‹æ£€æŸ¥å°±æ­£å¥½å†™ä¸€ç¯‡å•¦ (å…¶å®è¿˜æœ‰å¾ˆå¤šä¸ä¼šçš„)ğŸ‘¼</p><p>æœ¬æ¥æƒ³å†™<code>JSX</code>çš„è‡ªå®šä¹‰æ¥å£æ¥ç€ ä½†æ˜¯æ²¡å‡†å¤‡çœ‹æ‡‚ æ‰€ä»¥å†™äº†è¿™ä¸ª</p><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>declare å…³é”®å­—ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒæŸä¸ªç±»å‹æ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥åœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨ğŸ›©ï¸</p><p>å®ƒçš„ä¸»è¦ä½œç”¨ï¼Œå°±æ˜¯è®©å½“å‰æ–‡ä»¶å¯ä»¥ä½¿ç”¨å…¶ä»–æ–‡ä»¶å£°æ˜çš„ç±»å‹ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè‡ªå·±çš„è„šæœ¬ä½¿ç”¨å¤–éƒ¨åº“å®šä¹‰çš„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå› ä¸ºä¸çŸ¥é“å¤–éƒ¨å‡½æ•°çš„ç±»å‹å®šä¹‰è€ŒæŠ¥é”™ï¼Œè¿™æ—¶å°±å¯ä»¥åœ¨è‡ªå·±çš„è„šæœ¬é‡Œé¢ä½¿ç”¨<code>declare</code>å…³é”®å­—ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å¤–éƒ¨å‡½æ•°çš„ç±»å‹ã€‚è¿™æ ·çš„è¯ï¼Œç¼–è¯‘å•ä¸ªè„šæœ¬å°±ä¸ä¼šå› ä¸ºä½¿ç”¨äº†å¤–éƒ¨ç±»å‹è€ŒæŠ¥é”™ã€‚</p><p>declare å…³é”®å­—å¯ä»¥æè¿°ä»¥ä¸‹ç±»å‹ã€‚</p><ul><li>å˜é‡ï¼ˆconstã€letã€var å‘½ä»¤å£°æ˜ï¼‰</li><li>type æˆ–è€… interface å‘½ä»¤å£°æ˜çš„ç±»å‹</li><li>class</li><li>enum</li><li>å‡½æ•°ï¼ˆfunctionï¼‰</li><li>æ¨¡å—ï¼ˆmoduleï¼‰</li><li>å‘½åç©ºé—´ï¼ˆnamespaceï¼‰</li></ul><p>declare å…³é”®å­—çš„é‡è¦ç‰¹ç‚¹æ˜¯ï¼Œå®ƒåªæ˜¯é€šçŸ¥ç¼–è¯‘å™¨æŸä¸ªç±»å‹æ˜¯å­˜åœ¨çš„ï¼Œä¸ç”¨ç»™å‡ºå…·ä½“å®ç°ã€‚æ¯”å¦‚ï¼Œåªæè¿°å‡½æ•°çš„ç±»å‹ï¼Œä¸ç»™å‡ºå‡½æ•°çš„å®ç°ï¼Œå¦‚æœä¸ä½¿ç”¨<code>declare</code>ï¼Œè¿™æ˜¯åšä¸åˆ°çš„ã€‚</p><p>declare åªèƒ½ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„å˜é‡å’Œæ•°æ®ç»“æ„ï¼Œä¸èƒ½ç”¨æ¥å£°æ˜æ–°çš„å˜é‡å’Œæ•°æ®ç»“æ„ã€‚å¦å¤–ï¼Œæ‰€æœ‰ declare è¯­å¥éƒ½ä¸ä¼šå‡ºç°åœ¨ç¼–è¯‘åçš„æ–‡ä»¶é‡Œé¢ã€‚</p><h2 id="declare-variable">declare variable</h2><p>declare å…³é”®å­—å¯ä»¥ç»™å‡ºå¤–éƒ¨å˜é‡çš„ç±»å‹æè¿°ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå½“å‰è„šæœ¬ä½¿ç”¨äº†å…¶ä»–è„šæœ¬å®šä¹‰çš„å…¨å±€å˜é‡<code>x</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript">x = <span class="hljs-number">123</span>; <span class="hljs-comment">// æŠ¥é”™</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡<code>x</code>æ˜¯å…¶ä»–è„šæœ¬å®šä¹‰çš„ï¼Œå½“å‰è„šæœ¬ä¸çŸ¥é“å®ƒçš„ç±»å‹ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p><p>è¿™æ—¶ä½¿ç”¨ declare å‘½ä»¤ç»™å‡ºå®ƒçš„ç±»å‹ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">x</span>:<span class="hljs-built_in">number</span>;x = <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>å¦‚æœ declare å…³é”®å­—æ²¡æœ‰ç»™å‡ºå˜é‡çš„å…·ä½“ç±»å‹ï¼Œé‚£ä¹ˆå˜é‡ç±»å‹å°±æ˜¯<code>any</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">let</span> x;x = <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡<code>x</code>çš„ç±»å‹ä¸º<code>any</code>ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ˜¯è„šæœ¬ä½¿ç”¨æµè§ˆå™¨å…¨å±€å¯¹è±¡<code>document</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">var</span> <span class="hljs-variable language_">document</span>;<span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œdeclare å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå˜é‡<code>document</code>çš„ç±»å‹æ˜¯å¤–éƒ¨å®šä¹‰çš„ï¼ˆå…·ä½“å®šä¹‰åœ¨ TypeScript å†…ç½®æ–‡ä»¶<code>lib.d.ts</code>ï¼‰ã€‚</p><p>å¦‚æœ TypeScript æ²¡æœ‰æ‰¾åˆ°<code>document</code>çš„å¤–éƒ¨å®šä¹‰ï¼Œè¿™é‡Œå°±ä¼šå‡å®šå®ƒçš„ç±»å‹æ˜¯<code>any</code>ã€‚</p><p>æ³¨æ„ï¼Œdeclare å…³é”®å­—åªç”¨æ¥ç»™å‡ºç±»å‹æè¿°ï¼Œæ˜¯çº¯çš„ç±»å‹ä»£ç ï¼Œä¸å…è®¸è®¾ç½®å˜é‡çš„åˆå§‹å€¼ï¼Œå³ä¸èƒ½æ¶‰åŠå€¼ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æŠ¥é”™ </span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">x</span>:<span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œdeclare è®¾ç½®äº†å˜é‡çš„åˆå§‹å€¼ï¼Œç»“æœå°±æŠ¥é”™äº†ã€‚</p><h2 id="declare-function">declare function</h2><p>declare å…³é”®å­—å¯ä»¥ç»™å‡ºå¤–éƒ¨å‡½æ•°çš„ç±»å‹æè¿°ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params">name:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">void</span>;<br><span class="hljs-title function_">sayHello</span>(<span class="hljs-string">&#x27;zzx&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œdeclare å‘½ä»¤ç»™å‡ºäº†<code>sayHello()</code>çš„ç±»å‹æè¿°ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒã€‚</p><p>æ³¨æ„ï¼Œè¿™ç§å•ç‹¬çš„å‡½æ•°ç±»å‹å£°æ˜è¯­å¥ï¼Œåªèƒ½ç”¨äº<code>declare</code>å‘½ä»¤åé¢ã€‚ä¸€æ–¹é¢ï¼ŒTypeScript ä¸æ”¯æŒå•ç‹¬çš„å‡½æ•°ç±»å‹å£°æ˜è¯­å¥ï¼›å¦ä¸€æ–¹é¢ï¼Œdeclare å…³é”®å­—åé¢ä¹Ÿä¸èƒ½å¸¦æœ‰å‡½æ•°çš„å…·ä½“å®ç°ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æŠ¥é”™ </span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params">  name:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">void</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params">name</span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;ä½ å¥½ï¼Œ&#x27;</span> + name;&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå•ç‹¬å†™å‡½æ•°çš„ç±»å‹å£°æ˜å°±ä¼šæŠ¥é”™ã€‚</p><h2 id="declare-class">declare class</h2><p>declare ç»™å‡º class çš„æè¿°æè¿°å†™æ³•å¦‚ä¸‹ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name:<span class="hljs-built_in">string</span></span>);  <span class="hljs-title function_">eat</span>():<span class="hljs-built_in">void</span>;  <span class="hljs-title function_">sleep</span>():<span class="hljs-built_in">void</span>;&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„ä¾‹å­ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123;  <br>    <span class="hljs-comment">// é™æ€æˆå‘˜  </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">s0</span>():<span class="hljs-built_in">string</span>;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">s1</span>:<span class="hljs-built_in">string</span>;  <br>    <span class="hljs-comment">// å±æ€§  </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-attr">a</span>:<span class="hljs-built_in">number</span>;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-attr">b</span>:<span class="hljs-built_in">number</span>;  <br>    <span class="hljs-comment">// æ„é€ å‡½æ•°  </span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">arg:<span class="hljs-built_in">number</span></span>);  <br>    <span class="hljs-comment">// æ–¹æ³•  </span><br>    <span class="hljs-title function_">m</span>(<span class="hljs-attr">x</span>:<span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>:<span class="hljs-built_in">number</span>):<span class="hljs-built_in">number</span>;  <br>    <span class="hljs-comment">// å­˜å–å™¨  </span><br>    <span class="hljs-keyword">get</span> <span class="hljs-title function_">c</span>():<span class="hljs-built_in">number</span>;  <span class="hljs-keyword">set</span> <span class="hljs-title function_">c</span>(<span class="hljs-params">value:<span class="hljs-built_in">number</span></span>);  <br>    <span class="hljs-comment">// ç´¢å¼•ç­¾å  </span><br>    [<span class="hljs-attr">index</span>:<span class="hljs-built_in">string</span>]:<span class="hljs-built_in">any</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œdeclare åé¢ä¸èƒ½ç»™å‡º Class çš„å…·ä½“å®ç°æˆ–åˆå§‹å€¼ã€‚</p><h2 id="declare-moduleï¼Œdeclare-namespace">declare moduleï¼Œdeclare namespace</h2><p>å¦‚æœæƒ³æŠŠå˜é‡ã€å‡½æ•°ã€ç±»ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¯ä»¥å°† declare ä¸ module æˆ– namespace ä¸€èµ·ä½¿ç”¨ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">AnimalLib</span> &#123;  <br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;    <br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name:<span class="hljs-built_in">string</span></span>);   <br>    <span class="hljs-title function_">eat</span>():<span class="hljs-built_in">void</span>;    <br>    <span class="hljs-title function_">sleep</span>():<span class="hljs-built_in">void</span>;  &#125;  <br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Animals</span> = <span class="hljs-string">&#x27;Fish&#x27;</span> | <span class="hljs-string">&#x27;Dog&#x27;</span>;&#125;<br><span class="hljs-comment">// æˆ–è€…</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-title class_">AnimalLib</span> <br>&#123;  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> <br>&#123;    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name:<span class="hljs-built_in">string</span></span>);    <br>      <span class="hljs-title function_">eat</span>(): <span class="hljs-built_in">void</span>;    <br>      <span class="hljs-title function_">sleep</span>(): <span class="hljs-built_in">void</span>;  <br>    &#125;  <br> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Animals</span> = <span class="hljs-string">&#x27;Fish&#x27;</span> | <span class="hljs-string">&#x27;Dog&#x27;</span>;&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ —å­ä¸­ declare å…³é”®å­—ç»™å‡ºäº† module æˆ– namespace çš„ç±»å‹æè¿°ã€‚</p><p>declare module å’Œ declare namespace é‡Œé¢ï¼ŒåŠ ä¸åŠ  export å…³é”®å­—éƒ½å¯ä»¥ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Foo</span> &#123;  <span class="hljs-keyword">export</span> <span class="hljs-keyword">var</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">boolean</span>;&#125;<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;io&#x27;</span> &#123; <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">filename:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">string</span>;&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œnamespace å’Œ module é‡Œé¢ä½¿ç”¨äº† export å…³é”®å­—ã€‚</p><p>declare å…³é”®å­—çš„å¦ä¸€ä¸ªç”¨é€”ï¼Œæ˜¯ä¸ºå¤–éƒ¨æ¨¡å—æ·»åŠ å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œç»™å‡ºæ–°å¢éƒ¨åˆ†çš„ç±»å‹æè¿°ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Foo</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Bar</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;moduleA&#x27;</span>;<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;moduleA&#x27;</span> &#123;  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Foo</span> &#123;    <span class="hljs-attr">custom</span>: &#123;      <span class="hljs-attr">prop1</span>:<span class="hljs-built_in">string</span>;    &#125;  &#125;&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œä»æ¨¡å—<code>moduleA</code>å¯¼å…¥äº†<code>Foo</code>æ¥å£ï¼Œå°†å…¶é‡å‘½åä¸º<code>Bar</code>ï¼Œå¹¶ç”¨ declare å…³é”®å­—ä¸º<code>Bar</code>å¢åŠ ä¸€ä¸ªå±æ€§<code>custom</code>ã€‚</p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ä¸€ä¸ªé¡¹ç›®æœ‰å¤šä¸ªæ¨¡å—ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ¨¡å‹ä¸­ï¼Œå¯¹å¦ä¸€ä¸ªæ¨¡å—çš„æ¥å£è¿›è¡Œç±»å‹æ‰©å±•ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// a.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> A &#123;  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;&#125;<br><span class="hljs-comment">// b.ts</span><br><span class="hljs-keyword">import</span> &#123; A &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./a&#x27;</span>;<br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;./a&#x27;</span> &#123;  <br>    <span class="hljs-keyword">interface</span> A &#123;    <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;  &#125;&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">a</span>:A = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> &#125;;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œè„šæœ¬<code>a.ts</code>å®šä¹‰äº†ä¸€ä¸ªæ¥å£<code>A</code>ï¼Œè„šæœ¬<code>b.ts</code>ä¸ºè¿™ä¸ªæ¥å£æ·»åŠ äº†å±æ€§<code>y</code>ã€‚<code>declare module './a' &#123;&#125;</code>è¡¨ç¤ºå¯¹<code>a.ts</code>é‡Œé¢çš„æ¨¡å—ï¼Œè¿›è¡Œç±»å‹å£°æ˜ï¼Œè€ŒåŒå interface ä¼šè‡ªåŠ¨åˆå¹¶ï¼Œæ‰€ä»¥ç­‰åŒäºæ‰©å±•ç±»å‹ã€‚</p><p>ä½¿ç”¨è¿™ç§è¯­æ³•è¿›è¡Œæ¨¡å—çš„ç±»å‹æ‰©å±•æ—¶ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><p>ï¼ˆ1ï¼‰<code>declare module NAME</code>è¯­æ³•é‡Œé¢çš„æ¨¡å—å<code>NAME</code>ï¼Œè·Ÿ import å’Œ export çš„æ¨¡å—åè§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œä¸”å¿…é¡»è·Ÿå½“å‰æ–‡ä»¶åŠ è½½è¯¥æ¨¡å—çš„è¯­å¥å†™æ³•ï¼ˆä¸Šä¾‹<code>import &#123; A &#125; from './a'</code>ï¼‰ä¿æŒä¸€è‡´ã€‚</p><p>ï¼ˆ2ï¼‰ä¸èƒ½åˆ›å»ºæ–°çš„é¡¶å±‚ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªèƒ½å¯¹<code>a.ts</code>æ¨¡å—ä¸­å·²ç»å­˜åœ¨çš„ç±»å‹è¿›è¡Œæ‰©å±•ï¼Œä¸å…è®¸å¢åŠ æ–°çš„é¡¶å±‚ç±»å‹ï¼Œæ¯”å¦‚æ–°å®šä¹‰ä¸€ä¸ªæ¥å£<code>B</code>ã€‚</p><p>ï¼ˆ3ï¼‰ä¸èƒ½å¯¹é»˜è®¤çš„<code>default</code>æ¥å£è¿›è¡Œæ‰©å±•ï¼Œåªèƒ½å¯¹ export å‘½ä»¤è¾“å‡ºçš„å‘½åæ¥å£è¿›è¡Œæ‰©å……ã€‚è¿™æ˜¯å› ä¸ºåœ¨è¿›è¡Œç±»å‹æ‰©å±•æ—¶ï¼Œéœ€è¦ä¾èµ–è¾“å‡ºçš„æ¥å£åã€‚</p><p>æŸäº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ŒåŸå§‹ä½œè€…æ²¡æœ‰æä¾›æ¥å£ç±»å‹ï¼Œè¿™æ—¶å¯ä»¥åœ¨è‡ªå·±çš„è„šæœ¬é¡¶éƒ¨åŠ ä¸Šä¸‹é¢ä¸€è¡Œå‘½ä»¤ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&quot;æ¨¡å—å&quot;</span>;<br><span class="hljs-comment">// ä¾‹å­declare module &quot;hot-new-module&quot;;</span><br></code></pre></td></tr></table></figure><p>åŠ ä¸Šä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œå¤–éƒ¨æ¨¡å—å³ä½¿æ²¡æœ‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘ã€‚ä½†æ˜¯ï¼Œä»è¯¥æ¨¡å—è¾“å…¥çš„æ‰€æœ‰æ¥å£éƒ½å°†ä¸º<code>any</code>ç±»å‹ã€‚</p><p>declare module æè¿°çš„æ¨¡å—åå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;my-plugin-*&#x27;</span> &#123;  <br>    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PluginOptions</span> &#123;    <br>        <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>;    <br>        <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span>;  <br>    &#125;  <br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params">options: PluginOptions</span>): <span class="hljs-built_in">void</span>;  <br>    <span class="hljs-keyword">export</span> = initialize;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ¨¡å—å<code>my-plugin-*</code>è¡¨ç¤ºé€‚é…æ‰€æœ‰ä»¥<code>my-plugin-</code>å¼€å¤´çš„æ¨¡å—åï¼ˆæ¯”å¦‚<code>my-plugin-logger</code>ï¼‰ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Javascriptå¿è€…ç§˜ç±blog-1</title>
    <link href="/2024/04/21/Javascript%E5%BF%8D%E8%80%85%E7%A7%98%E7%B1%8Dblog-1/"/>
    <url>/2024/04/21/Javascript%E5%BF%8D%E8%80%85%E7%A7%98%E7%B1%8Dblog-1/</url>
    
    <content type="html"><![CDATA[<h1><code>Javascript</code>å¿è€…ç§˜ç±(ä¸€)</h1><p>æœ€è¿‘ä¸€ç›´éƒ½åœ¨çœ‹è¿™æœ¬ä¹¦ æ„Ÿè§‰ä¹‹å‰çš„jsåº•å­å¤ªå·®äº† çœ‹è¿™æœ¬ä¹¦å›é¡¾ä¸€ä¸‹å§(æ„Ÿè§‰æœ‰äº›æ¦‚å¿µéƒ½æ˜¯æ²¡å¬è¿‡çš„)ğŸŒµ</p><p>è¿™ç¯‡ä¸»è¦å†™ç¬¬å››ç« ç†è§£å‡½æ•°è°ƒç”¨çš„ä¸œè¥¿å§</p><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œéšå¼çš„å‡½æ•°å‚æ•° this å’Œ arguments ä¼šè¢«é™é»˜çš„ä¼ é€’ç»™å‡½æ•°,å¯ä»¥åƒå‡½æ•°ä½“å†…æ˜¾å¼å£°æ˜çš„å‚æ•°ä¸€æ ·ä½¿ç”¨</p><p><code>this</code> è¡¨ç¤ºè°ƒç”¨å‡½æ•°çš„ä¸Šä¸‹æ–‡å¯¹è±¡</p><p><code>arguments</code> è¡¨ç¤ºå‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¼ é€’çš„æ‰€æœ‰å‚æ•°ã€‚é€šè¿‡ arguments å‚æ•°å¯ä»¥è®¿é—® å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¼ é€’çš„å®é™…å‚æ•°ã€‚</p><p>å‡½æ•°è°ƒç”¨çš„æ–¹å¼ å¯¹ å‡½æ•°çš„éšå¼å‚æ•°æœ‰å¾ˆå¤§çš„å½±å“ğŸ¶</p><h3 id="1-éšå¼å‡½æ•°å‚æ•°">1.éšå¼å‡½æ•°å‚æ•°</h3><h4 id="argumentså‚æ•°"><code>arguments</code>å‚æ•°</h4><p>argumentså‚æ•°è¡¨ç¤ºä¼ å…¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°çš„é›†åˆã€‚</p><p>ä½¿ç”¨arguments.lengthå±æ€§æ¥è·å–ä¼ é€’ç»™å‡½æ•°çš„å®é™…å‚æ•°ä¸ªæ•°ã€‚</p><p>é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è®¿é—®åˆ°argumentså‚æ•°ä¸­çš„æ¯ä¸ªå‚æ•°å€¼ï¼Œå¦‚arguments[2]å°†è·å–ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</p><p>argumentsæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œä¸å¯ä»¥å¯¹argumentså¯¹è±¡ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ã€‚</p><p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œargumentså¯¹è±¡æ˜¯å‡½æ•°å‚æ•°çš„åˆ«åï¼Œä¿®æ”¹argumentså¯¹è±¡ä¼šå½±å“å¯¹åº”çš„å‡½æ•°å®å‚ï¼Œåä¹‹äº¦ç„¶ã€‚</p><p>argumentsä½œä¸ºå‚æ•°åˆ«åä½¿ç”¨æ—¶ï¼Œä¼šå½±å“ä»£ç å¯è¯»æ€§ï¼Œåº”è¯¥é¿å…ä½¿ç”¨å‚æ•°åˆ«åä¿®æ”¹å‚æ•°ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹é€šè¿‡argumentsä¿®æ”¹å‚æ•°æ˜¯ä¸èµ·ä½œç”¨çš„</p><h4 id="thiså‚æ•°"><code>this</code>å‚æ•°</h4><p>thisè¡¨ç¤ºå‡½æ•°ä¸Šä¸‹æ–‡ï¼Œå³ä¸å‡½æ•°è°ƒç”¨ç›¸å…³è”çš„å¯¹è±¡ã€‚(è¿˜æ˜¯æœ‰å¾ˆå¤šæŠ½è±¡å°é¢˜çš„ ç»å…¸thisæŒ‡å‘é—®é¢˜)ğŸ’¢</p><p>ä½†æ˜¯ï¼Œåœ¨<code>javascript</code>ä¸­ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºæ–¹æ³•è°ƒç”¨ä»…ä»…æ˜¯å‡½æ•°çš„ä¸€ç§è°ƒç”¨æ–¹å¼ã€‚thiså‚æ•°æ˜¯ç”±å‡½æ•°çš„<strong>å®šä¹‰æ–¹å¼</strong>å’Œ<strong>è°ƒç”¨æ–¹å¼</strong>å†³å®š</p><h3 id="2-å‡½æ•°è°ƒç”¨æ–¹å¼">2.å‡½æ•°è°ƒç”¨æ–¹å¼</h3><p>åŸºæœ¬ä¸Šæ˜¯4ç§</p><ol><li>ä½œä¸ºå‡½æ•°ç›´æ¥è¢«è°ƒç”¨ï¼›<code>myfunc()</code></li><li>ä½œä¸ºæ–¹æ³•å…³è”åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼›<code>obj.myfunc()</code></li><li>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼›<code>new Myfunc()</code></li><li>é€šè¿‡å‡½æ•°çš„applyå’Œcallæ–¹æ³•</li></ol><h4 id="ä½œä¸ºå‡½æ•°è¢«ç›´æ¥è°ƒç”¨">ä½œä¸ºå‡½æ•°è¢«ç›´æ¥è°ƒç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/*å‡½æ•°å®šä¹‰ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨*/</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">aa</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>&#125;<br><span class="hljs-title function_">aa</span>(); <span class="hljs-comment">//=&gt;object.window</span><br><span class="hljs-comment">/*å‡½æ•°è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨*/</span><br><span class="hljs-keyword">let</span> bb = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>&#125;<br><span class="hljs-title function_">bb</span>(); <span class="hljs-comment">//=&gt;object.window</span><br><span class="hljs-comment">/*ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨*/</span><br>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)&#125;)();<br><span class="hljs-comment">//=&gt;object.window</span><br><br></code></pre></td></tr></table></figure><h4 id="ä½œä¸ºå¯¹è±¡æ–¹æ³•è¢«è°ƒç”¨">ä½œä¸ºå¯¹è±¡æ–¹æ³•è¢«è°ƒç”¨</h4><p>å½“ä¸€ä¸ªå‡½æ•°è¢«èµ‹å€¼ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¸”é€šè¿‡å¯¹è±¡å±æ€§å¼•ç”¨çš„æ–¹å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¼šä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨ã€‚ ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨çš„å‡½æ•°thiså€¼ä¸å¯¹è±¡å…³è”ï¼Œé€šè¿‡thiså¯ä»¥è®¿é—®æ‰€å…³è”å¯¹è±¡çš„å…¶ä»–æ–¹æ³•å’Œå±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">aa</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">aa</span>()==<span class="hljs-variable language_">window</span>);<br><span class="hljs-comment">//=&gt;true</span><br><span class="hljs-keyword">var</span> obj1 = &#123;&#125;<br>obj1.<span class="hljs-property">aa</span> = aa;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-title function_">aa</span>()==obj1);<br><span class="hljs-comment">//=&gt;true</span><br><span class="hljs-keyword">var</span> obj2 = &#123;&#125;<br>obj2.<span class="hljs-property">bb</span> = aa;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj2.<span class="hljs-title function_">bb</span>()==obj2);<br><span class="hljs-comment">//=&gt;true</span><br></code></pre></td></tr></table></figure><h4 id="ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨">ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨</h4><p>åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰åŠ ä¸Šå…³é”®å­—newï¼Œå³ä¸ºæ„é€ å‡½æ•°è°ƒç”¨ã€‚</p><p>æ„é€ å‡½æ•°ç›®çš„æ˜¯ç”¨æ¥åˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡ä½œä¸ºæ„é€ å‡½æ•°çš„è¿”å›å€¼</p><p>ä½¿ç”¨å…³é”®å­—newè°ƒç”¨å‡½æ•°ä¼šè§¦å‘ä»¥ä¸‹å‡ ä¸ªåŠ¨ä½œï¼šğŸ”</p><ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼›</li><li>è¯¥å¯¹è±¡ä½œä¸ºthiså‚æ•°ä¼ é€’ç»™æ„é€ å‡½æ•°ï¼Œæˆä¸ºæ„é€ å‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼›</li><li>æ–°æ„é€ çš„å¯¹è±¡ä½œä¸ºnewè¿ç®—ç¬¦çš„è¿”å›å€¼ã€‚</li><li>å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡å°†ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œè€Œä¼ å…¥æ„é€ å‡½æ•°çš„thiså°†è¢«ä¸¢å¼ƒã€‚</li><li>å¦‚æœæ„å»ºå‡½æ•°è¿”å›çš„æ˜¯éå¯¹è±¡ç±»å‹ï¼Œåˆ™å¿½ç•¥è¿”å›å€¼ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ninja</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">//è¿™é‡Œçš„thisè¡¨ç¤ºNinjaå‡½æ•°çš„ä¸Šä¸‹æ–‡</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">skulk</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-comment">//è¿™é‡Œçš„thisè¡¨ç¤ºè¯¥åŒ¿åå‡½æ•°çš„ä¸Šä¸‹æ–‡</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//skulkä»¥å¯¹è±¡çš„æ–¹å¼è°ƒç”¨æ˜¯ï¼Œè¿”å›å€¼æ˜¯å…¶å…³è”çš„å¯¹è±¡</span><br><span class="hljs-keyword">var</span> ninja1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ninja</span>();<br><span class="hljs-keyword">var</span> ninja2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ninja</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ninja1.<span class="hljs-title function_">skulk</span>() == ninja1);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ninja2.<span class="hljs-title function_">skulk</span>() == ninja2);<br><span class="hljs-comment">// skulkå¤åˆ¶ç»™ä¸€ä¸ªå˜é‡åï¼Œç›´æ¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹skulkè¿”å›çš„å€¼æ˜¯window</span><br><span class="hljs-keyword">var</span> skulk = ninja2.<span class="hljs-property">skulk</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">skulk</span>() == <span class="hljs-variable language_">window</span>);<br><br></code></pre></td></tr></table></figure><h4 id="é€šè¿‡applyä¸callæ–¹æ³•è°ƒç”¨">é€šè¿‡applyä¸callæ–¹æ³•è°ƒç”¨</h4><p>javascriptæä¾›äº†å¯ä»¥æ˜¾ç¤ºæŒ‡å®šä»»ä½•å¯¹è±¡ä½œä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡çš„å‡½æ•°è°ƒç”¨æ–¹å¼ã€‚æ¯ä¸ªå‡½æ•°éƒ½å­˜åœ¨applyå’Œcallæ–¹æ³•ã€‚é€šè¿‡applyä¸callæ–¹æ³•æ¥è®¾ç½®å‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚</p><h5 id="callå‡½æ•°">callå‡½æ•°</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span>.<span class="hljs-title function_">call</span>(context, arg1, arg2, ...)<br></code></pre></td></tr></table></figure><p><code>context</code> æ˜¯æŒ‡å®šå‡½æ•°ä¸­çš„ <code>this</code> å…³é”®å­—æŒ‡å‘çš„å¯¹è±¡ï¼Œ<code>arg1</code>, <code>arg2</code>, â€¦ æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</p><h5 id="applyå‡½æ•°">applyå‡½æ•°</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span>.<span class="hljs-title function_">apply</span>(context, [argsArray])<br></code></pre></td></tr></table></figure><p><code>context</code> æ˜¯æŒ‡å®šå‡½æ•°ä¸­çš„ <code>this</code> å…³é”®å­—æŒ‡å‘çš„å¯¹è±¡ï¼Œ<code>argsArray</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«è¦ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">juggle</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">var</span> result = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>; n&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; n++)&#123;<br>        result+=<span class="hljs-variable language_">arguments</span>[n]<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = result;<br>&#125;<br><br><span class="hljs-keyword">var</span> ninja1 = &#123;&#125;;<br><span class="hljs-keyword">var</span> ninja2 = &#123;&#125;;<br><br>juggle.<span class="hljs-title function_">apply</span>(ninja1, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>])<br>juggle.<span class="hljs-title function_">call</span>(ninja2, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>, <span class="hljs-number">6</span>)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ninja1.<span class="hljs-property">result</span> == <span class="hljs-number">15</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ninja2.<span class="hljs-property">result</span> == <span class="hljs-number">21</span>) <br></code></pre></td></tr></table></figure><p>applyå’ŒcallåŠŸèƒ½ç±»ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºå¦‚ä½•ä¼ é€’å‚æ•°ã€‚applyå’Œcallç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œapplyç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«å‚æ•°å€¼çš„æ•°ç»„ã€‚callå¯ä»¥ä¼ å…¥ä»»æ„æ•°é‡å‚æ•°ï¼Œä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚</p><h4 id="æ€»ç»“">æ€»ç»“!!!</h4><h5 id="æ€»ç»“å››ç§å‡½æ•°çš„è°ƒç”¨æ–¹å¼å¯¹thiså–å€¼çš„å½±å“">æ€»ç»“å››ç§å‡½æ•°çš„è°ƒç”¨æ–¹å¼å¯¹thiså–å€¼çš„å½±å“</h5><ul><li>å¦‚æœä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘å…¨å±€windowå¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefinedã€‚</li><li>ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼Œthisé€šå¸¸æŒ‡å‘è°ƒç”¨çš„å¯¹è±¡</li><li>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li><li>é€šè¿‡callæˆ–applyè°ƒç”¨ï¼ŒthisæŒ‡å‘callæˆ–applyçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</li></ul><h3 id="3-thisæŒ‡å‘é—®é¢˜-å¤©å¤©è¢«æ‹·æ‰“ç‰ˆ">3.<code>this</code>æŒ‡å‘é—®é¢˜!  (å¤©å¤©è¢«æ‹·æ‰“ç‰ˆ)</h3><h4 id="åœ¨å…¨å±€ä½œç”¨åŸŸ">åœ¨å…¨å±€ä½œç”¨åŸŸ</h4><p><code>this-&gt;window</code></p><h4 id="åœ¨æ™®é€šå‡½æ•°ä¸­">åœ¨æ™®é€šå‡½æ•°ä¸­</h4><p>è°è°ƒç”¨æˆ‘ thisæŒ‡å‘è°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;<br>            <span class="hljs-attr">fn1</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <br>            &#125;,<br>            <span class="hljs-attr">fn2</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                <span class="hljs-title function_">fn3</span>() <br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn3</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <br>        &#125;<br>        <span class="hljs-title function_">fn3</span>();<span class="hljs-comment">//this-&gt;window</span><br>        obj.<span class="hljs-title function_">fn1</span>();<span class="hljs-comment">//this-&gt;obj</span><br>        obj.<span class="hljs-title function_">fn2</span>();<span class="hljs-comment">//this-&gt;window</span><br><br></code></pre></td></tr></table></figure><h4 id="ç®­å¤´å‡½æ•°çš„this">ç®­å¤´å‡½æ•°çš„this</h4><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œç®­å¤´å‡½æ•°çš„thiså°±æ˜¯ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„thisï¼Œå› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisæ‰€ä»¥ä¸èƒ½ç”¨åšæ„é€ å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>); <br>   <span class="hljs-keyword">var</span> o=&#123;<br>       <span class="hljs-attr">a</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>           <span class="hljs-keyword">var</span> arr=[<span class="hljs-number">1</span>];<br>         <span class="hljs-comment">//å°±æ˜¯å®šä¹‰æ‰€åœ¨å¯¹è±¡ä¸­çš„this</span><br>         <span class="hljs-comment">//è¿™é‡Œçš„thisâ€”&gt;o</span><br>           arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<br>             <span class="hljs-comment">//æ‰€ä»¥this -&gt; o</span><br>               <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>           &#125;)<br>       &#125;,<br>     <span class="hljs-comment">//è¿™é‡Œçš„thisæŒ‡å‘window oæ˜¯å®šä¹‰åœ¨windowä¸­çš„å¯¹è±¡</span><br>       <span class="hljs-attr">b</span>:<span class="hljs-function">()=&gt;</span>&#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>       &#125;,<br>       <span class="hljs-attr">c</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>       &#125;<br>   &#125;<br>   div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>,<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>&#123;<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<span class="hljs-comment">//this-&gt;window è¿™é‡Œçš„thiså°±æ˜¯å®šä¹‰ä¸Šæ–‡windowç¯å¢ƒä¸­çš„this</span><br>   &#125;);<br>   o.<span class="hljs-title function_">a</span>(); <span class="hljs-comment">//this-&gt;o</span><br>   o.<span class="hljs-title function_">b</span>();<span class="hljs-comment">//this-&gt;window</span><br>   o.<span class="hljs-title function_">c</span>();<span class="hljs-comment">//this-&gt;o æ™®é€šå‡½æ•°è°è°ƒç”¨å°±æŒ‡å‘è°</span><br><br></code></pre></td></tr></table></figure><h4 id="äº‹ä»¶ç»‘å®šä¸­çš„this">äº‹ä»¶ç»‘å®šä¸­çš„this</h4><p>åŸºæœ¬ä¸Šéƒ½æ˜¯æŒ‡å‘this-&gt;äº‹ä»¶æºçš„ğŸ˜†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>); <br>    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">//this-&gt;div</span><br>    &#125;);<br>    <br>    div.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">//this-&gt;div</span><br>    &#125;<br><br></code></pre></td></tr></table></figure><h4 id="å®šæ—¶å™¨çš„this">å®šæ—¶å™¨çš„this</h4><p>å®šæ—¶å™¨ä¸­é‡‡ç”¨å›è°ƒå‡½æ•°ä½œä¸ºå¤„ç†å‡½æ•° å›è°ƒå‡½æ•°çš„this-&gt;window</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">//this-&gt;window </span><br>    &#125;,<span class="hljs-number">500</span>)<br>    <br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">//this-&gt;window </span><br>    &#125;,<span class="hljs-number">500</span>)<br><span class="hljs-number">442</span><br></code></pre></td></tr></table></figure><h4 id="æ„é€ å‡½æ•°çš„this">æ„é€ å‡½æ•°çš„this</h4><p>æ„é€ å‡½æ•°é…åˆnewä½¿ç”¨, è€Œnewå…³é”®å­—ä¼šå°†æ„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘å®ä¾‹åŒ–å¯¹è±¡ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°ä¸­çš„this-&gt;å®ä¾‹åŒ–å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name,age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br>    <span class="hljs-keyword">var</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>    person1.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;ggb&#x27;</span>;<br>    person1.<span class="hljs-property">age</span> = <span class="hljs-number">21</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person1);<span class="hljs-comment">//Person &#123;name: &quot;ggb&quot;, age: 21&#125;</span><br>    <span class="hljs-keyword">var</span> person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>    person2.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;syj&#x27;</span>;<br>    person2.<span class="hljs-property">age</span> = <span class="hljs-number">19</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person2);<span class="hljs-comment">// Person &#123;name: &quot;syj&quot;, age: 19&#125;</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>javascript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Gitå®å…¸</title>
    <link href="/2024/04/11/Git%E5%AE%9D%E5%85%B8/"/>
    <url>/2024/04/11/Git%E5%AE%9D%E5%85%B8/</url>
    
    <content type="html"><![CDATA[<h1>Gitå®å…¸</h1><p>å…¶å®è¿™æ¬¡miniå¯¹æˆ‘è‡ªèº«æ¥è¯´ å­¦åˆ°äº†å¾ˆå¤š æŠ€æœ¯è¿™é‡Œå°±å…ˆä¸è¯´äº† ç»ˆäºæ„è¯†åˆ°äº†gitåœ¨å¤šäººåä½œå†™ä¸€ä¸ªå¤§é¡¹ç›®çš„é‡è¦æ€§ ğŸ˜†</p><h3 id="å•¥æ˜¯Git">å•¥æ˜¯Git</h3><p>æˆ‘å¯¹<code>Git</code>è¿™ä¸ªä¸œè¥¿çš„ç†è§£å°±æ˜¯ åœ¨è¿›è¡Œå¤§å‹é¡¹ç›®çš„å¼€å‘æ—¶å€™ ä½ ä¸å¯èƒ½å•å…µä½œæˆ˜ ä¸€èˆ¬æ˜¯æœ‰å¥½å¤šå¥½å¤šäººä¸€èµ·çš„ è¿™ä¸ªæ—¶å€™æ€ä¹ˆè¿›è¡Œæ¯ä¸ªäººä¹‹é—´çš„æ±‡æ€»å‹’</p><p>è¿™ä¸ªæ—¶å€™ å°±è¦ç”¨åˆ°<code>Git</code>äº†</p><p>è¯´ç‚¹å®˜æ–¹çš„è¯æœ¯å°±æ˜¯ğŸ˜’</p><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†é¡¹ç›®</p><h3 id="Gitæ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢â“">Gitæ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢â“</h3><p>å¦‚å›¾</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png" alt="img"></p><p>å…·ä½“éƒ½æ˜¯ä»€ä¹ˆæ„æ€å‹’</p><ul><li>Workspaceï¼šå·¥ä½œåŒº (å°±æ˜¯ä½ ç”µè„‘èƒ½çœ‹åˆ°çš„)</li><li>Index / Stageï¼šæš‚å­˜åŒº (ä¸€èˆ¬æ˜¯åœ¨.<code>git</code>ç›®å½•ä¸‹çš„<code>index</code>æ–‡ä»¶ä¸‹)</li><li>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</li><li>Remoteï¼šè¿œç¨‹ä»“åº“</li></ul><h3 id="Gitå’‹ä½¿ç”¨å‘¢">Gitå’‹ä½¿ç”¨å‘¢</h3><h4 id="1-ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯æ–°å»ºGitåº“å–½-ğŸ†•">1.ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯æ–°å»ºGitåº“å–½ ğŸ†•</h4><p>æœ‰ä¸¤ç§æ–¹æ³•</p><p>1ï¸âƒ£ç›´æ¥æ–°å»º!</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git init<br></code></pre></td></tr></table></figure><p>2ï¸âƒ£å…‹éš†ä¸‹æ¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone &quot;url&quot;<br></code></pre></td></tr></table></figure><h4 id="2-åŸºæœ¬æ“ä½œ">2.åŸºæœ¬æ“ä½œ</h4><p>è¯¥è¯´ä¸è¯´è¿™ç©æ„çœŸå¤šå•ŠğŸ˜¡</p><table><thead><tr><th><code>git add</code></th><th><code>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</code></th></tr></thead><tbody><tr><td><code>git status</code></td><td><code>æŸ¥çœ‹ä»“åº“å½“å‰çš„çŠ¶æ€ æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</code></td></tr><tr><td><code>git commit</code></td><td><code>æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“</code></td></tr><tr><td><code>git mv</code></td><td><code>ç§»åŠ¨æˆ–é‡å‘½åå·¥ä½œåŒºæ–‡ä»¶</code></td></tr><tr><td><code>git log</code></td><td><code>æŸ¥çœ‹å†å²æäº¤è®°å½•</code></td></tr><tr><td><code>git blame</code></td><td><code>ä»¥åˆ—è¡¨å½¢å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•</code></td></tr><tr><td><code>git remote</code></td><td><code>è¿œç¨‹ä»“åº“æ“ä½œ</code></td></tr><tr><td><code>git fetch</code></td><td><code>ä»è¿œç¨‹è·å–ä»£ç åº“</code></td></tr><tr><td><code>git pull</code></td><td><code>ä¸‹è½½è¿œç¨‹ä»£ç å¹¶åˆå¹¶</code></td></tr><tr><td><code>git push</code></td><td><code>ä¸Šä¼ è¿œç¨‹ä»£ç å¹¶åˆå¹¶ æ·»åŠ æ–‡ä»¶åˆ°æœ¬åœ°æš‚å­˜åŒº</code></td></tr></tbody></table><ul><li><p>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git add æ–‡ä»¶å //è¿™æ ·æ˜¯æ·»åŠ æŸä¸ªé—®ä»·<br>git add . //æ·»åŠ è¯¥ç›®å½•ä¸‹æ‰€æœ‰æœªè¢«å¿½ç•¥çš„æ–‡ä»¶<br></code></pre></td></tr></table></figure><p>Tips:ä¸€èˆ¬éƒ½å¿½ç•¥ä»€ä¹ˆå‘¢?ğŸ¤”</p><p>ä¸€èˆ¬éƒ½ä¼šå¿½ç•¥ä½ çš„node_modulesæ–‡ä»¶å¤¹ å› ä¸ºä¾èµ–å¤ªå¤šå¤šå¤šå¤šäº†</p><p>â€‹</p></li><li><p>æäº¤æ›´æ”¹åˆ°æœ¬åœ°ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit -m &quot;è¯´æ˜&quot;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªè¯´æ˜ä¹Ÿæ˜¯æœ‰è§„èŒƒæ»´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">feat - æ–°åŠŸèƒ½ feature<br>fix - ä¿®å¤ bug<br>docs - æ–‡æ¡£æ³¨é‡Š<br>style - ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)<br>refactor - é‡æ„ã€ä¼˜åŒ–(æ—¢ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)<br>perf - æ€§èƒ½ä¼˜åŒ–<br>test - å¢åŠ æµ‹è¯•<br>chore - æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨<br>revert - å›é€€<br>build - æ‰“åŒ…<br></code></pre></td></tr></table></figure><p>å°±åƒ</p><p><img src="https://img2.imgtp.com/2024/04/13/LVOmRtNs.png" alt="git commitè§„èŒƒ.png"></p></li></ul><p>è¿™æ ·å†™commitçš„è¯ å°±èƒ½éå¸¸æ¸…æ¥šçš„çœ‹åˆ°ä½ æ¯æ¬¡æäº¤äº†ä¸€äº›ä»€ä¹ˆ</p><ul><li><p>åˆ†æ”¯ç®¡ç†</p><p>åˆ›å»ºåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git branch (åˆ†æ”¯å)<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout (åˆ†æ”¯å)<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ–°çš„åˆ†æ”¯å¹¶ä¸”ç«‹å³åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout -b (åˆ†æ”¯å)<br></code></pre></td></tr></table></figure><p>åˆå¹¶åˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git merge<br></code></pre></td></tr></table></figure><p>åˆ—å‡ºåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">//åˆ—å‡ºæœ¬åœ°åˆ†æ”¯<br>git branch<br>//åˆ—å‡ºå…¨éƒ¨åˆ†æ”¯(åŒ…æ‹¬è¿œç¨‹åˆ†æ”¯)<br>git branch -a<br></code></pre></td></tr></table></figure><p>åˆ é™¤åˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git branch -d (åˆ†æ”¯å)<br></code></pre></td></tr></table></figure></li></ul><h3 id="å¤šäººåä½œ">å¤šäººåä½œ</h3><p>åœ¨è¿›è¡Œä¸€ä¸ªå¤§å‹é¡¹ç›®çš„æ—¶å€™ è¯¥æ€ä¹ˆä½¿ç”¨Gitå‘¢</p><p>å°±æ˜¯åˆ˜æ€»ç»å¸¸è¯´çš„æPRäº† ğŸ˜§</p><p>æ€ä¹ˆæå‘¢</p><p>é¦–å…ˆä½ éœ€è¦æ‰¾åˆ°ä½ ç”¨çš„å¤§å‹é¡¹ç›®ä»“åº“</p><p>ç„¶åfork!!!</p><p><img src="https://img2.imgtp.com/2024/04/13/6LtBRn7z.png" alt="fork.png"></p><p>ç„¶åå›åˆ°ä½ è‡ªå·±ä»“åº“</p><p>å°±èƒ½çœ‹åˆ°ä½ çš„æœ¬åœ°ä»“åº“äº†</p><ul><li><img src="https://img2.imgtp.com/2024/04/13/OnfI0lWy.png" alt="æœ¬åœ°ä»“åº“.png"></li></ul><p>æ€ä¹ˆæPRå‹’ ğŸ¤”</p><p>ç‚¹å‡»ä½ æœ¬åœ°ContributeæŒ‰é’® ç„¶åOpen Pull Request</p><p><img src="https://img2.imgtp.com/2024/04/13/NuoY09og.png" alt="pr.png"></p><p>å°±å¯ä»¥è·Ÿæœ¬åœ°ä¸€æ ·å†™è¯´æ˜å–½ æ ‡å‡†ä¹Ÿæ˜¯è·Ÿcommitçš„æ ‡å‡†å·®ä¸å¤šçš„</p><p>å°å°å°Tips:</p><p>åœ¨æ‰§è¡Œ<code>git push</code>ä¹‹å‰ï¼Œä¸ºäº†é˜²æ­¢è¿œç¨‹ä»“åº“å·²æœ‰å…¶ä»–äººæäº¤çš„æ›´æ”¹ä¸ä½ çš„æ›´æ”¹äº§ç”Ÿå†²çªï¼Œè¦å…ˆæ‰§è¡Œ<code>git pull</code>æ‹‰å–è¿œç¨‹ä»“åº“çš„ä»£ç ï¼Œå¦‚æœæ˜¾ç¤ºç¡®æœ‰å†²çªï¼Œå°±è¦åœ¨æœ¬åœ°æ‰‹åŠ¨æ›´æ”¹å†²çªï¼Œå¯åˆ©ç”¨ideè§£å†³ã€‚ å¦‚æœæ²¡æœ‰å†²çªï¼Œå°±å¯ä»¥ç›´æ¥æ¨é€ã€‚å¦‚æœæœ‰å†²çªï¼Œè§£å†³å†²çªåé‡æ–°æ‰§è¡Œ<code>git addå’Œgit commit</code> ï¼Œå†æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><p>å°±åƒ</p><p><img src="https://img2.imgtp.com/2024/04/13/xIbOddt2.png" alt="git æ‰‹åŠ¨æ“ä½œ.png"></p><p>åŸºæœ¬ä¸ŠGitå¸¸ç”¨çš„å°±è¿™äº›å‹’ å¥½åƒåšå®¢ä¹Ÿå¯ä»¥ç”¨Github Actionsè‡ªåŠ¨éƒ¨ç½² ä»¥åæœ‰æ—¶é—´è¯•è¯•</p><p>ğŸ˜¸</p>]]></content>
    
    
    <categories>
      
      <category>å¼€å‘åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµ…å­¦webpack</title>
    <link href="/2024/03/23/%C7%B3%D1%A7webpack/"/>
    <url>/2024/03/23/%C7%B3%D1%A7webpack/</url>
    
    <content type="html"><![CDATA[<h1>webpackåŸç†(ä¸€)</h1><h3 id="1-å•¥æ˜¯webpackæâ”">1.å•¥æ˜¯webpackæâ”</h3><p>æœ¬è´¨ä¸Šï¼Œ<strong>webpack</strong> æ˜¯ä¸€ä¸ªç”¨äºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„ <em>é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·</em>ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨ä»ä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£ç‚¹æ„å»ºä¸€ä¸ª <a href="https://www.webpackjs.com/concepts/dependency-graph/">ä¾èµ–å›¾(dependency graph)</a>ï¼Œç„¶åå°†ä½ é¡¹ç›®ä¸­æ‰€éœ€çš„æ¯ä¸€ä¸ªæ¨¡å—ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ª <em>bundles</em>ï¼Œå®ƒä»¬å‡ä¸ºé™æ€èµ„æºï¼Œç”¨äºå±•ç¤ºä½ çš„å†…å®¹</p><h3 id="2-webpackä¸»è¦æµç¨‹">2.webpackä¸»è¦æµç¨‹</h3><p>æ„Ÿè§‰webpackå¯ä»¥åˆ†æˆä¸‰éƒ¨åˆ†</p><ul><li><strong>æ„å»ºçš„æ ¸å¿ƒæµç¨‹</strong></li><li><strong>loader çš„ä½œç”¨</strong></li><li><strong>plugin æ¶æ„ä¸å¸¸ç”¨å¥—è·¯</strong></li></ul><h3 id="3-æ ¸å¿ƒæµç¨‹è§£æ-ğŸ˜†">3.æ ¸å¿ƒæµç¨‹è§£æ ğŸ˜†</h3><p>é¦–å…ˆå¾—çŸ¥é“è¿™ç©æ„æœ€æ ¸å¿ƒçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆçš„å§</p><p>å°±åƒä»–å®˜ç½‘è¯´çš„ä¸€æ ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs word">At its core, webpack is a static module bundler for modern JavaScript applications.<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯å°†å„ç§ç±»å‹çš„èµ„æºï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€cssã€jsç­‰ï¼Œè½¬è¯‘ã€ç»„åˆã€æ‹¼æ¥ã€ç”Ÿæˆ JS æ ¼å¼çš„ bundler æ–‡ä»¶</p><p><img src="https://img2.imgtp.com/2024/03/23/6xbAXLks.png" alt="å±å¹•æˆªå›¾ 2024-03-23 012454.png"></p><p>è¿™ä¸ªè¿‡ç¨‹æ ¸å¿ƒå®Œæˆäº† <strong>[å†…å®¹è½¬æ¢+èµ„æºåˆå¹¶]</strong> ä¸¤ç§åŠŸèƒ½</p><p>å®é™…ä¸ŠåŒ…å«ä¸‰ä¸ªé˜¶æ®µ</p><ul><li><h4 id="åˆå§‹åŒ–é˜¶æ®µï¼š">åˆå§‹åŒ–é˜¶æ®µï¼š</h4></li></ul><ol><li><strong>åˆå§‹åŒ–å‚æ•°</strong>ï¼šä»é…ç½®æ–‡ä»¶ã€ é…ç½®å¯¹è±¡ã€Shell å‚æ•°ä¸­è¯»å–ï¼Œä¸é»˜è®¤é…ç½®ç»“åˆå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</li><li><strong>åˆ›å»ºç¼–è¯‘å™¨å¯¹è±¡</strong>ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆ›å»º <code>Compiler</code> å¯¹è±¡</li><li><strong>åˆå§‹åŒ–ç¼–è¯‘ç¯å¢ƒ</strong>ï¼šåŒ…æ‹¬æ³¨å…¥å†…ç½®æ’ä»¶ã€æ³¨å†Œå„ç§æ¨¡å—å·¥å‚ã€åˆå§‹åŒ– RuleSet é›†åˆã€åŠ è½½é…ç½®çš„æ’ä»¶ç­‰</li><li><strong>å¼€å§‹ç¼–è¯‘</strong>ï¼šæ‰§è¡Œ <code>compiler</code> å¯¹è±¡çš„ <code>run</code> æ–¹æ³•</li><li><strong>ç¡®å®šå…¥å£</strong>ï¼šæ ¹æ®é…ç½®ä¸­çš„ <code>entry</code> æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨ <code>compilition.addEntry</code> å°†å…¥å£æ–‡ä»¶è½¬æ¢ä¸º <code>dependence</code> å¯¹è±¡</li></ol><ul><li><h4 id="æ„å»ºé˜¶æ®µï¼š">æ„å»ºé˜¶æ®µï¼š</h4></li></ul><ol><li><strong>ç¼–è¯‘æ¨¡å—(make)</strong>ï¼šæ ¹æ® <code>entry</code> å¯¹åº”çš„ <code>dependence</code> åˆ›å»º <code>module</code> å¯¹è±¡ï¼Œè°ƒç”¨ <code>loader</code> å°†æ¨¡å—è½¬è¯‘ä¸ºæ ‡å‡† JS å†…å®¹ï¼Œè°ƒç”¨ JS è§£é‡Šå™¨å°†å†…å®¹è½¬æ¢ä¸º AST å¯¹è±¡ï¼Œä»ä¸­æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå† é€’å½’ æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li><li><strong>å®Œæˆæ¨¡å—ç¼–è¯‘</strong>ï¼šä¸Šä¸€æ­¥é€’å½’å¤„ç†æ‰€æœ‰èƒ½è§¦è¾¾åˆ°çš„æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„å†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ <strong>ä¾èµ–å…³ç³»å›¾</strong></li></ol><ul><li><h4 id="ç”Ÿæˆé˜¶æ®µï¼š">ç”Ÿæˆé˜¶æ®µï¼š</h4></li></ul><ol><li><strong>è¾“å‡ºèµ„æº(seal)</strong>ï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ <code>Chunk</code>ï¼Œå†æŠŠæ¯ä¸ª <code>Chunk</code> è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li><li><strong>å†™å…¥æ–‡ä»¶ç³»ç»Ÿ(emitAssets)</strong>ï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</li></ol><p><img src="https://img2.imgtp.com/2024/03/23/czXM2g2f.png" alt="å±å¹•æˆªå›¾ 2024-03-23 012530.png"></p><p>æ¥ä¸‹æ¥è¯´è¯´ç»†èŠ‚éƒ¨åˆ†å§ å¯¹ä¸Šé¢ä¸€äº›å¬èµ·æ¥å¾ˆé«˜çº§çš„åè¯è§£é‡Šä¸€æ‰‹ :happy:</p><ul><li><p><code>Entry</code>ï¼šç¼–è¯‘å…¥å£ï¼Œwebpack ç¼–è¯‘çš„èµ·ç‚¹</p></li><li><p><code>Compiler</code>ï¼šç¼–è¯‘ç®¡ç†å™¨ï¼Œwebpack å¯åŠ¨åä¼šåˆ›å»º <code>compiler</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸€ç›´å­˜æ´»çŸ¥é“ç»“æŸé€€å‡º</p><p>è¿™ç©æ„è®°å½•äº†webpackè¿è¡Œç¯å¢ƒçš„æ‰€æœ‰ä¿¡æ¯ æ’ä»¶å¯ä»¥é€šè¿‡å®ƒè·å–åˆ°webpacké…ç½®ä¿¡æ¯,åƒ<code>entry output module</code>ç­‰é…ç½®</p></li><li><p><code>Compilation</code>ï¼šå•æ¬¡ç¼–è¾‘è¿‡ç¨‹çš„ç®¡ç†å™¨ï¼Œæ¯”å¦‚ <code>watch = true</code> æ—¶ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ª <code>compiler</code> ä½†æ¯æ¬¡æ–‡ä»¶å˜æ›´è§¦å‘é‡æ–°ç¼–è¯‘æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>compilation</code> å¯¹è±¡</p><p>å®ƒå‚¨å­˜äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆçš„èµ„æºã€å˜åŒ–çš„æ–‡ä»¶ã€ä»¥åŠè¢«è·Ÿè¸ªä¾èµ–çš„çŠ¶æ€ä¿¡æ¯</p></li><li><p><code>Dependence</code>ï¼šä¾èµ–å¯¹è±¡ï¼Œwebpack åŸºäºè¯¥ç±»å‹è®°å½•æ¨¡å—é—´ä¾èµ–å…³ç³»</p></li><li><p><code>Module</code>ï¼šwebpack å†…éƒ¨æ‰€æœ‰èµ„æºéƒ½ä¼šä»¥â€œmoduleâ€å¯¹è±¡å½¢å¼å­˜åœ¨ï¼Œæ‰€æœ‰å…³äºèµ„æºçš„æ“ä½œã€è½¬è¯‘ã€åˆå¹¶éƒ½æ˜¯ä»¥ â€œmoduleâ€ ä¸ºåŸºæœ¬å•ä½è¿›è¡Œçš„</p></li><li><p><code>Chunk</code>ï¼šç¼–è¯‘å®Œæˆå‡†å¤‡è¾“å‡ºæ—¶ï¼Œwebpack ä¼šå°† <code>module</code> æŒ‰ç‰¹å®šçš„è§„åˆ™ç»„ç»‡æˆä¸€ä¸ªä¸€ä¸ªçš„ <code>chunk</code>ï¼Œè¿™äº› <code>chunk</code> æŸç§ç¨‹åº¦ä¸Šè·Ÿæœ€ç»ˆè¾“å‡ºä¸€ä¸€å¯¹åº”</p></li><li><p><code>Loader</code>ï¼šèµ„æºå†…å®¹è½¬æ¢å™¨ï¼Œå…¶å®å°±æ˜¯å®ç°ä»å†…å®¹ A è½¬æ¢ B çš„è½¬æ¢å™¨</p></li><li><p><code>Plugin</code>ï¼šwebpackæ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨ç‰¹å®šçš„æ—¶æœºå¹¿æ’­å¯¹åº”çš„äº‹ä»¶ï¼Œæ’ä»¶ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨ç‰¹å®šæ—¶é—´ç‚¹ä»‹å…¥ç¼–è¯‘è¿‡ç¨‹</p></li></ul><h3 id="4-Pluginè§£æ">4.<code>Plugin</code>è§£æ</h3><p>çœ‹æ’ä»¶ä¹‹å‰ é¦–å…ˆæƒ³ä¸‰ä¸ªé—®é¢˜</p><p>ä»€ä¹ˆæ˜¯æ’ä»¶</p><p>ä»€ä¹ˆæ—¶é—´ç‚¹ä¼šæœ‰ä»€ä¹ˆé’©å­è¢«è§¦å‘</p><p>åœ¨é’©å­å›è°ƒä¸­,å¦‚ä½•å½±å“ç¼–è¯‘çŠ¶æ€</p><h4 id="What-ä»€ä¹ˆæ˜¯æ’ä»¶ğŸš˜">What: ä»€ä¹ˆæ˜¯æ’ä»¶ğŸš˜</h4><p>å…ˆä»å½¢æ€ä¸Šæ¥çœ‹ æ’ä»¶æ˜¯ä¸ªå¸¦æœ‰<code>apply</code>å‡½æ•°çš„ç±»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomePlugin</span> &#123;<br><span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>)&#123;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>apply</code> å‡½æ•°è¿è¡Œæ—¶ä¼šå¾—åˆ°å‚æ•° <code>compiler</code> ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹å¯ä»¥è°ƒç”¨ <code>hook</code> å¯¹è±¡æ³¨å†Œå„ç§é’©å­å›è°ƒï¼Œä¾‹å¦‚ï¼š <code>compiler.hooks.make.tapAsync</code> ï¼Œè¿™é‡Œé¢ <code>make</code> æ˜¯é’©å­åç§°ï¼Œ<code>tapAsync</code> å®šä¹‰äº†é’©å­çš„è°ƒç”¨æ–¹å¼ï¼Œwebpack çš„æ’ä»¶æ¶æ„åŸºäºè¿™ç§æ¨¡å¼æ„å»ºè€Œæˆï¼Œæ’ä»¶å¼€å‘è€…å¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼åœ¨é’©å­å›è°ƒä¸­ï¼Œæ’å…¥ç‰¹å®šä»£ç ã€‚webpack å„ç§å†…ç½®å¯¹è±¡éƒ½å¸¦æœ‰ <code>hooks</code> å±æ€§ï¼Œæ¯”å¦‚ <code>compilation</code> å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomePlugin</span> &#123;<br>    <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) &#123;<br>        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">thisCompilation</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">&#x27;SomePlugin&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">compilation</span>) =&gt;</span> &#123;<br>            compilation.<span class="hljs-property">hooks</span>.<span class="hljs-property">optimizeChunkAssets</span>.<span class="hljs-title function_">tapAsync</span>(<span class="hljs-string">&#x27;SomePlugin&#x27;</span>, <span class="hljs-function">()=&gt;</span>&#123;&#125;);<br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="When-ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘é’©å­-ğŸ“¦">When: ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘é’©å­ ğŸ“¦</h4><p>å®˜ç½‘å¯¹é’©å­çš„è¯´æ˜éƒ½æ¯”è¾ƒç®€çŸ­</p><p>ç›´æ¥çœ‹å‡ ä¸ªä¾‹å­å§</p><p><code>compiler.hooks.compilation</code> ï¼š</p><ul><li>æ—¶æœºï¼šå¯åŠ¨ç¼–è¯‘åˆ›å»ºå‡º compilation å¯¹è±¡åè§¦å‘</li><li>å‚æ•°ï¼šå½“å‰ç¼–è¯‘çš„ compilation å¯¹è±¡</li><li>ç¤ºä¾‹ï¼šå¾ˆå¤šæ’ä»¶åŸºäºæ­¤äº‹ä»¶è·å– compilation å®ä¾‹</li></ul><p><code>compiler.hooks.make</code>ï¼š</p><ul><li>æ—¶æœºï¼šæ­£å¼å¼€å§‹ç¼–è¯‘æ—¶è§¦å‘</li><li>å‚æ•°ï¼šåŒæ ·æ˜¯å½“å‰ç¼–è¯‘çš„ <code>compilation</code> å¯¹è±¡</li><li>ç¤ºä¾‹ï¼šwebpack å†…ç½®çš„ <code>EntryPlugin</code> åŸºäºæ­¤é’©å­å®ç° <code>entry</code> æ¨¡å—çš„åˆå§‹åŒ–</li></ul><p><code>compilation.hooks.optimizeChunks</code> ï¼š</p><ul><li>æ—¶æœºï¼š <code>seal</code> å‡½æ•°ä¸­ï¼Œ<code>chunk</code> é›†åˆæ„å»ºå®Œæ¯•åè§¦å‘</li><li>å‚æ•°ï¼š<code>chunks</code> é›†åˆä¸ <code>chunkGroups</code> é›†åˆ</li><li>ç¤ºä¾‹ï¼š <code>SplitChunksPlugin</code> æ’ä»¶åŸºäºæ­¤é’©å­å®ç° <code>chunk</code> æ‹†åˆ†ä¼˜åŒ–</li></ul><p><code>compiler.hooks.done</code>ï¼š</p><ul><li>æ—¶æœºï¼šç¼–è¯‘å®Œæˆåè§¦å‘</li><li>å‚æ•°ï¼š <code>stats</code> å¯¹è±¡ï¼ŒåŒ…å«ç¼–è¯‘è¿‡ç¨‹ä¸­çš„å„ç±»ç»Ÿè®¡ä¿¡æ¯</li><li>ç¤ºä¾‹ï¼š <code>webpack-bundle-analyzer</code> æ’ä»¶åŸºäºæ­¤é’©å­å®ç°æ‰“åŒ…åˆ†æ</li></ul><p>çœ‹è¿™ä¸ªé’©å­æ—¶å€™æˆ‘ç›´æ¥çœ‹ è§¦å‘æ—¶æœº ä¼ é€’å‚æ•° ç¤ºä¾‹ä»£ç </p><p>é¦–å…ˆçœ‹è§¦å‘æ—¶æœºå‹’</p><p>è§¦å‘æ—¶æœºæ˜¯ä¸webpackå·¥ä½œè¿‡ç¨‹ç´§å¯†ç›¸å…³çš„,å¤§ä½“ä¸Šä»å¯åŠ¨åˆ°ç»“æŸ,<code>compiler</code>å¯¹è±¡é€æ¬¡è§¦å‘ä»¥ä¸‹é’©å­</p><p><img src="https://img2.imgtp.com/2024/03/23/1p0WM3NF.png" alt="å±å¹•æˆªå›¾ 2024-03-23 012707.png"></p><p>è€Œ<code>compilation</code>å¯¹è±¡é€æ¬¡è§¦å‘:</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de1f0d05a1274e6d86959b60a3d98742~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image (1).png"></p><p>å°±éƒ½æ˜¯å˜Ÿå˜Ÿå˜Ÿå˜Ÿå˜Ÿå˜Ÿé•¿ä¸² ğŸ˜“</p><p>æˆ‘è‡ªå·±çš„ç†è§£æ˜¯ è¿™ä¸ªæ—¶æœºå°±æ˜¯å‡ ä¸ªæƒ…å†µ</p><ul><li>åˆ›å»ºå‡ºè¿™ä¸ªå¯¹è±¡è§¦å‘</li><li>æ­£å¼å¼€å§‹ç¼–è¯‘å°±è§¦å‘</li><li>å‡½æ•°æ„å»ºå®Œæ¯•åè§¦å‘</li></ul><p>ä¼ é€’å‚æ•°</p><p>æˆ‘åœ¨ä»–çš„é…ç½®é‡Œæ²¡æ€ä¹ˆæ‰¾åˆ° æ„Ÿè§‰æ— éä¼ ç‚¹modulesä¹‹ç±»çš„ä¸œè¥¿</p><p>ç¤ºä¾‹ä»£ç </p><p>webpackè¿™é’©å­å®è¯å®è¯´</p><p>æŠ½è±¡ç¨‹åº¦æ˜¯å°å¤§çš„ æˆ‘æ„Ÿè§‰æœ€å¥½çš„å­¦ä¹ åŠæ³• å°±æ˜¯æŸ¥è¯¢å…¶ä»–æ’ä»¶ä¸­å¦‚ä½•ä½¿ç”¨è¿™äº›é’©å­ ä¸ç„¶ä½ å°±çœ‹å§ ä¸€çœ‹ä¸€ä¸ªä¸å±å£°ğŸ˜­</p><h4 id="How-å¦‚ä½•å½±å“ç¼–è¯‘çŠ¶æ€æ">How å¦‚ä½•å½±å“ç¼–è¯‘çŠ¶æ€æ</h4><p>webpackçš„æ’ä»¶ä½“ç³»è·Ÿå¹³å¸¸çœ‹åˆ°çš„ä¸å¤ªä¸€æ · hookså›è°ƒç”±webpackå†³å®šä½•æ—¶ ä»¥ä½•ç§æ–¹å¼ è€Œåœ¨hookså›è°ƒå†…éƒ¨å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ è°ƒç”¨ä¸Šä¸‹æ–‡apiç­‰æ–¹å¼webpackäº§ç”Ÿ ä¸€äº›å½±å“</p><p>ä¸¾ä¸ªğŸ®å­</p><p><code>EntryPlugin</code>æ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryPlugin</span> &#123;<br>  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) &#123;<br>    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">compilation</span>.<span class="hljs-title function_">tap</span>(<br>      <span class="hljs-string">&quot;EntryPlugin&quot;</span>,<br>      <span class="hljs-function">(<span class="hljs-params">compilation, &#123; normalModuleFactory &#125;</span>) =&gt;</span> &#123;<br>        compilation.<span class="hljs-property">dependencyFactories</span>.<span class="hljs-title function_">set</span>(<br>          <span class="hljs-title class_">EntryDependency</span>,<br>          normalModuleFactory<br>        );<br>      &#125;<br>    );<br><br>    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">make</span>.<span class="hljs-title function_">tapAsync</span>(<span class="hljs-string">&quot;EntryPlugin&quot;</span>, <span class="hljs-function">(<span class="hljs-params">compilation, callback</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> &#123; entry, options, context &#125; = <span class="hljs-variable language_">this</span>;<br><br>      <span class="hljs-keyword">const</span> dep = <span class="hljs-title class_">EntryPlugin</span>.<span class="hljs-title function_">createDependency</span>(entry, options);<br>      compilation.<span class="hljs-title function_">addEntry</span>(context, dep, options, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">callback</span>(err);<br>      &#125;);<br>    &#125;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œé¢ webpackä¼šå°†ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥å‚æ•°æˆ–<code>this</code>å½¢å¼ä¼ é€’ç»™é’©å­å›è°ƒç”¨</p><p>åœ¨å›è°ƒä¸­å¯ä»¥è°ƒç”¨ä¸Šä¸‹æ–‡å¯¹è±¡çš„æ–¹æ³•æˆ–è€…ç›´æ¥ä¿®æ”¹ä¸Šä¸‹æ–‡å¯¹è±¡å±æ€§çš„æ–¹å¼ï¼Œå¯¹åŸå®šçš„æµç¨‹äº§ç”Ÿ side effectã€‚æ‰€ä»¥æƒ³çº¯ç†Ÿåœ°ç¼–å†™æ’ä»¶ï¼Œé™¤äº†è¦ç†è§£è°ƒç”¨æ—¶æœºï¼Œè¿˜éœ€è¦äº†è§£æˆ‘ä»¬å¯ä»¥ç”¨å“ªä¸€äº›apiï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>compilation.addModule</code>ï¼šæ·»åŠ æ¨¡å—ï¼Œå¯ä»¥åœ¨åŸæœ‰çš„ <code>module</code> æ„å»ºè§„åˆ™ä¹‹å¤–ï¼Œæ·»åŠ è‡ªå®šä¹‰æ¨¡å—</li><li><code>compilation.emitAsset</code>ï¼šç›´è¯‘æ˜¯â€œæäº¤èµ„äº§â€ï¼ŒåŠŸèƒ½å¯ä»¥ç†è§£å°†å†…å®¹å†™å…¥åˆ°ä¸€ä¸ªç‰¹å®šè·¯å¾„</li><li><code>compilation.addEntry</code>ï¼šæ·»åŠ å…¥å£ï¼ŒåŠŸèƒ½ä¸Šä¸ç›´æ¥å®šä¹‰ <code>entry</code> é…ç½®ç›¸åŒ</li><li><code>module.addError</code>ï¼šæ·»åŠ ç¼–è¯‘é”™è¯¯ä¿¡æ¯</li></ul><h3 id="5-Loaderä»‹ç»">5.Loaderä»‹ç»</h3><p>çœ‹ä¸€ä¸‹<code>loader</code>åœ¨ç¼–è¯‘æµç¨‹ä¸­çš„ç”Ÿæ•ˆä½ç½®</p><p><img src="https://img2.imgtp.com/2024/03/23/IYzGYIPf.png" alt="å±å¹•æˆªå›¾ 2024-03-23 012734.png"></p><p>åœ¨è¿™ä¸ªæµç¨‹å›¾é‡Œ,<code>runloaders</code>ä¼šè°ƒç”¨ç”¨æˆ·æ‰€é…ç½®çš„loaderé›†åˆè¯»å–,è½¬ç§»èµ„æº,å‰é¢çš„å†…å®¹å¯ä»¥åƒå¥‡ç™¾æ€ªğŸ‘½</p><p>ä½†æ˜¯è½¬è¯‘ä¹‹åä¸€èˆ¬éƒ½æ˜¯è¾“å‡ºJavascriptæ–‡æœ¬,webpackæ‰å¯ä»¥ç»§ç»­å¤„ç†æ¨¡å—ä¾èµ–</p><p>ç†è§£äº†è¿™ä¸ªåŸºæœ¬é€»è¾‘,loaderèŒè´£åŸºæœ¬ä¸Šä¹ŸçŸ¥é“äº† å°±æ˜¯æŠŠå†…å®¹A =&gt;å†…å®¹B</p>]]></content>
    
    
    <categories>
      
      <category>webpack</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‡ªå®šä¹‰React hooks</title>
    <link href="/2024/03/08/%E8%87%AA%E5%AE%9A%E4%B9%89React%20Hooks/"/>
    <url>/2024/03/08/%E8%87%AA%E5%AE%9A%E4%B9%89React%20Hooks/</url>
    
    <content type="html"><![CDATA[<h1>è‡ªå®šä¹‰<code>React Hooks</code></h1><h3 id="1-ä¸ºä»€ä¹ˆä¼šå‡ºç°hooksè¿™ä¸ªä¸œè¥¿æ-â“">1.ä¸ºä»€ä¹ˆä¼šå‡ºç°<code>hooks</code>è¿™ä¸ªä¸œè¥¿æ â“</h3><p>åˆšçœ‹<code>hooks</code> å°±å‡ºç°äº†è¿™ä¸ªé—®é¢˜ <code>hooks</code>å‡ºç°çš„æ„ä¹‰åœ¨å“ªé‡Œå‘¢</p><p><code>hooks</code>èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜</p><p><code>React</code>ä¸­ç»„ä»¶æœ‰ä¸¤ç§å†™æ³• ä¸€ç§ç±»ç»„ä»¶ ä¸€ç§å‡½æ•°ç»„ä»¶</p><p>ä½†æ˜¯å‡½æ•°ç»„ä»¶ç›¸å¯¹äºç±»ç»„ä»¶æ¥è¯´æœ‰ä¸€ä¸ªå°å°æ»´ç¼ºç‚¹  å°±æ˜¯æ²¡æœ‰<code>state</code> ğŸ˜”</p><p>æ‰€ä»¥<code>hooks</code>å°±åº”è¿è€Œç”Ÿå‹’ğŸ˜€</p><p><code>hooks</code>æ˜¯ä¸€ç±»ç‰¹æ®Šçš„å‡½æ•° å…è®¸åœ¨Reactçš„å‡½æ•°å¼ç»„ä»¶ä¸­&quot;é’©å…¥&quot;çŠ¶æ€,ç”Ÿå‘½å‘¨æœŸç­‰å…¶ä»–<code>React</code>çš„ç‰¹æ€§</p><p>æä¾›äº†ä¸€ç§æ— éœ€ç±»ç»„ä»¶çš„æ–¹å¼,ä½¿å¾—ç°åœ¨åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨åƒ <code>this.state</code>,<code>this.props</code>çš„æ¦‚å¿µå‹’ğŸŒµ</p><h3 id=""></h3><h3 id="2-é‚£hookséƒ½è¿™ä¹ˆå‰å®³äº†-ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è‡ªå®šä¹‰çš„hooksæâ”">2.é‚£<code>hooks</code>éƒ½è¿™ä¹ˆå‰å®³äº† ä¸ºä»€ä¹ˆè¿˜è¦æœ‰è‡ªå®šä¹‰çš„<code>hooks</code>æâ”</h3><p>æ­£å¸¸çš„<code>useState</code>æ¥å—ä¸¤ä¸ªå‚æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [state,setState]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æ­£å¸¸åœ¨ç±»ç»„ä»¶ä¸­<code>setState</code>ä¼šæ”¯æŒä¸¤ä¸ªå‚æ•°: ä¸€ä¸ªæ˜¯æ›´æ–°åçš„<code>state</code>æˆ–è€…å›è°ƒå¼æ›´æ–°çš„<code>state</code> å¦ä¸€ä¸ªå‚æ•°æ˜¯æ›´æ–°åçš„å›è°ƒå‡½æ•°</p><p><code>tips</code>:ä»€ä¹ˆæ˜¯å›è°ƒå‡½æ•°ğŸ˜“</p><p>å›è°ƒ (callback) æ˜¯<strong>ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°</strong> ,å¹¶åœ¨è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åè¢«è°ƒç”¨</p><p>ä¸ªäººçš„å°ç†è§£: å›è°ƒå‡½æ•°å°±æ˜¯å…ˆå®šä¹‰äº†<code>functionA</code>ç„¶åå†å®šä¹‰äº†<code>functionB</code></p><p>ä½†æ˜¯åœ¨ä½¿ç”¨æ—¶å€™å…ˆç”¨äº†<code>functionB</code> å¹¶ä¸”æŠŠ<code>functionA</code>å½“æˆäº†å‚æ•°ç»™äº†<code>functionB</code></p><p><code>useState</code> hookå¹¶ä¸ç›´æ¥æ”¯æŒåƒç±»ç»„ä»¶ä¸­çš„<code>setState</code>æ–¹æ³•é‚£æ ·å¯ä»¥æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°ã€‚<code>useState</code> hookè¿”å›çš„æ›´æ–°å‡½æ•°åªèƒ½ç”¨äºæ›´æ–°çŠ¶æ€ï¼Œå¹¶ä¸”ä¸ä¼šæä¾›å›è°ƒå‡½æ•°çš„é€‰é¡¹</p><p>æ‰€ä»¥è‡ªå®šä¹‰<code>hooks</code>å°±å‡ºç°å•¦</p><h3 id="3-æ¥è‡ªå®šä¹‰useStateå§ğŸ¶">3.æ¥è‡ªå®šä¹‰<code>useState</code>å§ğŸ¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useStatePro</span> =(<span class="hljs-params">initState</span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span> [state,setState]=<span class="hljs-title function_">useState</span>(initState);<br>    <span class="hljs-comment">//å­˜å‚¨ä¸€æ‰‹å›è°ƒå‡½æ•°</span><br>    <span class="hljs-keyword">const</span> isUpdate=<span class="hljs-title function_">useRef</span>()<br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ–°å‡½æ•°å–½ (æ¥å—ä¸€ä¸ªæ–°çŠ¶æ€å’Œä¸€ä¸ªå›è°ƒå‡½æ•°)</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setStatePro</span> =(<span class="hljs-params">newState,cb</span>)=&gt;&#123;<br>        <span class="hljs-comment">//ä½¿ç”¨setStateæ›´æ–°çŠ¶æ€ æŠŠå›è°ƒå‡½æ•°å‚¨å­˜åœ¨currenté‡Œ </span><br>        <span class="hljs-comment">//å¦‚æœnewStateæ˜¯ä¸ªå‡½æ•°çš„æƒ…å†µä¸‹ å°±è®¡ç®—æ–°çŠ¶æ€ </span><br>        <span class="hljs-title function_">setState</span>(<br>        <span class="hljs-function"><span class="hljs-params">prev</span>=&gt;</span>&#123;<br>            isUpdate.<span class="hljs-property">current</span>=cb<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> newState=<span class="hljs-string">&#x27;function&#x27;</span> ? <span class="hljs-title function_">newState</span>(prev):newState<br>        &#125;<br>        )<br>    &#125;<br>    <span class="hljs-comment">//æ£€æŸ¥ä¸€ä¸‹currentæœ‰æ— å›è°ƒå‡½æ•° æœ‰å°±ç›´æ¥æ‰§è¡Œ</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-keyword">if</span>(isUpdate.<span class="hljs-property">current</span>)<br>            &#123;<br><span class="hljs-keyword">return</span> isUpdate.<span class="hljs-title function_">current</span>()<br>            &#125;<br>    &#125;)<br>    <span class="hljs-keyword">return</span> [state,useStatePro]<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†<code>useState</code>çš„åŠŸèƒ½ ä½†æ˜¯å¤šäº†ä¸€ä¸ªåœ¨çŠ¶æ€æ›´æ–°åæ‰§è¡Œå›è°ƒå‡½æ•°çš„åŠŸèƒ½</p><h3 id="4-è‡ªå®šä¹‰ä¸€ä¸ªæ›´æ–°å‡½æ•°useUpdate">4.è‡ªå®šä¹‰ä¸€ä¸ªæ›´æ–°å‡½æ•°<code>useUpdate</code></h3><p>å¦‚æœæ­£å¸¸ä½¿ç”¨<code>hooks</code>æƒ³è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ ä¸€èˆ¬æ˜¯è¦æ›´æ–°stateçš„</p><p>ä½†æ˜¯æœ‰çš„æ—¶å€™å¯èƒ½ä¸€ä¸ªstateæŒæ¡ç€å¥½å‡ ä¸ªç»„ä»¶çš„ç”Ÿæ­»å¤§æƒğŸ˜ˆ</p><p>ä¸èƒ½å°±ä¸ºäº†ä¸€ä¸ªå°å°çš„ç»„ä»¶å°±è®©stateä½œå‡ºæ— æ„ä¹‰çš„æ›´æ–°</p><p>è¿™æ—¶å€™å¯ä»¥æƒ³æƒ³èƒ½ä¸èƒ½å®šä¹‰ä¸€ä¸ªæ›´æ–°çš„<code>hooks</code>æ¥ä¼˜é›…ä¸€äº›å®ç°ç»„ä»¶çš„å¼ºåˆ¶æ›´æ–°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Update</span>=(<span class="hljs-params"></span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span> [,setFlag]=<span class="hljs-title function_">useState</span>()<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span>=(<span class="hljs-params"></span>)=&gt;&#123;<br>        <span class="hljs-comment">//æ›´æ–°ä¸€æ‰‹æ—¶é—´</span><br>        <span class="hljs-title function_">setFlag</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>())<br>    &#125;<br>    <span class="hljs-keyword">return</span> update<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘ç°è¿™ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥å¼ºåˆ¶æ›´æ–°çš„</p><p>å’‹ä½¿ç”¨ä»–æğŸ’…</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Time</span>=(<span class="hljs-params"></span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span> update=<span class="hljs-title function_">useUpdate</span>();<br>    <span class="hljs-keyword">return</span>(<br>        &#123;<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()&#125;<br>    &lt;div&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onCLick</span>=<span class="hljs-string">&#123;update&#125;</span>&gt;</span>æ›´æ–°å–½<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>&lt;/div&gt;<br>    )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-è‡ªå®šä¹‰hookså®ç°redux">5.è‡ªå®šä¹‰hookså®ç°<code>redux</code></h3><p><code>Redux</code>ç›®å‰æ¥è¯´è¿˜æ˜¯å¸¸ç”¨çš„ç®¡ç†çŠ¶æ€çš„å·¥å…· ä½†æ˜¯<code>Redux</code>éœ€è¦éµå®ˆçš„è§„åˆ™å’Œæ­¥éª¤æœ‰ç‚¹å°å¤šğŸ˜¡</p><p>æ‰€ä»¥æ¥åˆ¶ä½œä¸€ä¸ªå±äºè‡ªå·±çš„<code>Redux</code></p><h4 id="1-é¦–å…ˆå…ˆæŠŠåº”ç”¨æ¥å£åšå¥½">1.é¦–å…ˆå…ˆæŠŠåº”ç”¨æ¥å£åšå¥½</h4><p>åœ¨é¡¶éƒ¨å¼•å…¥<code>Provider</code>ç»„ä»¶ä¸ºæ‰€æœ‰çš„å„¿å­™ç»„ä»¶æä¾›æ‰€æœ‰æ•°æ®æº<code>store</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span>, &#123;render&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/App&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Provider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store/provider&#x27;</span><br><span class="hljs-comment">// æŒ‚è½½èŠ‚ç‚¹</span><br><span class="hljs-title function_">render</span>((<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span><br>), <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;app&#x27;</span>)<br>)<br></code></pre></td></tr></table></figure><h4 id="2-ç„¶åå°±å¯ä»¥å¼€å§‹è®¾è®¡storeå•¦-happy">2.ç„¶åå°±å¯ä»¥å¼€å§‹è®¾è®¡<code>store</code>å•¦:happy:</h4><p>é¦–å…ˆå°±æ˜¯æ•°æ®é¡¹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//åˆå§‹åŒ–æ•°æ®</span><br><span class="hljs-keyword">const</span> initState=&#123;<br> <span class="hljs-attr">count</span>:<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//reducer å¤„ç†å™¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> =(<span class="hljs-params">state,action</span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span>&#123;type,payload&#125;=action<br>    <span class="hljs-keyword">switch</span>(type)&#123;<br>            <span class="hljs-keyword">case</span><span class="hljs-string">&#x27;ADD_COUNT&#x27;</span>:<span class="hljs-keyword">return</span>&#123;...state ,<span class="hljs-attr">count</span>:state.<span class="hljs-property">count</span>+<span class="hljs-number">1</span>&#125;<br>            <span class="hljs-keyword">default</span> : <span class="hljs-keyword">return</span> state;<br>    &#125;<br>&#125;<span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Context</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>()<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Provider</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initState)<br><span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Context.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;state,</span> <span class="hljs-attr">dispatch</span>&#125;&#125;&gt;</span></span><br><span class="language-xml">        &#123;props.children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Provider</span>&gt;</span></span><br>)<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123; <span class="hljs-title class_">Context</span>, <span class="hljs-title class_">Provider</span> &#125;<br><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ•°æ®é¡¹ä¸­å¯ä»¥çœ‹å‡º initState<code> </code>reducer<code>çš„å®šä¹‰å’Œä½¿ç”¨</code>redux`æ˜¯ä¸€æ¨¡ä¸€æ ·çš„</p><p>é‡ç‚¹çœ‹ä¸‹é¢çš„åˆ›å»ºçš„ä¸Šä¸‹æ–‡ é¦–å…ˆé€šè¿‡<code>React.createContext()</code>åˆ›å»ºä¸€ä¸ªç©ºçš„ä¸Šä¸‹æ–‡</p><p>ç„¶åå®šä¹‰<code>Provider</code>è¿™ä¸ªç»„ä»¶ åœ¨å†…éƒ¨ç”¨<code>useReducer</code>æŠŠ<code>reducer</code>å’Œåˆå§‹åŒ–çš„<code>initState</code>ä¼ å…¥è¿›å»</p><p>è¿”å›çš„<code>state</code>å’Œ<code>dispatch</code>æä¾›åˆ°<code>Provider</code>ä½œä¸ºæ•°æ®æº</p><p>æ•°æ®é¡¹èšåˆä¸€ä¸‹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// èšåˆcountã€todoè¿™äº›æ•°æ®é¡¹</span><br><span class="hljs-keyword">const</span> providers = [<br>    <span class="hljs-title class_">Count</span>.<span class="hljs-property">Provider</span>,<br>    <span class="hljs-title class_">Todo</span>.<span class="hljs-property">Provider</span><br>];<br><span class="hljs-comment">// é€’å½’åŒ…è£¹Provider</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">ProvidersComposer</span> = (<span class="hljs-params">props</span>) =&gt; (<br>    props.<span class="hljs-property">providers</span>.<span class="hljs-title function_">reduceRight</span>(<span class="hljs-function">(<span class="hljs-params">children, Parent</span>) =&gt;</span> (<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Parent</span>(&#123;children&#125;)<br>    ), props.<span class="hljs-property">children</span>)<br>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Provider</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br><span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProvidersComposer</span> <span class="hljs-attr">providers</span>=<span class="hljs-string">&#123;providers&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ProvidersComposer</span>&gt;</span></span><br>)<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Provider</span><br></code></pre></td></tr></table></figure><p>æœ€åå‡ºæ¥çš„ç»„ä»¶ç»“æ„ï¼š <code>Provider &gt; Context.Provider &gt; Context.Provider &gt; App</code> æˆ‘ä»¬é€šè¿‡ProviderComposerè¿›è¡Œé€’å½’åŒ…è£¹ï¼ŒæŠŠæ¯ä¸ª<code>Provider</code>è¿›è¡Œä¸€å±‚ä¸€å±‚çš„åŒ…è£¹ è¿™é‡Œä½¿ç”¨äº†<code>parent(&#123;children&#125;)</code>æ›¿ä»£äº†<code>&lt;Parent&gt;&#123;children&#125;&lt;/Parent&gt;</code>ï¼Œè¿™æ ·çš„åšæ³•å¯ä»¥å‡å°‘ä¸€å±‚åµŒå¥—ç»“æ„ã€‚</p><p>å¦‚ä½•ä½¿ç”¨æğŸ’©</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-comment">// å¼•å…¥countæ•°æ®æº</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">CountStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/modules/count&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br>    <span class="hljs-comment">// é€šè¿‡useContextä½¿ç”¨Countè¿™ä¸ªstoreçš„ä¸Šä¸‹æ–‡</span><br>    <span class="hljs-keyword">const</span> &#123;state, dispatch&#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CountStore</span>.<span class="hljs-property">Context</span>)<br>    <span class="hljs-comment">// æ¯ç§’æ›´æ–°count</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;ADD_COUNT&#x27;</span> &#125;)<br>        &#125;, <span class="hljs-number">1000</span>);<br>    &#125;, [])<br>    <br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="language-xml">            &#123;JSON.stringify(state)&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br><br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°å•¦ä¸€ä¸ªå°å‹<code>redux</code> æ„Ÿè§‰æ¯”æ­£å¸¸çš„<code>redux</code>ä¼šå¥½ç”¨ä¸€äº›æ</p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React hook</title>
    <link href="/2024/02/17/React%20hook/"/>
    <url>/2024/02/17/React%20hook/</url>
    
    <content type="html"><![CDATA[<h1><code>React hook</code></h1><h3 id="Hook-çš„ä¼˜åŠ¿">Hook çš„ä¼˜åŠ¿</h3><ul><li>Hook ä½¿ä½ åœ¨æ— éœ€æ”¹å˜ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ï¼ˆè‡ªå®šä¹‰ Hookï¼‰</li><li>Hook å°†ç»„ä»¶ä¸­äº’ç›¸å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰</li><li>Hook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§</li></ul><h3 id="Hook-ä½¿ç”¨è§„åˆ™">Hook ä½¿ç”¨è§„åˆ™</h3><p>Hook å°±æ˜¯ <code>Javascript</code> å‡½æ•°ï¼Œä½¿ç”¨å®ƒä»¬æ—¶æœ‰ä¸¤ä¸ªé¢å¤–çš„è§„åˆ™ï¼š</p><ul><li>åªèƒ½åœ¨<strong>å‡½æ•°å¤–å±‚</strong>è°ƒç”¨ Hookï¼Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨</li><li>åªèƒ½åœ¨ <strong>React çš„å‡½æ•°ç»„ä»¶</strong> å’Œ<strong>è‡ªå®šä¹‰ Hook</strong> ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨</li></ul><p>åœ¨ç»„ä»¶ä¸­ React æ˜¯é€šè¿‡åˆ¤æ–­ Hook è°ƒç”¨çš„é¡ºåºæ¥åˆ¤æ–­æŸä¸ª state å¯¹åº”çš„ <code>useState</code>çš„ï¼Œæ‰€ä»¥å¿…é¡»ä¿è¯ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact æ‰èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”</p><h2 id="useState"><code>useState</code></h2><p><code>useState</code> å¯ä»¥ä½¿å‡½æ•°ç»„ä»¶åƒç±»ç»„ä»¶ä¸€æ ·æ‹¥æœ‰ <code>state</code>ï¼Œå‡½æ•°ç»„ä»¶é€šè¿‡ <code>useState</code> å¯ä»¥è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–°è§†å›¾</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [ â‘ state , â‘¡dispatch ] = <span class="hljs-title function_">useState</span>(â‘¢initData)<br></code></pre></td></tr></table></figure><p>â‘  <code>state</code>ï¼Œç›®çš„æä¾›ç»™ <code>UI</code> ï¼Œä½œä¸ºæ¸²æŸ“è§†å›¾çš„æ•°æ®æº</p><p>â‘¡ <code>dispatchAction</code>(setState) æ”¹å˜ state çš„å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨åŠ¨å‡½æ•°ç»„ä»¶æ¸²æŸ“çš„æ¸²æŸ“å‡½æ•°</p><p>â‘¢ <code>initData</code> æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æƒ…å†µæ˜¯éå‡½æ•°ï¼Œå°†ä½œä¸º state åˆå§‹åŒ–çš„å€¼ã€‚ ç¬¬äºŒç§æƒ…å†µæ˜¯å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸º <code>useState</code> åˆå§‹åŒ–çš„å€¼</p><p>åŸºç¡€ç”¨æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">DemoState</span> = (<span class="hljs-params">props</span>) =&gt; &#123;<br>   <span class="hljs-comment">/* numberä¸ºæ­¤æ—¶stateè¯»å–å€¼ ï¼ŒsetNumberä¸ºæ´¾å‘æ›´æ–°çš„å‡½æ•° */</span><br>   <span class="hljs-keyword">let</span> [number, setNumber] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">/* 0ä¸ºåˆå§‹å€¼ */</span><br>   <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">       <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123; number &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">       <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> ()=&gt;</span> &#123;</span><br><span class="language-xml">         setNumber(number+1)</span><br><span class="language-xml">         console.log(number) /* è¿™é‡Œçš„numberæ˜¯ä¸èƒ½å¤Ÿå³ä½¿æ”¹å˜çš„  */</span><br><span class="language-xml">       &#125; &#125; &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>``useState æ³¨æ„äº‹é¡¹`ï¼š</strong></p><p>â‘  åœ¨å‡½æ•°ç»„ä»¶ä¸€æ¬¡æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œstate çš„å€¼æ˜¯å›ºå®šä¸å˜çš„</p><p>â‘¡ å¦‚æœä¸¤æ¬¡ <code>dispatchAction</code> ä¼ å…¥ç›¸åŒçš„ state å€¼ï¼Œé‚£ä¹ˆç»„ä»¶å°±ä¸ä¼šæ›´æ–°</p><p>â‘¢ å½“è§¦å‘ <code>dispatchAction</code> åœ¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è·å–ä¸åˆ°æœ€æ–°çš„ <code>state</code>, åªæœ‰åœ¨ä¸‹ä¸€æ¬¡ç»„ä»¶ rerender ä¸­æ‰èƒ½è·å–åˆ°ã€‚</p><h2 id="useReducer"><code>useReducer</code></h2><p>ç»„ä»¶ä¸­å¯èƒ½æœ‰å¤šä¸ªä½ç½®åŒ…æ‹¬äº†å¯¹æŸä¸ªçŠ¶æ€çš„ä¿®æ”¹æ“ä½œ</p><p><code>useReducer</code>ç”¨äºç»Ÿä¸€ç®¡ç†çŠ¶æ€çš„æ“ä½œæ–¹å¼</p><p>ä½¿ç”¨ <code>useReducer</code> è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºçˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ <code>dispatch</code> è€Œä¸æ˜¯å›è°ƒå‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span>[state,dispatch]= useReducer (countReducer,<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>â‘  æ›´æ–°ä¹‹åçš„ state å€¼ã€‚</p><p>â‘¡ æ´¾å‘æ›´æ–°çš„ dispatch å‡½æ•°, æœ¬è´¨ä¸Šå’Œ <code>useState</code> çš„ dispatchæ˜¯ä¸€æ ·çš„ã€‚</p><p>â‘¢ ä¸€ä¸ªå‡½æ•°<code>countReducer</code> å¸¸è§„reduceré‡Œé¢çš„ state å’Œaction</p><p>å‡†å¤‡ä¸€ä¸ªç”¨æ¥è¿›è¡ŒçŠ¶æ€åŠŸèƒ½ç®¡ç†çš„å‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">countReducer</span> (state,action)<br><span class="hljs-comment">//state reducerç®¡ç†çŠ¶æ€çš„æ˜¯å“ªä¸ª</span><br><span class="hljs-comment">//action å¯¹è¿™ä¸ªçŠ¶æ€è¿›è¡Œå“ªäº›æ“ä½œ</span><br>&#123;<br>    <span class="hljs-keyword">switch</span>(action.<span class="hljs-property">type</span>)<br>    &#123;<br>        <span class="hljs-keyword">case</span><span class="hljs-string">&quot;increment&quot;</span> :<span class="hljs-keyword">return</span> state+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;decrement&quot;</span>:<span class="hljs-keyword">return</span> state-<span class="hljs-number">1</span> <br>        <span class="hljs-attr">default</span>:<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>()<br>    &#125;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> ()<br>&#123;<br>    <span class="hljs-comment">//state çŠ¶æ€å½“å‰å€¼</span><br>    <span class="hljs-comment">//dispatch ç”¨æ¥è¿›è¡ŒçŠ¶æ€ä¿®æ”¹çš„è§¦å‘å™¨ (å‡½æ•°å€¼) </span><br>    <span class="hljs-keyword">const</span> [state,dispath]=<span class="hljs-title function_">useReducer</span>(countReducer,<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleIncrement</span>=(<span class="hljs-params"></span>)=&gt;<span class="hljs-title function_">dispath</span>(&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;increment&quot;</span>&#125;)<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDecrement</span>=(<span class="hljs-params"></span>)=&gt;<span class="hljs-title function_">dispath</span>(&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;decrement&quot;</span>&#125;)<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleIncrement&#125;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;state&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleDecrement&#125;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="useSyncExternalStore"><code>useSyncExternalStore</code></h2><p>ä¸æ‡‚ä»¥åå†è¯´</p><h2 id="useTransition"><code>useTransition</code></h2><p>åˆ«æ€¥</p><h2 id="useDeferredValue"><code>useDeferredValue</code></h2><p>ä½ ä¹Ÿåˆ«æ€¥</p><h2 id="useEffect"><code>useEffect</code></h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> destory<br>&#125;,dep)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°<code>callback</code>è¿”å›çš„ <code>destroy</code>    ä½œä¸ºä¸‹ä¸€æ¬¡<code>callback</code>æ‰§è¡Œä¹‹å‰è°ƒç”¨ ç”¨äºæ¸…æ¥šä¸Šä¸€æ¬¡<code>callback</code>äº§ç”Ÿçš„å‰¯ä½œç”¨</p><p>ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºä¾èµ–é¡¹ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥æœ‰å¤šä¸ªä¾èµ–é¡¹ï¼Œä¾èµ–é¡¹æ”¹å˜ï¼Œæ‰§è¡Œä¸Šä¸€æ¬¡callback è¿”å›çš„ <code>destory</code> ï¼Œå’Œæ‰§è¡Œæ–°çš„ effect ç¬¬ä¸€ä¸ªå‚æ•° callback</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">/* æ¨¡æ‹Ÿæ•°æ®äº¤äº’ */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params">a</span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123; <br>            <span class="hljs-title function_">resolve</span>(&#123;<br>                <span class="hljs-attr">name</span>:a,<br>                <span class="hljs-attr">age</span>:<span class="hljs-number">16</span>,<br>            &#125;) <br>        &#125;,<span class="hljs-number">500</span>)<br>    &#125;)<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Demo</span> = (<span class="hljs-params">&#123; a &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> [ userMessage , setUserMessage ] :any= <span class="hljs-title function_">useState</span>(&#123;&#125;)<br>    <span class="hljs-keyword">const</span> div= <span class="hljs-title function_">useRef</span>()<br>    <span class="hljs-keyword">const</span> [number, setNumber] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">/* æ¨¡æ‹Ÿäº‹ä»¶ç›‘å¬å¤„ç†å‡½æ•° */</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> =(<span class="hljs-params"></span>)=&gt;&#123;&#125;<br>  <span class="hljs-comment">/* useEffectä½¿ç”¨ ï¼Œè¿™é‡Œå¦‚æœä¸åŠ é™åˆ¶ ï¼Œä¼šæ˜¯å‡½æ•°é‡å¤æ‰§è¡Œï¼Œé™·å…¥æ­»å¾ªç¯*/</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-comment">/* è¯·æ±‚æ•°æ® */</span><br>        <span class="hljs-title function_">getUserInfo</span>(a).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;<br>            <span class="hljs-title function_">setUserMessage</span>(res)<br>        &#125;)<br>        <span class="hljs-comment">/* å®šæ—¶å™¨ å»¶æ—¶å™¨ç­‰ */</span><br>        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">666</span>),<span class="hljs-number">1000</span>)<br>        <span class="hljs-comment">/* æ“ä½œdom  */</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">current</span>) <span class="hljs-comment">/* div */</span><br>        <span class="hljs-comment">/* äº‹ä»¶ç›‘å¬ç­‰ */</span><br>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, handleResize)<br>        <span class="hljs-comment">/* æ­¤å‡½æ•°ç”¨äºæ¸…é™¤å‰¯ä½œç”¨ */</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-built_in">clearInterval</span>(timer) <br>            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, handleResize)<br>        &#125;<br>          <span class="hljs-comment">/* åªæœ‰å½“props-&gt;aå’Œstate-&gt;numberæ”¹å˜çš„æ—¶å€™ ,useEffectå‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œ ï¼Œå¦‚æœæ­¤æ—¶æ•°ç»„ä¸ºç©º[]ï¼Œè¯æ˜å‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ç›¸å½“äºcomponentDidMount */</span><br>    &#125;,[ a ,number ])<br>    <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;div&#125;</span> &gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123; userMessage.name &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123; userMessage.age &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> ()=&gt;</span> setNumber(1) &#125; &gt;&#123; number &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šåœ¨ <code>useEffect</code> ä¸­åšçš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>â‘  è¯·æ±‚æ•°æ®ã€‚</li><li>â‘¡ è®¾ç½®å®šæ—¶å™¨,å»¶æ—¶å™¨ç­‰ã€‚</li><li>â‘¢ æ“ä½œ <code>Dom </code></li><li>â‘£ æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨, äº‹ä»¶ç»‘å®š</li><li>â‘¤ è¿˜å¯ä»¥æ¸…é™¤å®šæ—¶å™¨ï¼Œå»¶æ—¶å™¨ï¼Œè§£ç»‘äº‹ä»¶ç›‘å¬å™¨ç­‰ã€‚</li></ul><h2 id="useLayoutEffect"><code>useLayoutEffect</code></h2><p>åˆ«æ€¥</p><h2 id="useInsertionEffect"><code>useInsertionEffect</code></h2><p>ä½ ä¹Ÿåˆ«æ€¥</p><h2 id="useContext"><code>useContext</code></h2><p>å¯ä»¥ç”¨<code>useContext</code> æ¥è·å–çˆ¶çº§ç»„ä»¶ä¼ é€’è¿‡æ¥çš„<code>context</code>çš„å€¼</p><p>è¿™ä¸ªå½“å‰å€¼å°±æ˜¯æœ€è¿‘çš„çˆ¶çº§ç»„ä»¶<code>Provider</code> è®¾ç½®çš„<code>value</code>å€¼ ,</p><p><code>useContext</code> å‚æ•°ä¸€èˆ¬æ˜¯ç”±<code>createContext</code>æ–¹å¼åˆ›å»ºçš„,ä¹Ÿå¯ä»¥çˆ¶çº§ä¸Šä¸‹æ–‡<code>context</code>ä¼ é€’çš„(å‚æ•°æ˜¯<code>context</code> )</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useContext</span>(context)<br></code></pre></td></tr></table></figure><p><code>useContext</code> æ¥å—ä¸€ä¸ªå‚æ•° ä¸€èˆ¬éƒ½æ˜¯ context å¯¹è±¡ï¼Œè¿”å›å€¼ä¸º context å¯¹è±¡å†…éƒ¨ä¿å­˜çš„ value å€¼</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">/* ç”¨useContextæ–¹å¼ */</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">DemoContext</span> = (<span class="hljs-params"></span>)=&gt; &#123;<br>    <span class="hljs-keyword">const</span> value= <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">Context</span>)<br>    <span class="hljs-comment">/* my name is alien */</span><br><span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> my name is &#123; value.name &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&#125;<br><br><span class="hljs-comment">/* ç”¨Context.Consumer æ–¹å¼ */</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">DemoContext1</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Context.Consumer</span>&gt;</span></span><br><span class="language-xml">         &#123;/*  my name is alien  */&#125;</span><br><span class="language-xml">        &#123; (value)=&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> my name is &#123; value.name &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> &#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Consumer</span>&gt;</span></span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ()=&gt;&#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Context.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">name:</span>&#x27;<span class="hljs-attr">alien</span>&#x27; , <span class="hljs-attr">age:18</span> &#125;&#125; &gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">DemoContext</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">DemoContext1</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Provider</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="useRef"><code>useRef</code></h2><p><code>useRef</code> å¯ä»¥ç”¨æ¥è·å–å…ƒç´ ï¼Œç¼“å­˜çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªçŠ¶æ€ <code>initState</code> ä½œä¸ºåˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ª ref å¯¹è±¡ cur, cur ä¸Šæœ‰ä¸€ä¸ª current å±æ€§å°±æ˜¯ ref å¯¹è±¡éœ€è¦è·å–çš„å†…å®¹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> cur = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(initState)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cur.<span class="hljs-property">current</span>)<br></code></pre></td></tr></table></figure><p><code>useRef</code> åˆ›å»ºçš„ ref å¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œè€Œ <code>useRef()</code> å’Œè‡ªå»ºä¸€ä¸ª <code>&#123;current: ...&#125;</code> å¯¹è±¡çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œ<code>useRef</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›åŒä¸€ä¸ª ref å¯¹è±¡</p><h3 id="useRef-åŸºç¡€ç”¨æ³•ï¼š"><code>useRef åŸºç¡€ç”¨æ³•ï¼š</code></h3><p><code>useRef</code>æ¥è·å–DOMèŠ‚ç‚¹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">DemoUseRef</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>    <span class="hljs-keyword">const</span> dom= <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handerSubmit</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>        <span class="hljs-comment">/*  &lt;div &gt;è¡¨å•ç»„ä»¶&lt;/div&gt;  dom èŠ‚ç‚¹ */</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dom.<span class="hljs-property">current</span>)<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ref æ ‡è®°å½“å‰domèŠ‚ç‚¹ */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;dom&#125;</span> &gt;</span>è¡¨å•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span>=&gt;</span>handerSubmit()&#125; &gt;æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> </span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>useRef ä¿å­˜çŠ¶æ€</p><p>å¯ä»¥åˆ©ç”¨ useRef è¿”å›çš„ ref å¯¹è±¡æ¥ä¿å­˜çŠ¶æ€ï¼Œåªè¦å½“å‰ç»„ä»¶ä¸è¢«é”€æ¯ï¼Œé‚£ä¹ˆçŠ¶æ€å°±ä¼šä¸€ç›´å­˜åœ¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> status = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>)<br><span class="hljs-comment">/* æ”¹å˜çŠ¶æ€ */</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChangeStatus</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  status.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="useImperativeHandle"><code>useImperativeHandle</code></h2><p>è¿™ä»€ä¹ˆç©æ„</p><h2 id="useMemo"><code>useMemo</code></h2><p>useMemo å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ render ä¸Šä¸‹æ–‡ä¸­åŒæ­¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°é€»è¾‘ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä½œä¸ºä¸€ä¸ªæ–°çš„çŠ¶æ€ç¼“å­˜èµ·æ¥ã€‚é‚£ä¹ˆè¿™ä¸ª hooks çš„ä½œç”¨å°±æ˜¾è€Œæ˜“è§äº†</p><p>åœºæ™¯ä¸€ï¼šåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œéœ€è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­è¿›è¡Œå¤§é‡çš„é€»è¾‘è®¡ç®—ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸æœŸæœ›æ¯ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ¸²æŸ“éƒ½æ‰§è¡Œè¿™äº›å¤æ‚çš„è®¡ç®—é€»è¾‘ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨ useMemo çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œè¿™äº›é€»è¾‘ï¼Œç„¶åæŠŠå¾—åˆ°çš„äº§ç‰©ï¼ˆè®¡ç®—ç»“æœï¼‰ç¼“å­˜èµ·æ¥å°±å¯ä»¥äº†ã€‚</p><p>åœºæ™¯äºŒï¼šReact åœ¨æ•´ä¸ªæ›´æ–°æµç¨‹ä¸­ï¼Œ<code>diff</code> èµ·åˆ°äº†å†³å®šæ€§çš„ä½œç”¨ï¼Œæ¯”å¦‚ <code>Context</code> ä¸­çš„ <code>provider</code> é€šè¿‡ <code>diff value</code> æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°</p><h3 id="useMemo-åŸºç¡€ä»‹ç»ï¼š"><code>useMemo åŸºç¡€ä»‹ç»ï¼š</code></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> cacheSomething = <span class="hljs-title function_">useMemo</span>(create,deps)<br></code></pre></td></tr></table></figure><p>â‘  createï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºç¼“å­˜å€¼ï¼Œå¦‚ä¸Š demo ä¸­æŠŠ Children å¯¹åº”çš„ element å¯¹è±¡ï¼Œç¼“å­˜èµ·æ¥ã€‚</p><p>â‘¡ depsï¼š ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾å½“å‰ useMemo çš„ä¾èµ–é¡¹ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå¯¹æ¯” deps ä¾èµ–é¡¹é‡Œé¢çš„çŠ¶æ€ï¼Œæ˜¯å¦æœ‰æ”¹å˜ï¼Œå¦‚æœæœ‰æ”¹å˜é‡æ–°æ‰§è¡Œ create ï¼Œå¾—åˆ°æ–°çš„ç¼“å­˜å€¼ã€‚</p><p>â‘¢ <code>cacheSomething</code>ï¼šè¿”å›å€¼ï¼Œæ‰§è¡Œ create çš„è¿”å›å€¼ã€‚å¦‚æœ deps ä¸­æœ‰ä¾èµ–é¡¹æ”¹å˜ï¼Œè¿”å›çš„é‡æ–°æ‰§è¡Œ create äº§ç”Ÿçš„å€¼ï¼Œå¦åˆ™å–ä¸Šä¸€æ¬¡ç¼“å­˜å€¼ã€‚</p><h3 id="useMemo-åŸºç¡€ç”¨æ³•ï¼š"><code>useMemo åŸºç¡€ç”¨æ³•ï¼š</code></h3><p>æ´¾ç”Ÿæ–°çŠ¶æ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Scope</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> keeper = <span class="hljs-title function_">useKeep</span>()<br>    <span class="hljs-keyword">const</span> &#123; cacheDispatch, cacheList, hasAliveStatus &#125; = keeper<br>   <br>    <span class="hljs-comment">/* é€šè¿‡ useMemo å¾—åˆ°æ´¾ç”Ÿå‡ºæ¥çš„æ–°çŠ¶æ€ contextValue  */</span><br>    <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">cacheDispatch</span>: cacheDispatch.<span class="hljs-title function_">bind</span>(keeper),<br>            <span class="hljs-attr">hasAliveStatus</span>: hasAliveStatus.<span class="hljs-title function_">bind</span>(keeper),<br>            <span class="hljs-attr">cacheDestory</span>: <span class="hljs-function">(<span class="hljs-params">payload</span>) =&gt;</span> cacheDispatch.<span class="hljs-title function_">call</span>(keeper, &#123; <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">ACTION_DESTORY</span>, payload &#125;)<br>        &#125;<br>      <br>    &#125;, [keeper])<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeepaliveContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;contextValue&#125;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">KeepaliveContext.Provider</span>&gt;</span></span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šé€šè¿‡ <code>useMemo</code> å¾—åˆ°æ´¾ç”Ÿå‡ºæ¥çš„æ–°çŠ¶æ€ <code>contextValue</code> ï¼Œåªæœ‰ keeper å˜åŒ–çš„æ—¶å€™ï¼Œæ‰æ”¹å˜ Provider çš„ value</p><h2 id="useCallback"><code>useCallback</code></h2><p>è¿™ä¸ªå¥½åƒæœ‰ç‚¹æ€¥ ä½†æ˜¯å…ˆåˆ«æ€¥</p><h2 id="useDebugValue"><code>useDebugValue</code></h2><p>è¿™ä»€ä¹ˆç©æ„</p><h2 id="useId"><code>useId</code></h2><p>çœ‹ä¸æ‡‚æ€å¯†è¾¾</p><h2 id="è‡ªå®šä¹‰hook"><code>è‡ªå®šä¹‰hook</code></h2><p>åˆ«æ€¥</p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç»„ä»¶é€šä¿¡</title>
    <link href="/2024/02/17/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"/>
    <url>/2024/02/17/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<h1><code>Reactç»„ä»¶é€šä¿¡</code></h1><p>ç»„ä»¶</p><p><code>dom</code>ç»„ä»¶ <code>react</code>æ”¯æŒçš„<code>html</code>å’Œ<code>svg</code>æ ‡ç­¾</p><h3 id="props"><code>props</code></h3><p>ä»€ä¹ˆæ˜¯<code>props</code>  <code>html</code>å±æ€§çš„åŠŸèƒ½</p><p><code>dom</code>å±æ€§</p><p>ç±»å <code>className</code></p><p>æ ·å¼</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">style=&#123;<br>    &#123;<br>    <span class="hljs-attr">width</span>:<span class="hljs-string">&#x27;100vh&#x27;</span>,<br>    <span class="hljs-attr">height</span>:<span class="hljs-number">100</span>,<br>    <span class="hljs-attr">backgroundColor</span>:<span class="hljs-string">&#x27;grey&#x27;</span><br>    <span class="hljs-comment">//å¸¦-çš„å†™æˆé©¼å³°</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä¹¦å†™å˜é‡</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> imgStyle=&#123;<br>    <span class="hljs-attr">width</span>:<span class="hljs-string">&#x27;100vh&#x27;</span>,<br>    <span class="hljs-attr">height</span>:<span class="hljs-number">100</span>,<br>    <span class="hljs-attr">backgroundColor</span>:<span class="hljs-string">&#x27;grey&#x27;</span><br>&#125;<br><span class="hljs-keyword">return</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;imgStyle&#125;/</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br></code></pre></td></tr></table></figure><p><code>jsx</code>å±•å¼€è¯­æ³•</p><p>æŠŠæ‰€æœ‰å±æ€§ä¹¦å†™ä¸ºä¸€ä¸ªå˜é‡</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> image <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logo.svg&#x27;</span><br><span class="hljs-keyword">const</span> imgData=&#123;<br>    className=<span class="hljs-string">&#x27;small&#x27;</span>,<br>    <span class="hljs-attr">style</span>:&#123;<br>    <span class="hljs-attr">width</span>:<span class="hljs-string">&#x27;100vh&#x27;</span>,<br>    <span class="hljs-attr">height</span>:<span class="hljs-number">100</span>,<br>    <span class="hljs-attr">backgroundColor</span>:<span class="hljs-string">&#x27;grey&#x27;</span><br>&#125;    &#125;<br><span class="hljs-keyword">return</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span></span></span><br><span class="hljs-tag"><span class="language-xml">            //<span class="hljs-attr">srcæ ‡ç­¾ä¸èƒ½æå‡º</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;image&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            &#123;<span class="hljs-attr">...imgData</span>&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>)<br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰ç»„ä»¶<code>reactçš„props</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Artcile</span>(<span class="hljs-params"></span>)<br>&#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>)<br>&#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span>/&gt;</span>                                  </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span>/&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br><br><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœå¯¹ç»„ä»¶çš„ç»“æ„é€»è¾‘ æ ·å¼å¤ç”¨</p><p>å†…å®¹ä¸å¤ç”¨çš„è¯ å¯ä»¥å†™æˆ</p><p>å¯¹ç»„ä»¶å†…å®¹å®šåˆ¶</p><p>æ­¥éª¤</p><p>1.å¯¹çˆ¶å…ƒç´ (ä¸Šé¢çš„<code>App</code>)è¿›è¡Œè¯·æ±‚ è¯·æ±‚åŠŸèƒ½æ‰€éœ€è¦çš„æ•°æ®</p><p>2.åˆ›å»ºç»„ä»¶</p><p>3.æŠŠæ•°æ®ä¼ ç»™ç»„ä»¶</p><p>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ æ™®é€šå€¼</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Detail</span>(<span class="hljs-params"></span>)<br>&#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;content&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çŠ¶æ€:&#123;active?&#x27;æ˜¾ç¤º&#x27;:&#x27;éšè—&#x27;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Artcile</span>(<span class="hljs-params">&#123;acticleData&#125;</span>)<br><span class="hljs-comment">//é‡‡ç”¨è§£æ„</span><br>&#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Detail</span> &#123;<span class="hljs-attr">...articleData</span>&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">                &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Detail</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>    <span class="hljs-comment">//æ­¤æ—¶Articleæ²¡ç”¨åˆ°contentå’Œactive</span><br>    <span class="hljs-comment">//ä½†æ˜¯Detailç”¨åˆ°äº† å¯ä»¥åœ¨Articleå…ˆä¸ä¼  ç›´æ¥ä¼ ç»™Detail</span><br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>)<br>&#123;<span class="hljs-keyword">const</span> articleData=&#123;<br>    <span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-attr">detailData</span>:&#123;<br>    <span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-attr">active</span>:<span class="hljs-literal">true</span><br>&#125;<br>&#125;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span></span></span><br><span class="hljs-tag"><span class="language-xml">            &#123;<span class="hljs-attr">...acticleData</span>&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;2&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;2&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">active</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Article</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;3&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;3&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">active</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span>                                 </span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br><br><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ <code>jsx</code></p><p>æ’æ§½ <code>jsx</code>ä½œä¸º<code>props</code>ä¼ ç»™å­ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">List</span> (&#123;children,title,footer=       <br>                <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é»˜è®¤åº•éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>&#125;)<br><span class="hljs-comment">//æ­¤æ—¶footeréœ€è¦ä¸€ä¸ªé»˜è®¤å€¼</span><br>&#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">            &#123;children&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;footer&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/&gt;</span></span><br>)<br>&#125;<br><span class="hljs-comment">//å¦‚æœéœ€è¦åœ¨åˆ—è¡¨åŠ å…ƒç´ </span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> ()<br>&#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        //ä¹‹å‰æ˜¯é€šè¿‡propsä¼ é€’ ç°åœ¨é€šè¿‡children</span><br><span class="language-xml">        //è‡ªåŠ¨æ¥å—ç»„ä»¶å¼€å§‹å’Œæ¥å—çš„å†…å®¹</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">List</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;åˆ—è¡¨1&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">footer</span>=<span class="hljs-string">&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                &lt;<span class="hljs-attr">p</span>&gt;</span>è¿™æ˜¯åº•éƒ¨å†…å®¹1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            &#125;&gt;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">List</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;åˆ—è¡¨2&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">footer</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">p</span>&gt;</span>è¿™æ˜¯åº•éƒ¨å†…å®¹2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&#125;&gt;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">List</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;åˆ—è¡¨3&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            //<span class="hljs-attr">æ­¤æ—¶æ²¡è®¾ç½®footerä¼šæ˜¾ç¤ºé»˜è®¤å€¼</span></span></span><br><span class="hljs-tag"><span class="language-xml">            &gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹X<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹Y<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…å®¹Z<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼</p><p>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„è®¾ç½® å†é€šè¿‡äº‹ä»¶è§¦å‘åå‘çˆ¶ç»„ä»¶ä¼ é€’å‚æ•°æ¥è®¾ç½®</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Detail</span> (&#123;onActive&#125;)&#123;<br>    <span class="hljs-comment">//å¸Œæœ›å‘Šè¯‰çˆ¶ç»„ä»¶å†…éƒ¨çŠ¶æ€ åœ¨handleClickå‡½æ•°ä½¿ç”¨çš„å˜æ›´ æ‰€ä»¥åœ¨handleClickåŠ å…¥onACtiveäº‹ä»¶å¹¶ä¼ å…¥status</span><br>    <span class="hljs-keyword">const</span> [status,setStatus]=<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>)<br>    &#123;<br>        <span class="hljs-title function_">setStatus</span>(!status)<br>        <span class="hljs-title function_">onActive</span>(status)<br>        <span class="hljs-comment">//æ¯æ¬¡çŠ¶æ€å˜æ›´ ä¼ é€’ä¸€ä¸ªæ–°å€¼ ä¼ é€’åˆ°function App()</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> </span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;display;staus?</span></span></span><br><span class="hljs-tag"><span class="language-xml">                    &#x27;<span class="hljs-attr">block</span>&#x27;<span class="hljs-attr">:</span>&#x27;<span class="hljs-attr">none</span>&#x27;&#125;&#125;&gt;</span></span><br><span class="language-xml">                Detailçš„å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleActive</span>(<span class="hljs-params">status</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(status)<br>    &#125;<br>    <span class="hljs-keyword">return</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        //å¦‚æœå¸Œæœ›çˆ¶ç»„ä»¶èƒ½æ¥å—å­ç»„ä»¶çš„çŠ¶æ€çš„è¯éœ€è¦ç»™å­ç»„ä»¶è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§(onActive)å¯ä»¥ç†è§£ä¸ºäº‹ä»¶ ç”¨ä»£ç å†³å®šåœ¨ä½•æ—¶è§¦å‘</span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Detail</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onActive</span>=<span class="hljs-string">&#123;handleActive&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Detail</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    <br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒçº§ç»„ä»¶ä¼ å€¼</p><p>åœ¨çˆ¶ç»„ä»¶è¿›è¡Œä¸­è½¬</p><p>å¤šå±‚çº§ä¼ å€¼</p><p>æä¾›äº†ä¸€ä¸ªå¤šçº§å±æ€§ç©¿é€çš„hook</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Section</span> (&#123;children&#125;)<br>&#123;<br>    <span class="hljs-comment">//è·å–ä¸Šä¸€çº§level</span><br>    <span class="hljs-keyword">const</span> level=<span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">LevelContext</span>)<br>    <span class="hljs-keyword">return</span> (<br>        <br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;section&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">LevelContect.Provider</span> </span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">level</span>+<span class="hljs-attr">1</span>      </span></span><br><span class="hljs-tag"><span class="language-xml">                &#125;&gt;</span></span><br><span class="language-xml">             &#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">LevelContect.Provider</span>&gt;</span></span><br><span class="language-xml">           </span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    )<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Heading</span>(<span class="hljs-params">&#123;level,children&#125;</span>)<br>&#123;<br>    <span class="hljs-keyword">const</span> level=<span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">LevelContext</span>)<br><span class="hljs-comment">//è®¾ç½®ä¹‹åæ­¤æ—¶å…¨ä¸ºh1(è‹¥é»˜è®¤å€¼æ˜¯1)</span><br><span class="hljs-comment">//ä½†æ˜¯h1å’ŒsectionåµŒå¥—ä¼šä½¿h1æ˜¾ç¤ºå‡ºä»å¤§åˆ°å°çš„æ ·å¼</span><br>    <span class="hljs-keyword">switch</span>(level)&#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span></span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>            <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h6</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span></span><br>    &#125; <br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">LevelContext</span>=<span class="hljs-title function_">createContext</span>(<span class="hljs-number">0</span>)<br><span class="hljs-comment">//ä¸èƒ½ç›´æ¥ç”¨ é€šè¿‡useContext</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> ()&#123;<br>    <span class="hljs-keyword">return</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>ä¸»æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å‰¯æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å‰¯æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å‰¯æ ‡é¢˜ <span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span>&gt;</span>å­æ ‡<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span>&gt;</span>å­æ ‡<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­æ ‡<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>        </span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span>&gt;</span>å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­å­æ ‡é¢˜ <span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­å­æ ‡é¢˜ <span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> &gt;</span>å­å­å­å­æ ‡é¢˜ <span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>  </span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml">                      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Ps:</code>å¯èƒ½ä¼šå‡ºç°éƒ½æ˜¯<code>h1</code>æ ‡ç­¾ä½†æ˜¯å¤§å°å´ä¸åŒçš„æƒ…å†µ</p><p><code>section</code> å’Œ<code>h1</code>åµŒå¥—æ—¶å€™è‡ªç„¶å‡ºç°çš„çŠ¶æ€</p><p>å¦‚ä½•æ›´æ”¹<code>useContext</code>èƒ½å¤Ÿè·å–åˆ°çš„levelä¿¡æ¯</p><p><code>useContext</code>åˆ›å»ºçš„å¯¹è±¡<code>LevelContext</code>æä¾›ä¸€ä¸ª<code>Provider</code></p><p>ç»™<code>context</code>æä¾›å€¼çš„ä¸€ä¸ªæ–¹å¼</p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Javascript-classç±»</title>
    <link href="/2023/12/16/Javascript-class%E7%B1%BB/"/>
    <url>/2023/12/16/Javascript-class%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h1><code>Javascript</code>-classç±»</h1><h3 id="ç±»çš„å®šä¹‰">ç±»çš„å®šä¹‰</h3><p>æœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†</p><p>ç±»è¡¨è¾¾å¼å’Œç±»å£°æ˜</p><p>æ¯ä¸ªç±»ä¸­åŒ…å«äº†ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³• <code>constructor()</code>ï¼Œå®ƒæ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™ç§æ–¹æ³•ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªç”± <code>class</code> åˆ›å»ºçš„å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//ç±»å£°æ˜</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age</span>)<br>    &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>=age;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//ç±»è¡¨è¾¾å¼</span><br><span class="hljs-keyword">const</span> B=<span class="hljs-keyword">class</span>&#123;<br><span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age</span>)<br>    &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>=age<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šåˆ›é€ äº†ä¸€ä¸ªç±»  å«<code>A</code></p><p>åˆå§‹åŒ–äº†ä¸¤ä¸ªå‚æ•° <code>name , age</code></p><h3 id="ä½¿ç”¨ç±»">ä½¿ç”¨ç±»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> a1=<span class="hljs-keyword">new</span> A (<span class="hljs-string">&#x27;shanyujia&#x27;</span>,<span class="hljs-number">18</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a1)<br><span class="hljs-comment">// =&gt;&#123; name: &#x27;shanyujia&#x27;, age: 18 &#125;</span><br></code></pre></td></tr></table></figure><p>åŸºäºè¿™ä¸ªç±»å»åˆ›é€ è¿™ä¸ªç±»çš„å®ä¾‹</p><p>åŸºäºè¿™ä¸ªå¯¹è±¡ç”Ÿæˆ ç»“æ„ç›¸åŒ å†…éƒ¨æ•°æ®ä¸åŒçš„å¯¹è±¡å½¢å¼</p><h3 id="è‡ªå®šä¹‰æ–¹æ³•">è‡ªå®šä¹‰æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age</span>)<br>      &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>=age;<br>      &#125;<br>    <span class="hljs-title function_">introduce</span>(<span class="hljs-params"></span>)&#123;<br>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æˆ‘çš„åå­—æ˜¯<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.name&#125;</span>,æˆ‘çš„å¹´é¾„æ˜¯<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.age&#125;</span> `</span>)<br>    &#125;<br>&#125;<br>a1.<span class="hljs-title function_">introduce</span>()<br><span class="hljs-comment">// =&gt; æˆ‘çš„åå­—æ˜¯shanyujia,æˆ‘çš„å¹´é¾„æ˜¯18</span><br></code></pre></td></tr></table></figure><h3 id="ç±»çš„ç»§æ‰¿">ç±»çš„ç»§æ‰¿</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">A</span>&#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name,age,sex</span>)&#123;<br>        <span class="hljs-comment">//å¦‚æœå¸Œæœ›ç»§æ‰¿Açš„å±æ€§ å†™ä¸€ä¸ªsuperçš„è°ƒç”¨</span><br>        <span class="hljs-comment">//è°ƒç”¨çˆ¶ç±»çš„constructor å°†å±æ€§ä¹Ÿåœ¨Bç±»ç”Ÿæˆ</span><br>    <span class="hljs-variable language_">super</span>(name,age)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sex</span>=sex<br>    &#125;<br>    <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ä½ å¥½æˆ‘æ˜¯&#x27;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">const</span> b1=<span class="hljs-keyword">new</span> <span class="hljs-title function_">B</span>(<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b1)<br>b1.<span class="hljs-title function_">sayHello</span>()<br>b1.<span class="hljs-title function_">introduce</span>()<br><span class="hljs-comment">/*&#123; name: &#x27;å¼ ä¸‰&#x27;, age: 20, sex: &#x27;ç”·&#x27; &#125;</span><br><span class="hljs-comment">æˆ‘çš„åå­—æ˜¯å¼ ä¸‰,æˆ‘çš„å¹´é¾„æ˜¯20</span><br><span class="hljs-comment">ä½ å¥½æˆ‘æ˜¯å¼ ä¸‰*/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Javascript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Javascript å‡½æ•°</title>
    <link href="/2023/12/09/Javascript-%E5%87%BD%E6%95%B0/"/>
    <url>/2023/12/09/Javascript-%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1>JavaScript å‡½æ•°</h1><h3 id="1-typeof">1.<code>typeof</code></h3><p>ä¼šäº§ç”Ÿä¸€ä¸ªå­—ç¬¦ä¸²çš„å€¼ï¼Œå†…å®¹æ˜¯ç»™å®šå€¼çš„å…·ä½“ç±»å‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-number">4.5</span>)<br><span class="hljs-comment">// â†’ number</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-string">&quot;x&quot;</span>)<br><span class="hljs-comment">// â†’ string</span><br></code></pre></td></tr></table></figure><h3 id="2-prompt">2.<code>prompt</code></h3><p>åŒ…å«ä¸€å‡½æ•°ï¼Œä¸ªæ˜¾ç¤ºä¸€ä¸ªå°å¯¹è¯æ¡†ï¼Œè¯·æ±‚ç”¨æˆ·è¾“å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">prompt</span>(<span class="hljs-string">&quot;Enter passcode&quot;</span>);<br></code></pre></td></tr></table></figure><h3 id="3-cosole-log">3.<code>cosole.log</code></h3><p>è¾“å‡ºå€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> x = <span class="hljs-number">30</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;the value of x is&quot;</span>, x);<br><span class="hljs-comment">// â†’ the value of x is 30</span><br></code></pre></td></tr></table></figure><h3 id="4-Math-max">4.<code>Math.max</code></h3><p>æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°å¹¶è¿”å›æœ€å¤§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>));<br><span class="hljs-comment">// â†’ 4</span><br></code></pre></td></tr></table></figure><h3 id="5-Math-min">5.<code>Math.min</code></h3><p>è·ŸMath.maxç›¸å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>) + <span class="hljs-number">100</span>);<br><span class="hljs-comment">// â†’ 102</span><br></code></pre></td></tr></table></figure><h3 id="6-Number-isNaN">6.<code>Number.isNaN</code></h3><p>ä»…å½“å®ƒç»™å‡ºçš„å‚æ•°æ˜¯<code>NaN</code>æ—¶æ‰è¿”å›<code>true</code></p><p>å½“ä½ ç»™å®ƒä¸€ä¸ªä¸ä»£è¡¨æœ‰æ•ˆæ•°å­—çš„å­—ç¬¦ä¸²æ—¶</p><p><code>Number</code>å‡½æ•°æ°å¥½è¿”å›<code>NaN</code></p><h3 id="7-å‡½æ•°å®šä¹‰">7.å‡½æ•°å®šä¹‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>)<br>&#123;<br><span class="hljs-keyword">return</span> x*x;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥å…³é”®å­—<code>function</code>èµ·å§‹çš„è¡¨è¾¾å¼åˆ›å»º</p><p>å‡½æ•°æœ‰ä¸€ç»„å‚æ•°ï¼ˆä¾‹å­ä¸­åªæœ‰<code>x</code>ï¼‰å’Œä¸€ä¸ªä¸»ä½“</p><p>å®ƒåŒ…å«è°ƒç”¨è¯¥å‡½æ•°æ—¶è¦æ‰§è¡Œçš„è¯­å¥</p><p><code>return</code> å†³å®š å‡½æ•°è¿”å›å€¼</p><p>æ²¡æœ‰<code>return</code>çš„å‡½æ•° è¿”å›<code>undefined</code></p><h3 id="8-ç®­å¤´å‡½æ•°">8.ç®­å¤´å‡½æ•°</h3><p><code>=&gt;</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">square1</span> = (<span class="hljs-params">x</span>) =&gt; &#123; <span class="hljs-keyword">return</span> x * x; &#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">square2</span> = x =&gt; x * x;<br></code></pre></td></tr></table></figure><p>ç®­å¤´å‡ºç°åœ¨å‚æ•°åˆ—è¡¨ä¹‹å,ç„¶åæ˜¯å‡½æ•°ä¸»ä½“</p><p>è¡¨è¾¾çš„æ„æ€ç±»ä¼¼äº è¿™ä¸ªè¾“å…¥(å‚æ•°)äº§ç”Ÿè¿™ä¸ªç»“æœ(ä¸»ä½“)</p><h3 id="9-push">9.push</h3><p>å°†å€¼æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> sequence = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>sequence.<span class="hljs-title function_">push</span>(<span class="hljs-number">4</span>);<br>sequence.<span class="hljs-title function_">push</span>(<span class="hljs-number">5</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sequence);<br><span class="hljs-comment">// â†’ [1, 2, 3, 4, 5]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sequence.<span class="hljs-title function_">pop</span>());<br><span class="hljs-comment">// â†’ 5</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sequence);<br><span class="hljs-comment">// â†’ [1, 2, 3, 4]</span><br></code></pre></td></tr></table></figure><h3 id="10-pop"><code>10.pop</code></h3><p>ä¸pushç›¸å åˆ é™¤æ•°ç»„ä¸­æœ€åçš„ä¸€ä¸ªå€¼å¹¶å°†å…¶è¿”å›</p><h3 id="11-delete"><code>11.delete</code></h3><p>ä¸€å…ƒè¿ç®—ç¬¦</p><p>å½“åº”ç”¨äºå¯¹è±¡å±æ€§æ—¶ï¼Œå°†ä»å¯¹è±¡ä¸­åˆ é™¤æŒ‡å®šçš„å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> anObject = &#123;<span class="hljs-attr">left</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">2</span>&#125;;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(anObject.<span class="hljs-property">left</span>);<br><span class="hljs-comment">// â†’ 1</span><br><span class="hljs-keyword">delete</span> anObject.<span class="hljs-property">left</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(anObject.<span class="hljs-property">left</span>);<br><span class="hljs-comment">// â†’ undefined</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;left&quot;</span> <span class="hljs-keyword">in</span> anObject);<br><span class="hljs-comment">// â†’ false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;right&quot;</span> <span class="hljs-keyword">in</span> anObject);<br><span class="hljs-comment">// â†’ true</span><br></code></pre></td></tr></table></figure><h3 id="12-in"><code>12.in</code></h3><p>äºŒå…ƒè¿ç®—ç¬¦  ä¼šå‘Šè¯‰ä½ è¯¥å¯¹è±¡æ˜¯å¦å…·æœ‰åç§°ä¸ºå®ƒçš„å±æ€§</p><p>å°†å±æ€§è®¾ç½®ä¸º undefined å’Œå®é™…åˆ é™¤å®ƒçš„åŒºåˆ«åœ¨äº</p><p>åœ¨è®¾ç½®ä¸ºundefinedçš„æ—¶å€™ å¯¹è±¡ä»ç„¶å…·æœ‰å±æ€§ åªæ˜¯æ²¡æœ‰æ„ä¹‰</p><p>åˆ é™¤å®ƒæ—¶ å±æ€§ä¸å†å­˜åœ¨ <code>in</code> ä¼šè¿”å› <code>false</code></p><h3 id="13-Object-keys">13.<code>Object.keys</code></h3><p>ç»™å®ƒä¸€ä¸ªå¯¹è±¡ å®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ -å¯¹è±¡çš„å±æ€§åç§°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(&#123;<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">2</span>&#125;));<br><span class="hljs-comment">// â†’ [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span><br></code></pre></td></tr></table></figure><h3 id="14-Object-assgin"><code>14.Object.assgin</code></h3><p>å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> objectA = &#123;<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>&#125;;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(objectA, &#123;<span class="hljs-attr">b</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">4</span>&#125;);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(objectA);<br><span class="hljs-comment">// â†’ &#123;a: 1, b: 3, c: 4&#125;</span><br></code></pre></td></tr></table></figure><h3 id="15-Math-sqrt"><code>15.Math.sqrt</code></h3><p>å¹³æ–¹æ ¹å‡½æ•°</p><h3 id="16-unshift"><code>16.unshift</code></h3><p>åœ¨æ•°ç»„å¼€å¤´æ·»åŠ å…ƒç´ </p><h3 id="17-shift"><code>17.shift</code></h3><p>åœ¨æ•°ç»„çš„å¼€å¤´åˆ é™¤å…ƒç´ </p><p><code>remember(&quot;groceries&quot;)</code>å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ«å°¾</p><p><code>getTask()</code>ä»é˜Ÿåˆ—ä¸­è·å–ï¼ˆå¹¶åˆ é™¤ï¼‰ç¬¬ä¸€ä¸ªé¡¹ç›®</p><p><code>rememberUrgently</code>å‡½æ•°ä¹Ÿæ·»åŠ ä»»åŠ¡ .</p><p>ä½†å°†å…¶æ·»åŠ åˆ°é˜Ÿåˆ—çš„å‰é¢è€Œä¸æ˜¯é˜Ÿåˆ—çš„åé¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> todoList = [];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">remember</span>(<span class="hljs-params">task</span>) &#123;<br>  todoList.<span class="hljs-title function_">push</span>(task);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getTask</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> todoList.<span class="hljs-title function_">shift</span>();<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">rememberUrgently</span>(<span class="hljs-params">task</span>) &#123;<br>  todoList.<span class="hljs-title function_">unshift</span>(task);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="18-lastIndexOf"><code>18.lastIndexOf</code></h3><p>è·Ÿ<code>indexof</code> ç±»ä¼¼  <code>indexof</code>ä»æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æœç´¢</p><p><code>lastIndexOf</code> ä»æœ€åä¸€ä¸ªå…ƒç´ å‘å‰æœç´¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">2</span>));<br><span class="hljs-comment">// â†’ 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-number">2</span>));<br><span class="hljs-comment">// â†’ 3</span><br></code></pre></td></tr></table></figure><h3 id="19-Math">19.<code>Math</code></h3><p><code>Math.max</code>æœ€å¤§å€¼</p><p><code>Math.min</code>æœ€å°å€¼</p><p><code>Math.sqrt</code>å¹³æ–¹æ ¹</p><p><code>Math.random</code>ç”Ÿæˆä¸€ä¸ªéšæœºæ•° èŒƒå›´åœ¨ 0ï¼ˆåŒ…æ‹¬ï¼‰åˆ° 1ï¼ˆä¸åŒ…æ‹¬ï¼‰ä¹‹é—´</p><p><code>Math.PI</code>è¡¨ç¤ºæ•°å­—<code>Ï€</code></p><p><code>Math.floor</code>å‘ä¸‹å–æ•´åˆ°ä¸å½“å‰æ•°å­—æœ€æ¥è¿‘çš„æ•´æ•°</p><p><code>Math.ceil</code>å‘ä¸Šå–æ•´</p><p><code>Math.abs</code>å–æ•°å­—çš„ç»å¯¹å€¼</p><p><code>Math.round</code>å››èˆäº”å…¥</p>]]></content>
    
    
    <categories>
      
      <category>Javascript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>javascript1</title>
    <link href="/2023/11/27/javascript%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2023/11/27/javascript%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h3 id="javascriptç¬¬ä¸€ç« ">javascriptç¬¬ä¸€ç« </h3><h5 id="ä¸€å…ƒè¿ç®—ç¬¦">ä¸€å…ƒè¿ç®—ç¬¦</h5><hr><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-number">4.5</span>)<br> <span class="hljs-comment">//è¾“å‡º number</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-string">&quot;x&quot;</span>)<br><span class="hljs-comment">//è¾“å‡º string</span><br></code></pre></td></tr></table></figure><p>typeofç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²å€¼ å¾—å‡ºä½ ç»™å®ƒçš„å€¼çš„ç±»å‹å</p><h5 id="å¸ƒå°”å€¼">å¸ƒå°”å€¼</h5><p>æœ‰ä¸¤ä¸ªå€¼  <code>true</code> å’Œ <code>false</code></p><p>ç”Ÿæˆå¸ƒå°”å€¼çš„æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span> (<span class="hljs-number">3</span>&gt;<span class="hljs-number">2</span>)<br><span class="hljs-comment">// true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span> (<span class="hljs-number">3</span>&lt;<span class="hljs-number">2</span>)<br><span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><p>ç¬¦å· &gt; å’Œ &lt; è¡¨ç¤º â€œå¤§äºâ€å’Œâ€œå°äºâ€ äºŒå…ƒè¿ç®—ç¬¦</p><p>è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå…¶è¿ç®—æ˜¯å¦ä¸ºçœŸã€‚</p><p>ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ¯”è¾ƒå­—ç¬¦ä¸²</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Aardvark&quot;</span> &lt; <span class="hljs-string">&quot;Zoroaster&quot;</span>)<br><span class="hljs-comment">// â†’ true</span><br></code></pre></td></tr></table></figure><p>åœ¨ JavaScript ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå€¼ä¸ç­‰äºå…¶è‡ªèº«ï¼Œé‚£å°±æ˜¯NaNï¼ˆéæ•°å€¼ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span> (<span class="hljs-title class_">NaN</span> == <span class="hljs-title class_">NaN</span>)<br><span class="hljs-comment">// â†’ false</span><br></code></pre></td></tr></table></figure><p>NaNç”¨äºè¡¨ç¤ºéæ³•è¿ç®—çš„ç»“æœ</p><p>é€»è¾‘è¿ç®—ç¬¦</p><p><code>&amp;&amp;</code> è¿ç®—ç¬¦è¡¨ç¤ºé€»è¾‘ä¸ï¼Œè¯¥è¿ç®—ç¬¦æ˜¯äºŒå…ƒè¿ç®—ç¬¦ï¼Œåªæœ‰å½“èµ‹ç»™å®ƒçš„ä¸¤ä¸ªå€¼å‡ä¸º<code>true</code>æ—¶å…¶ç»“æœæ‰æ˜¯çœŸ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">false</span>)<br><span class="hljs-comment">// â†’ false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-literal">true</span>)<br><span class="hljs-comment">// â†’ true</span><br></code></pre></td></tr></table></figure><p><code>||</code>è¿ç®—ç¬¦è¡¨ç¤ºé€»è¾‘æˆ–ã€‚å½“ä¸¤ä¸ªå€¼ä¸­ä»»æ„ä¸€ä¸ªä¸º<code>true</code>æ—¶ï¼Œç»“æœå°±ä¸ºçœŸ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">false</span> || <span class="hljs-literal">true</span>)<br><span class="hljs-comment">// â†’ true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">false</span> || <span class="hljs-literal">false</span>)<br><span class="hljs-comment">// â†’ false</span><br></code></pre></td></tr></table></figure><p>ä¼˜å…ˆçº§é—®é¢˜</p><p><code>||</code>ä¼˜å…ˆçº§æœ€ä½,å…¶æ¬¡æ˜¯<code>&amp;&amp;</code>,ç„¶åæ˜¯æ¯”è¾ƒè¿ç®—ç¬¦(<code>&gt;,==,&lt;</code>)</p><p>æœ€åæ˜¯å…¶ä»–è¿ç®—ç¬¦</p><p>ä¸‰å…ƒé¢„ç®—ç¬¦</p><p><code>A?B:C</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">true</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">2</span>);<br><span class="hljs-comment">// â†’ 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">false</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">2</span>);<br><span class="hljs-comment">// â†’ 2</span><br></code></pre></td></tr></table></figure><p>è¢«å«åšæ¡ä»¶è¿ç®—ç¬¦</p><p>é—®å·å·¦é¢çš„å€¼æŒ‘é€‰ä¸€ä¸ªå€¼</p><p>å®ƒä¸º <code>true</code> æ˜¯ é€‰æ‹©ä¸­é—´çš„å€¼</p><p>å®ƒä¸º<code>false</code> æ˜¯é€‰æ‹©å³é¢çš„å€¼</p><h5 id="ç©ºå€¼">ç©ºå€¼</h5><p><code>null</code> <code>undefined</code></p><p>è¡¨ç¤ºä¸å­˜åœ¨æœ‰æ„ä¹‰çš„å€¼</p><p>ä¸¤è€…å·®åˆ«ä¸å¤§</p>]]></content>
    
    
    <categories>
      
      <category>Javascript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>my new post</title>
    <link href="/2023/11/20/C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/"/>
    <url>/2023/11/20/C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="ctype-h">ctype.h</h2><h5 id="1-isascii">1.isascii()</h5><p>åˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨0-127</p><p>æ˜¯ASCII æ˜¯1</p><p>ä¸æ˜¯ASCII æ˜¯0</p><h5 id="2-isalpha">2.isalpha</h5><p>å°å†™2 å¤§å†™1 ä¸æ˜¯å­—æ¯0</p><h5 id="3-isdigit">3.isdigit</h5><p>æ˜¯ä¸æ˜¯åè¿›åˆ¶</p><p>0-9 è¿”å›é0</p><p>ä¸ç„¶è¿”å›0</p><h5 id="4-isalnum">4.isalnum()</h5><p>æ˜¯ä¸æ˜¯å­—æ¯æˆ–è€…æ•°å­—</p><p>æ˜¯è¿”å›é0 ä¸æ˜¯è¿”å›0</p><h5 id="5-isblank">5.isblank()</h5><p>æ˜¯ä¸æ˜¯ç©ºç™½å­—ç¬¦</p><p>æ˜¯ è¾“å‡ºé0</p><p>ä¸æ˜¯ è¾“å‡º0</p><h5 id="6-isspace">6.isspace()</h5><p>æ˜¯ä¸æ˜¯ç©ºç™½å­—ç¬¦</p><p>â€˜ â€™ or â€˜\tâ€™ or â€˜ \râ€™ or â€˜ \nâ€™ or â€˜ \v â€™or  â€˜\f â€™</p><h5 id="7-islower">7.islower()</h5><p>æ˜¯ä¸æ˜¯å°å†™å­—æ¯</p><p>æ˜¯ä¸º éé›¶ ä¸æ˜¯ä¸º0</p><h5 id="8-isupper">8.isupper()</h5><p>æ˜¯ä¸æ˜¯å¤§å†™å­—æ¯</p><p>æ˜¯ éé›¶ ä¸æ˜¯é›¶</p><h5 id="9-toupper">9.toupper()</h5><p>è½¬æ¢ä¸ºå¤§å†™å­—æ¯</p><p>touppper(â€˜aâ€™)</p><h5 id="10-tolower">10.tolower()</h5><p>è½¬æ¢ä¸ºå°å†™å­—æ¯</p><p>tolower(â€˜Aâ€™)</p><h5 id=""></h5>]]></content>
    
    
    <categories>
      
      <category>C++</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
